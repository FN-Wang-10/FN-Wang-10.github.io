"use strict";(self.webpackChunkfn_wang_10_github_io=self.webpackChunkfn_wang_10_github_io||[]).push([[1907],{95531:(r,n,e)=>{e.r(n),e.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>o,toc:()=>a});var t=e(85893),s=e(11151);const c={},i=void 0,o={id:"React/\u5728React\u9879\u76ee\u662f\u5982\u4f55\u6355\u83b7\u9519\u8bef\u7684",title:"\u5728React\u9879\u76ee\u662f\u5982\u4f55\u6355\u83b7\u9519\u8bef\u7684",description:"\u4e00\u3001\u662f\u4ec0\u4e48",source:"@site/docs/React/\u5728React\u9879\u76ee\u662f\u5982\u4f55\u6355\u83b7\u9519\u8bef\u7684.md",sourceDirName:"React",slug:"/React/\u5728React\u9879\u76ee\u662f\u5982\u4f55\u6355\u83b7\u9519\u8bef\u7684",permalink:"/docs/React/\u5728React\u9879\u76ee\u662f\u5982\u4f55\u6355\u83b7\u9519\u8bef\u7684",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"reactSidebar",previous:{title:"\u51fd\u6570\u7ec4\u4ef6\u548c\u7c7b\u7ec4\u4ef6\u7684\u533a\u522b",permalink:"/docs/React/\u51fd\u6570\u7ec4\u4ef6\u548c\u7c7b\u7ec4\u4ef6\u7684\u533a\u522b"},next:{title:"\u6027\u80fd\u4f18\u5316",permalink:"/docs/React/\u6027\u80fd\u4f18\u5316"}},d={},a=[{value:"\u4e00\u3001\u662f\u4ec0\u4e48",id:"\u4e00\u662f\u4ec0\u4e48",level:2},{value:"\u4e8c\u3001\u5982\u4f55\u505a",id:"\u4e8c\u5982\u4f55\u505a",level:2},{value:"\u53c2\u8003\u6587\u732e",id:"\u53c2\u8003\u6587\u732e",level:2}];function l(r){const n={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...r.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"\u4e00\u662f\u4ec0\u4e48",children:"\u4e00\u3001\u662f\u4ec0\u4e48"}),"\n",(0,t.jsx)(n.p,{children:"\u9519\u8bef\u5728\u6211\u4eec\u65e5\u5e38\u7f16\u5199\u4ee3\u7801\u662f\u975e\u5e38\u5e38\u89c1\u7684"}),"\n",(0,t.jsxs)(n.p,{children:["\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5728",(0,t.jsx)(n.code,{children:"react"}),"\u9879\u76ee\u4e2d\u53bb\u7f16\u5199\u7ec4\u4ef6\u5185",(0,t.jsx)(n.code,{children:"JavaScript"}),"\u4ee3\u7801\u9519\u8bef\u4f1a\u5bfc\u81f4 ",(0,t.jsx)(n.code,{children:"React"})," \u7684\u5185\u90e8\u72b6\u6001\u88ab\u7834\u574f\uff0c\u5bfc\u81f4\u6574\u4e2a\u5e94\u7528\u5d29\u6e83\uff0c\u8fd9\u662f\u4e0d\u5e94\u8be5\u51fa\u73b0\u7684\u73b0\u8c61"]}),"\n",(0,t.jsxs)(n.p,{children:["\u4f5c\u4e3a\u4e00\u4e2a\u6846\u67b6\uff0c",(0,t.jsx)(n.code,{children:"react"}),"\u4e5f\u6709\u81ea\u8eab\u5bf9\u4e8e\u9519\u8bef\u7684\u5904\u7406\u7684\u89e3\u51b3\u65b9\u6848"]}),"\n",(0,t.jsx)(n.h2,{id:"\u4e8c\u5982\u4f55\u505a",children:"\u4e8c\u3001\u5982\u4f55\u505a"}),"\n",(0,t.jsxs)(n.p,{children:["\u4e3a\u4e86\u89e3\u51b3\u51fa\u73b0\u7684\u9519\u8bef\u5bfc\u81f4\u6574\u4e2a\u5e94\u7528\u5d29\u6e83\u7684\u95ee\u9898\uff0c",(0,t.jsx)(n.code,{children:"react16"}),"\u5f15\u7528\u4e86",(0,t.jsx)(n.strong,{children:"\u9519\u8bef\u8fb9\u754c"}),"\u65b0\u7684\u6982\u5ff5"]}),"\n",(0,t.jsxs)(n.p,{children:["\u9519\u8bef\u8fb9\u754c\u662f\u4e00\u79cd ",(0,t.jsx)(n.code,{children:"React"})," \u7ec4\u4ef6\uff0c\u8fd9\u79cd\u7ec4\u4ef6\u53ef\u4ee5\u6355\u83b7\u53d1\u751f\u5728\u5176\u5b50\u7ec4\u4ef6\u6811\u4efb\u4f55\u4f4d\u7f6e\u7684 ",(0,t.jsx)(n.code,{children:"JavaScript"})," \u9519\u8bef\uff0c\u5e76\u6253\u5370\u8fd9\u4e9b\u9519\u8bef\uff0c\u540c\u65f6\u5c55\u793a\u964d\u7ea7 ",(0,t.jsx)(n.code,{children:"UI"}),"\uff0c\u800c\u5e76\u4e0d\u4f1a\u6e32\u67d3\u90a3\u4e9b\u53d1\u751f\u5d29\u6e83\u7684\u5b50\u7ec4\u4ef6\u6811"]}),"\n",(0,t.jsx)(n.p,{children:"\u9519\u8bef\u8fb9\u754c\u5728\u6e32\u67d3\u671f\u95f4\u3001\u751f\u547d\u5468\u671f\u65b9\u6cd5\u548c\u6574\u4e2a\u7ec4\u4ef6\u6811\u7684\u6784\u9020\u51fd\u6570\u4e2d\u6355\u83b7\u9519\u8bef"}),"\n",(0,t.jsx)(n.p,{children:"\u5f62\u6210\u9519\u8bef\u8fb9\u754c\u7ec4\u4ef6\u7684\u4e24\u4e2a\u6761\u4ef6\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u4f7f\u7528\u4e86 static getDerivedStateFromError()"}),"\n",(0,t.jsx)(n.li,{children:"\u4f7f\u7528\u4e86 componentDidCatch()"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u629b\u51fa\u9519\u8bef\u540e\uff0c\u8bf7\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"static getDerivedStateFromError()"})," \u6e32\u67d3\u5907\u7528 UI \uff0c\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"componentDidCatch()"})," \u6253\u5370\u9519\u8bef\u4fe1\u606f\uff0c\u5982\u4e0b\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:"class ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // \u66f4\u65b0 state \u4f7f\u4e0b\u4e00\u6b21\u6e32\u67d3\u80fd\u591f\u663e\u793a\u964d\u7ea7\u540e\u7684 UI\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    // \u4f60\u540c\u6837\u53ef\u4ee5\u5c06\u9519\u8bef\u65e5\u5fd7\u4e0a\u62a5\u7ed9\u670d\u52a1\u5668\r\n    logErrorToMyService(error, errorInfo);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // \u4f60\u53ef\u4ee5\u81ea\u5b9a\u4e49\u964d\u7ea7\u540e\u7684 UI \u5e76\u6e32\u67d3\r\n      return <h1>Something went wrong.</h1>;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u7136\u540e\u5c31\u53ef\u4ee5\u628a\u81ea\u8eab\u7ec4\u4ef6\u7684\u4f5c\u4e3a\u9519\u8bef\u8fb9\u754c\u7684\u5b50\u7ec4\u4ef6\uff0c\u5982\u4e0b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:"<ErrorBoundary>\r\n  <MyWidget />\r\n</ErrorBoundary>\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u4e0b\u9762\u8fd9\u4e9b\u60c5\u51b5\u65e0\u6cd5\u6355\u83b7\u5230\u5f02\u5e38\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u4e8b\u4ef6\u5904\u7406"}),"\n",(0,t.jsx)(n.li,{children:"\u5f02\u6b65\u4ee3\u7801"}),"\n",(0,t.jsx)(n.li,{children:"\u670d\u52a1\u7aef\u6e32\u67d3"}),"\n",(0,t.jsx)(n.li,{children:"\u81ea\u8eab\u629b\u51fa\u6765\u7684\u9519\u8bef"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u5728",(0,t.jsx)(n.code,{children:"react 16"}),"\u7248\u672c\u4e4b\u540e\uff0c\u4f1a\u628a\u6e32\u67d3\u671f\u95f4\u53d1\u751f\u7684\u6240\u6709\u9519\u8bef\u6253\u5370\u5230\u63a7\u5236\u53f0"]}),"\n",(0,t.jsx)(n.p,{children:"\u9664\u4e86\u9519\u8bef\u4fe1\u606f\u548c JavaScript \u6808\u5916\uff0cReact 16 \u8fd8\u63d0\u4f9b\u4e86\u7ec4\u4ef6\u6808\u8ffd\u8e2a\u3002\u73b0\u5728\u4f60\u53ef\u4ee5\u51c6\u786e\u5730\u67e5\u770b\u53d1\u751f\u5728\u7ec4\u4ef6\u6811\u5185\u7684\u9519\u8bef\u4fe1\u606f\uff1a"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://static.vue-js.com/7b2b51d0-f289-11eb-ab90-d9ae814b240d.png",alt:""})}),"\n",(0,t.jsx)(n.p,{children:"\u53ef\u4ee5\u770b\u5230\u5728\u9519\u8bef\u4fe1\u606f\u4e0b\u65b9\u6587\u5b57\u4e2d\u5b58\u5728\u4e00\u4e2a\u7ec4\u4ef6\u6808\uff0c\u4fbf\u4e8e\u6211\u4eec\u8ffd\u8e2a\u9519\u8bef"}),"\n",(0,t.jsx)(n.p,{children:"\u5bf9\u4e8e\u9519\u8bef\u8fb9\u754c\u65e0\u6cd5\u6355\u83b7\u7684\u5f02\u5e38\uff0c\u5982\u4e8b\u4ef6\u5904\u7406\u8fc7\u7a0b\u4e2d\u53d1\u751f\u95ee\u9898\u5e76\u4e0d\u4f1a\u6355\u83b7\u5230\uff0c\u662f\u56e0\u4e3a\u5176\u4e0d\u4f1a\u5728\u6e32\u67d3\u671f\u95f4\u89e6\u53d1\uff0c\u5e76\u4e0d\u4f1a\u5bfc\u81f4\u6e32\u67d3\u65f6\u5019\u95ee\u9898"}),"\n",(0,t.jsxs)(n.p,{children:["\u8fd9\u79cd\u60c5\u51b5\u53ef\u4ee5\u4f7f\u7528",(0,t.jsx)(n.code,{children:"js"}),"\u7684",(0,t.jsx)(n.code,{children:"try...catch..."}),"\u8bed\u6cd5\uff0c\u5982\u4e0b\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:"class MyComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { error: null };\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  handleClick() {\r\n    try {\r\n      // \u6267\u884c\u64cd\u4f5c\uff0c\u5982\u6709\u9519\u8bef\u5219\u4f1a\u629b\u51fa\r\n    } catch (error) {\r\n      this.setState({ error });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.state.error) {\r\n      return <h1>Caught an error.</h1>;\r\n    }\r\n    return <button onClick={this.handleClick}>Click Me</button>;\r\n  }\r\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u9664\u6b64\u4e4b\u5916\u8fd8\u53ef\u4ee5\u901a\u8fc7\u76d1\u542c",(0,t.jsx)(n.code,{children:"onerror"}),"\u4e8b\u4ef6"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"window.addEventListener('error', function(event) { ... })\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u53c2\u8003\u6587\u732e",children:"\u53c2\u8003\u6587\u732e"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://zh-hans.reactjs.org/docs/error-boundaries.html",children:"https://zh-hans.reactjs.org/docs/error-boundaries.html"})}),"\n"]})]})}function h(r={}){const{wrapper:n}={...(0,s.a)(),...r.components};return n?(0,t.jsx)(n,{...r,children:(0,t.jsx)(l,{...r})}):l(r)}},11151:(r,n,e)=>{e.d(n,{Z:()=>o,a:()=>i});var t=e(67294);const s={},c=t.createContext(s);function i(r){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof r?r(n):{...n,...r}}),[n,r])}function o(r){let n;return n=r.disableParentContext?"function"==typeof r.components?r.components(s):r.components||s:i(r.components),t.createElement(c.Provider,{value:n},r.children)}}}]);