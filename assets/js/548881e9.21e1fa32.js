"use strict";(self.webpackChunkfn_wang_10_github_io=self.webpackChunkfn_wang_10_github_io||[]).push([[60320],{68762:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>x,contentTitle:()=>s,default:()=>d,frontMatter:()=>c,metadata:()=>a,toc:()=>i});var r=n(85893),o=n(11151);const c={},s=void 0,a={id:"React/context \u7ec4\u4ef6\u901a\u4fe1\uff08\u4e09\u79cd\u65b9\u5f0f\uff09",title:"context \u7ec4\u4ef6\u901a\u4fe1\uff08\u4e09\u79cd\u65b9\u5f0f\uff09",description:"\u4ece react \u4e2d\u89e3\u6784 createContext \u51fd\u6570\uff0c\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\u4f1a\u8fd4\u56de\u4e00\u4e2a context \u5bf9\u8c61,\u4ece context \u4e2d\u53ef\u4ee5\u89e3\u6784\u51fa\u4e24\u4e2a\u7ec4\u4ef6\uff0cProvider,Consumer",source:"@site/docs/React/context \u7ec4\u4ef6\u901a\u4fe1\uff08\u4e09\u79cd\u65b9\u5f0f\uff09.md",sourceDirName:"React",slug:"/React/context \u7ec4\u4ef6\u901a\u4fe1\uff08\u4e09\u79cd\u65b9\u5f0f\uff09",permalink:"/docs/React/context \u7ec4\u4ef6\u901a\u4fe1\uff08\u4e09\u79cd\u65b9\u5f0f\uff09",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"reactSidebar",previous:{title:"Redux\u6570\u636e\u6d41",permalink:"/docs/React/Redux\u6570\u636e\u6d41"},next:{title:"context\u7684\u7f3a\u70b9",permalink:"/docs/React/context\u7684\u7f3a\u70b9"}},x={},i=[{value:"1.React.createContext \u63d0\u4f9b\u7684 Provider \u548c Consumer",id:"1reactcreatecontext-\u63d0\u4f9b\u7684-provider-\u548c-consumer",level:2},{value:"2.\u51fd\u6570\u7ec4\u4ef6\uff1aReact.createContext \u63d0\u4f9b\u7684 Provider \u548c useContext \u94a9\u5b50",id:"2\u51fd\u6570\u7ec4\u4ef6reactcreatecontext-\u63d0\u4f9b\u7684-provider-\u548c-usecontext-\u94a9\u5b50",level:2},{value:"3.Class \u7ec4\u4ef6\uff1aReact.createContext \u63d0\u4f9b\u7684 Provider \u548c class \u7684 contextType \u5c5e\u6027",id:"3class-\u7ec4\u4ef6reactcreatecontext-\u63d0\u4f9b\u7684-provider-\u548c-class-\u7684-contexttype-\u5c5e\u6027",level:2}];function l(e){const t={a:"a",br:"br",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["\u4ece react \u4e2d\u89e3\u6784 createContext \u51fd\u6570\uff0c\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\u4f1a\u8fd4\u56de\u4e00\u4e2a context \u5bf9\u8c61,\u4ece context \u4e2d\u53ef\u4ee5\u89e3\u6784\u51fa\u4e24\u4e2a\u7ec4\u4ef6\uff0cProvider,Consumer",(0,r.jsx)(t.br,{}),"\n",(0,r.jsx)(t.code,{children:"const [Provider,Consumer]=context"}),"\r\nProvider \u662f\u52a0\u5728\u7236\u7ec4\u4ef6\u7684\u6700\u5916\u5c42\uff0c\u6709\u4e00\u4e2a value \u5c5e\u6027\uff0c\u4e00\u822c\u4e3a\u5bf9\u8c61 ",(0,r.jsx)(t.code,{children:"value={{  }}  "}),"\r\nConsumer \u662f\u5728\u5b50\u7ec4\u4ef6\u6216\u8005\u5b59\u7ec4\u4ef6\u4e2d\u4f7f\u7528,Consumer \u91cc\u9762\u8981\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a jsx",(0,r.jsx)(t.br,{}),"\n",(0,r.jsx)(t.code,{children:"<Consumer>{(value)=><span>value.xxx</span>}</Consumer>"})]}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"React.createContext \u63d0\u4f9b\u7684 Provider \u548c Consumer"}),"\n",(0,r.jsx)(t.li,{children:"\u51fd\u6570\u7ec4\u4ef6\uff1aReact.createContext \u63d0\u4f9b\u7684 Provider \u548c useContext \u94a9\u5b50"}),"\n",(0,r.jsx)(t.li,{children:"Class \u7ec4\u4ef6\uff1aReact.createContext \u63d0\u4f9b\u7684 Provider \u548c class \u7684 contextType \u5c5e\u6027"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"1reactcreatecontext-\u63d0\u4f9b\u7684-provider-\u548c-consumer",children:"1.React.createContext \u63d0\u4f9b\u7684 Provider \u548c Consumer"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-jsx",children:'   import React, { createContext } from "react";\r\n   const content=createContext()\r\n   const [Provider,Consumer]=content\r\n   \u7236\u7ec4\u4ef6\r\n   <Provider value={{ }}>\u5b50\u5b59\u7ec4\u4ef6 </ Provider>\r\n   \u5b50\u5b59\u7ec4\u4ef6\r\n   <Consumer>\r\n       {\r\n           (value)=>{\r\n               return <>{value}</>\r\n           }\r\n       }\r\n   </ Consumer>\n'})}),"\n",(0,r.jsx)(t.h2,{id:"2\u51fd\u6570\u7ec4\u4ef6reactcreatecontext-\u63d0\u4f9b\u7684-provider-\u548c-usecontext-\u94a9\u5b50",children:"2.\u51fd\u6570\u7ec4\u4ef6\uff1aReact.createContext \u63d0\u4f9b\u7684 Provider \u548c useContext \u94a9\u5b50"}),"\n",(0,r.jsx)(t.p,{children:"useContext\u4e3b\u8981\u662f\u7528\u4e8e\u7b80\u5316context\u4e0b\u9762\u7684Consumer\u7684\u63a5\u6536\u7684\r\n\u53ea\u662f\u7b80\u5316\u63a5\u6536\uff0c\u4f20\u9012Provider\u8fd8\u662f\u4e0d\u53d8\u7684\r\n\u4f7f\u7528useContext,createContext\u8fd8\u662f\u5fc5\u987b\u8981\u6709\u7684\r\nuseContext\u51fd\u6570\u9700\u8981\u63a5\u53d7context\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u4e14\u53ef\u4ee5\u8fd4\u56de\u51facontext\u5bf9\u8c61\u91cc\u9762\u4f20\u8fc7\u6765\u7684value\u5c5e\u6027\uff08value\u662f\u4e00\u4e2a\u5bf9\u8c61\uff09\r\nuseContext\u7528\u7684\u4e5f\u4e0d\u591a\uff0c\u5982\u679c\u662f\u4e00\u7ec4\u4f20\u53c2\u7684\u8bdd\u76f4\u63a5\u5c31\u7528context\u4e86\uff0c\u6709\u7684\u65f6\u5019\u8de8\u7ec4\u4ef6\u4f20\u53c2\u7528\u5168\u5c40\u72b6\u6001\u7ba1\u7406\uff08redux\uff09\u4e86"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-jsx",children:'const value = useContext(context1);\r\n\r\n// \u76f4\u63a5\u89e3\u6784;\r\nconst { name } = useContext(context1);\r\n\r\nimport React, { useContext } from "react";\r\nimport MyContext from "./context";\r\nconst FnC = () => {\r\n  const context = useContext(MyContext);\r\n  return <div>\u7b2c\u4e8c\u79cd\u4f7f\u7528Context\u65b9\u5f0f\u83b7\u53d6\u7684\u503c\uff1a{JSON.stringify(context)}</div>;\r\n};\r\nexport default FnC;\n'})}),"\n",(0,r.jsx)(t.h2,{id:"3class-\u7ec4\u4ef6reactcreatecontext-\u63d0\u4f9b\u7684-provider-\u548c-class-\u7684-contexttype-\u5c5e\u6027",children:"3.Class \u7ec4\u4ef6\uff1aReact.createContext \u63d0\u4f9b\u7684 Provider \u548c class \u7684 contextType \u5c5e\u6027"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-jsx",children:'import React, { Component } from "react";\r\nimport context from "./context";\r\nclass ClassC extends Component {\r\n  static contextType = context;\r\n  render() {\r\n    const value = this.context;\r\n    return <div>\u7b2c\u4e09\u79cd\u4f7f\u7528Context\u65b9\u5f0f\u83b7\u53d6\u7684\u503c\uff1a{JSON.stringify(value)}</div>;\r\n  }\r\n}\r\n// ClassC.contextType = context; //\u6b64\u5904\u4e0e\u5199static\u5173\u952e\u5b57\u4f5c\u7528\u4e00\u81f4\r\nexport default ClassC;\n'})}),"\n",(0,r.jsx)(t.p,{children:"\u6302\u8f7d\u5728 class \u4e0a\u7684 contextType \u5c5e\u6027\u4f1a\u88ab\u91cd\u8d4b\u503c\u4e3a\u4e00\u4e2a\u7531 React.createContext() \u521b\u5efa\u7684 Context \u5bf9\u8c61\u3002\u8fd9\u80fd\u8ba9\u4f60\u4f7f\u7528 this.context \u6765\u6d88\u8d39\u6700\u8fd1 Context \u4e0a\u7684\u90a3\u4e2a\u503c\u3002\u4f60\u53ef\u4ee5\u5728\u4efb\u4f55\u751f\u547d\u5468\u671f\u4e2d\u8bbf\u95ee\u5230\u5b83\uff0c\u5305\u62ec render \u51fd\u6570\u4e2d\u3002\r\n\u4f7f\u7528static\u5173\u952e\u5b57\u6dfb\u52a0\u9759\u6001\u5c5e\u6027\uff0c\u548c\u76f4\u63a5\u5728class\u6dfb\u52a0\u5c5e\u6027\u6548\u679c\u4e00\u81f4,\u6700\u7ec8\u90fd\u4f1a\u6dfb\u52a0\u5230\u7c7b\u4e0a\uff0c\u800c\u4e0d\u662f\u7c7b\u7684\u5b9e\u4f8b\u4e0a"}),"\n",(0,r.jsxs)(t.p,{children:["\u53c2\u8003\uff1a",(0,r.jsx)(t.a,{href:"https://juejin.cn/post/6924506511511126029",children:"https://juejin.cn/post/6924506511511126029"})]})]})}function d(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},11151:(e,t,n)=>{n.d(t,{Z:()=>a,a:()=>s});var r=n(67294);const o={},c=r.createContext(o);function s(e){const t=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(c.Provider,{value:t},e.children)}}}]);