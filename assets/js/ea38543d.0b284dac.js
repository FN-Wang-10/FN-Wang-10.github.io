"use strict";(self.webpackChunkfn_wang_10_github_io=self.webpackChunkfn_wang_10_github_io||[]).push([[14026],{34102:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>t,default:()=>j,frontMatter:()=>c,metadata:()=>l,toc:()=>d});var o=n(74848),s=n(28453);const c={},t=void 0,l={id:"Vue3/Vue3.0\u91cc\u4e3a\u4ec0\u4e48\u8981\u7528 Proxy API \u66ff\u4ee3 defineProperty API \uff1f",title:"Vue3.0\u91cc\u4e3a\u4ec0\u4e48\u8981\u7528 Proxy API \u66ff\u4ee3 defineProperty API \uff1f",description:"\u4e00\u3001Object.defineProperty",source:"@site/docs/Vue3/Vue3.0\u91cc\u4e3a\u4ec0\u4e48\u8981\u7528 Proxy API \u66ff\u4ee3 defineProperty API \uff1f.md",sourceDirName:"Vue3",slug:"/Vue3/Vue3.0\u91cc\u4e3a\u4ec0\u4e48\u8981\u7528 Proxy API \u66ff\u4ee3 defineProperty API \uff1f",permalink:"/docs/Vue3/Vue3.0\u91cc\u4e3a\u4ec0\u4e48\u8981\u7528 Proxy API \u66ff\u4ee3 defineProperty API \uff1f",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"vue3Sidebar",previous:{title:"Vue3.0\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u4ec0\u4e48\uff1f\u505a\u4e86\u54ea\u4e9b\u4f18\u5316",permalink:"/docs/Vue3/Vue3.0\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u4ec0\u4e48\uff1f\u505a\u4e86\u54ea\u4e9b\u4f18\u5316"},next:{title:"Vue3",permalink:"/docs/Vue3/"}},i={},d=[{value:"\u4e00\u3001Object.defineProperty",id:"\u4e00objectdefineproperty",level:2},{value:"\u4e3a\u4ec0\u4e48\u80fd\u5b9e\u73b0\u54cd\u5e94\u5f0f",id:"\u4e3a\u4ec0\u4e48\u80fd\u5b9e\u73b0\u54cd\u5e94\u5f0f",level:5},{value:"\u5c0f\u7ed3",id:"\u5c0f\u7ed3",level:3},{value:"\u4e8c\u3001proxy",id:"\u4e8cproxy",level:2},{value:"\u4e09\u3001\u603b\u7ed3",id:"\u4e09\u603b\u7ed3",level:2},{value:"\u53c2\u8003\u6587\u732e",id:"\u53c2\u8003\u6587\u732e",level:3}];function a(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",h5:"h5",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.h2,{id:"\u4e00objectdefineproperty",children:"\u4e00\u3001Object.defineProperty"}),"\n",(0,o.jsxs)(r.p,{children:["\u5b9a\u4e49\uff1a",(0,o.jsx)(r.code,{children:"Object.defineProperty()"})," \u65b9\u6cd5\u4f1a\u76f4\u63a5\u5728\u4e00\u4e2a\u5bf9\u8c61\u4e0a\u5b9a\u4e49\u4e00\u4e2a\u65b0\u5c5e\u6027\uff0c\u6216\u8005\u4fee\u6539\u4e00\u4e2a\u5bf9\u8c61\u7684\u73b0\u6709\u5c5e\u6027\uff0c\u5e76\u8fd4\u56de\u6b64\u5bf9\u8c61"]}),"\n",(0,o.jsx)(r.h5,{id:"\u4e3a\u4ec0\u4e48\u80fd\u5b9e\u73b0\u54cd\u5e94\u5f0f",children:"\u4e3a\u4ec0\u4e48\u80fd\u5b9e\u73b0\u54cd\u5e94\u5f0f"}),"\n",(0,o.jsxs)(r.p,{children:["\u901a\u8fc7",(0,o.jsx)(r.code,{children:"defineProperty"})," \u4e24\u4e2a\u5c5e\u6027\uff0c",(0,o.jsx)(r.code,{children:"get"}),"\u53ca",(0,o.jsx)(r.code,{children:"set"})]}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"get"}),"\n"]}),"\n",(0,o.jsx)(r.p,{children:"\u5c5e\u6027\u7684 getter \u51fd\u6570\uff0c\u5f53\u8bbf\u95ee\u8be5\u5c5e\u6027\u65f6\uff0c\u4f1a\u8c03\u7528\u6b64\u51fd\u6570\u3002\u6267\u884c\u65f6\u4e0d\u4f20\u5165\u4efb\u4f55\u53c2\u6570\uff0c\u4f46\u662f\u4f1a\u4f20\u5165 this \u5bf9\u8c61\uff08\u7531\u4e8e\u7ee7\u627f\u5173\u7cfb\uff0c\u8fd9\u91cc\u7684 this \u5e76\u4e0d\u4e00\u5b9a\u662f\u5b9a\u4e49\u8be5\u5c5e\u6027\u7684\u5bf9\u8c61\uff09\u3002\u8be5\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4f1a\u88ab\u7528\u4f5c\u5c5e\u6027\u7684\u503c"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"set"}),"\n"]}),"\n",(0,o.jsx)(r.p,{children:"\u5c5e\u6027\u7684 setter \u51fd\u6570\uff0c\u5f53\u5c5e\u6027\u503c\u88ab\u4fee\u6539\u65f6\uff0c\u4f1a\u8c03\u7528\u6b64\u51fd\u6570\u3002\u8be5\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff08\u4e5f\u5c31\u662f\u88ab\u8d4b\u4e88\u7684\u65b0\u503c\uff09\uff0c\u4f1a\u4f20\u5165\u8d4b\u503c\u65f6\u7684 this \u5bf9\u8c61\u3002\u9ed8\u8ba4\u4e3a undefined"}),"\n",(0,o.jsx)(r.p,{children:"\u4e0b\u9762\u901a\u8fc7\u4ee3\u7801\u5c55\u793a\uff1a"}),"\n",(0,o.jsxs)(r.p,{children:["\u5b9a\u4e49\u4e00\u4e2a\u54cd\u5e94\u5f0f\u51fd\u6570",(0,o.jsx)(r.code,{children:"defineReactive"})]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"function update() {\r\n  app.innerText = obj.foo;\r\n}\r\n\r\nfunction defineReactive(obj, key, val) {\r\n  Object.defineProperty(obj, key, {\r\n    get() {\r\n      console.log(`get ${key}:${val}`);\r\n      return val;\r\n    },\r\n    set(newVal) {\r\n      if (newVal !== val) {\r\n        val = newVal;\r\n        update();\r\n      }\r\n    },\r\n  });\r\n}\n"})}),"\n",(0,o.jsxs)(r.p,{children:["\u8c03\u7528",(0,o.jsx)(r.code,{children:"defineReactive"}),"\uff0c\u6570\u636e\u53d1\u751f\u53d8\u5316\u89e6\u53d1",(0,o.jsx)(r.code,{children:"update"}),"\u65b9\u6cd5\uff0c\u5b9e\u73b0\u6570\u636e\u54cd\u5e94\u5f0f"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:'const obj = {};\r\ndefineReactive(obj, "foo", "");\r\nsetTimeout(() => {\r\n  obj.foo = new Date().toLocaleTimeString();\r\n}, 1000);\n'})}),"\n",(0,o.jsxs)(r.p,{children:["\u5728\u5bf9\u8c61\u5b58\u5728\u591a\u4e2a",(0,o.jsx)(r.code,{children:"key"}),"\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u8fdb\u884c\u904d\u5386"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:'function observe(obj) {\r\n  if (typeof obj !== "object" || obj == null) {\r\n    return;\r\n  }\r\n  Object.keys(obj).forEach((key) => {\r\n    defineReactive(obj, key, obj[key]);\r\n  });\r\n}\n'})}),"\n",(0,o.jsxs)(r.p,{children:["\u5982\u679c\u5b58\u5728\u5d4c\u5957\u5bf9\u8c61\u7684\u60c5\u51b5\uff0c\u8fd8\u9700\u8981\u5728",(0,o.jsx)(r.code,{children:"defineReactive"}),"\u4e2d\u8fdb\u884c\u9012\u5f52"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"function defineReactive(obj, key, val) {\r\n  observe(val);\r\n  Object.defineProperty(obj, key, {\r\n    get() {\r\n      console.log(`get ${key}:${val}`);\r\n      return val;\r\n    },\r\n    set(newVal) {\r\n      if (newVal !== val) {\r\n        val = newVal;\r\n        update();\r\n      }\r\n    },\r\n  });\r\n}\n"})}),"\n",(0,o.jsxs)(r.p,{children:["\u5f53\u7ed9",(0,o.jsx)(r.code,{children:"key"}),"\u8d4b\u503c\u4e3a\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u8fd8\u9700\u8981\u5728",(0,o.jsx)(r.code,{children:"set"}),"\u5c5e\u6027\u4e2d\u8fdb\u884c\u9012\u5f52"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"set(newVal) {\r\n    if (newVal !== val) {\r\n        observe(newVal) // \u65b0\u503c\u662f\u5bf9\u8c61\u7684\u60c5\u51b5\r\n        notifyUpdate()\r\n    }\r\n}\n"})}),"\n",(0,o.jsx)(r.p,{children:"\u4e0a\u8ff0\u4f8b\u5b50\u80fd\u591f\u5b9e\u73b0\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u7684\u57fa\u672c\u54cd\u5e94\u5f0f\uff0c\u4f46\u4ecd\u7136\u5b58\u5728\u8bf8\u591a\u95ee\u9898"}),"\n",(0,o.jsx)(r.p,{children:"\u73b0\u5728\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u8fdb\u884c\u5220\u9664\u4e0e\u6dfb\u52a0\u5c5e\u6027\u64cd\u4f5c\uff0c\u65e0\u6cd5\u52ab\u6301\u5230"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:'const obj = {\r\n  foo: "foo",\r\n  bar: "bar",\r\n};\r\nobserve(obj);\r\ndelete obj.foo; // no ok\r\nobj.jar = "xxx"; // no ok\n'})}),"\n",(0,o.jsx)(r.p,{children:"\u5f53\u6211\u4eec\u5bf9\u4e00\u4e2a\u6570\u7ec4\u8fdb\u884c\u76d1\u542c\u7684\u65f6\u5019\uff0c\u5e76\u4e0d\u90a3\u4e48\u597d\u4f7f\u4e86"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"const arrData = [1, 2, 3, 4, 5];\r\narrData.forEach((val, index) => {\r\n  defineProperty(arrData, index, val);\r\n});\r\narrData.push(); // no ok\r\narrData.pop(); // no ok\r\narrDate[0] = 99; // ok\n"})}),"\n",(0,o.jsxs)(r.p,{children:["\u53ef\u4ee5\u770b\u5230\u6570\u636e\u7684",(0,o.jsx)(r.code,{children:"api"}),"\u65e0\u6cd5\u52ab\u6301\u5230\uff0c\u4ece\u800c\u65e0\u6cd5\u5b9e\u73b0\u6570\u636e\u54cd\u5e94\u5f0f\uff0c"]}),"\n",(0,o.jsxs)(r.p,{children:["\u6240\u4ee5\u5728",(0,o.jsx)(r.code,{children:"Vue2"}),"\u4e2d\uff0c\u589e\u52a0\u4e86",(0,o.jsx)(r.code,{children:"set"}),"\u3001",(0,o.jsx)(r.code,{children:"delete"})," API\uff0c\u5e76\u4e14\u5bf9\u6570\u7ec4",(0,o.jsx)(r.code,{children:"api"}),"\u65b9\u6cd5\u8fdb\u884c\u4e00\u4e2a\u91cd\u5199"]}),"\n",(0,o.jsx)(r.p,{children:"\u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\u5219\u662f\uff0c\u5982\u679c\u5b58\u5728\u6df1\u5c42\u7684\u5d4c\u5957\u5bf9\u8c61\u5173\u7cfb\uff0c\u9700\u8981\u6df1\u5c42\u7684\u8fdb\u884c\u76d1\u542c\uff0c\u9020\u6210\u4e86\u6027\u80fd\u7684\u6781\u5927\u95ee\u9898"}),"\n",(0,o.jsx)(r.h3,{id:"\u5c0f\u7ed3",children:"\u5c0f\u7ed3"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"\u68c0\u6d4b\u4e0d\u5230\u5bf9\u8c61\u5c5e\u6027\u7684\u6dfb\u52a0\u548c\u5220\u9664"}),"\n",(0,o.jsxs)(r.li,{children:["\u6570\u7ec4",(0,o.jsx)(r.code,{children:"API"}),"\u65b9\u6cd5\u65e0\u6cd5\u76d1\u542c\u5230"]}),"\n",(0,o.jsx)(r.li,{children:"\u9700\u8981\u5bf9\u6bcf\u4e2a\u5c5e\u6027\u8fdb\u884c\u904d\u5386\u76d1\u542c\uff0c\u5982\u679c\u5d4c\u5957\u5bf9\u8c61\uff0c\u9700\u8981\u6df1\u5c42\u76d1\u542c\uff0c\u9020\u6210\u6027\u80fd\u95ee\u9898"}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"\u4e8cproxy",children:"\u4e8c\u3001proxy"}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"Proxy"}),"\u7684\u76d1\u542c\u662f\u9488\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u7684\uff0c\u90a3\u4e48\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u7684\u6240\u6709\u64cd\u4f5c\u4f1a\u8fdb\u5165\u76d1\u542c\u64cd\u4f5c\uff0c\u8fd9\u5c31\u5b8c\u5168\u53ef\u4ee5\u4ee3\u7406\u6240\u6709\u5c5e\u6027\u4e86"]}),"\n",(0,o.jsxs)(r.p,{children:["\u5728",(0,o.jsx)(r.code,{children:"ES6"}),"\u7cfb\u5217\u4e2d\uff0c\u6211\u4eec\u8be6\u7ec6\u8bb2\u89e3\u8fc7",(0,o.jsx)(r.code,{children:"Proxy"}),"\u7684\u4f7f\u7528\uff0c\u5c31\u4e0d\u518d\u8ff0\u8bf4\u4e86"]}),"\n",(0,o.jsx)(r.p,{children:"\u4e0b\u9762\u901a\u8fc7\u4ee3\u7801\u8fdb\u884c\u5c55\u793a\uff1a"}),"\n",(0,o.jsxs)(r.p,{children:["\u5b9a\u4e49\u4e00\u4e2a\u54cd\u5e94\u5f0f\u65b9\u6cd5",(0,o.jsx)(r.code,{children:"reactive"})]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:'function reactive(obj) {\r\n  if (typeof obj !== "object" && obj != null) {\r\n    return obj;\r\n  }\r\n  // Proxy\u76f8\u5f53\u4e8e\u5728\u5bf9\u8c61\u5916\u5c42\u52a0\u62e6\u622a\r\n  const observed = new Proxy(obj, {\r\n    get(target, key, receiver) {\r\n      const res = Reflect.get(target, key, receiver);\r\n      console.log(`\u83b7\u53d6${key}:${res}`);\r\n      return res;\r\n    },\r\n    set(target, key, value, receiver) {\r\n      const res = Reflect.set(target, key, value, receiver);\r\n      console.log(`\u8bbe\u7f6e${key}:${value}`);\r\n      return res;\r\n    },\r\n    deleteProperty(target, key) {\r\n      const res = Reflect.deleteProperty(target, key);\r\n      console.log(`\u5220\u9664${key}:${res}`);\r\n      return res;\r\n    },\r\n  });\r\n  return observed;\r\n}\n'})}),"\n",(0,o.jsx)(r.p,{children:"\u6d4b\u8bd5\u4e00\u4e0b\u7b80\u5355\u6570\u636e\u7684\u64cd\u4f5c\uff0c\u53d1\u73b0\u90fd\u80fd\u52ab\u6301"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:'const state = reactive({\r\n  foo: "foo",\r\n});\r\n// 1.\u83b7\u53d6\r\nstate.foo; // ok\r\n// 2.\u8bbe\u7f6e\u5df2\u5b58\u5728\u5c5e\u6027\r\nstate.foo = "fooooooo"; // ok\r\n// 3.\u8bbe\u7f6e\u4e0d\u5b58\u5728\u5c5e\u6027\r\nstate.dong = "dong"; // ok\r\n// 4.\u5220\u9664\u5c5e\u6027\r\ndelete state.dong; // ok\n'})}),"\n",(0,o.jsx)(r.p,{children:"\u518d\u6d4b\u8bd5\u5d4c\u5957\u5bf9\u8c61\u60c5\u51b5\uff0c\u8fd9\u65f6\u5019\u53d1\u73b0\u5c31\u4e0d\u90a3\u4e48 OK \u4e86"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"const state = reactive({\r\n  bar: { a: 1 },\r\n});\r\n\r\n// \u8bbe\u7f6e\u5d4c\u5957\u5bf9\u8c61\u5c5e\u6027\r\nstate.bar.a = 10; // no ok\n"})}),"\n",(0,o.jsxs)(r.p,{children:["\u5982\u679c\u8981\u89e3\u51b3\uff0c\u9700\u8981\u5728",(0,o.jsx)(r.code,{children:"get"}),"\u4e4b\u4e0a\u518d\u8fdb\u884c\u4e00\u5c42\u4ee3\u7406"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"function reactive(obj) {\r\n    if (typeof obj !== 'object' && obj != null) {\r\n        return obj\r\n    }\r\n    // Proxy\u76f8\u5f53\u4e8e\u5728\u5bf9\u8c61\u5916\u5c42\u52a0\u62e6\u622a\r\n    const observed = new Proxy(obj, {\r\n        get(target, key, receiver) {\r\n            const res = Reflect.get(target, key, receiver)\r\n            console.log(`\u83b7\u53d6${key}:${res}`)\r\n            return isObject(res) ? reactive(res) : res\r\n        },\r\n    return observed\r\n}\n"})}),"\n",(0,o.jsx)(r.h2,{id:"\u4e09\u603b\u7ed3",children:"\u4e09\u3001\u603b\u7ed3"}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"Object.defineProperty"}),"\u53ea\u80fd\u904d\u5386\u5bf9\u8c61\u5c5e\u6027\u8fdb\u884c\u52ab\u6301"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:'function observe(obj) {\r\n  if (typeof obj !== "object" || obj == null) {\r\n    return;\r\n  }\r\n  Object.keys(obj).forEach((key) => {\r\n    defineReactive(obj, key, obj[key]);\r\n  });\r\n}\n'})}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"Proxy"}),"\u76f4\u63a5\u53ef\u4ee5\u52ab\u6301\u6574\u4e2a\u5bf9\u8c61\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c\u6211\u4eec\u53ef\u4ee5\u53ea\u64cd\u4f5c\u65b0\u7684\u5bf9\u8c61\u8fbe\u5230\u54cd\u5e94\u5f0f\u76ee\u7684"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:'function reactive(obj) {\r\n  if (typeof obj !== "object" && obj != null) {\r\n    return obj;\r\n  }\r\n  // Proxy\u76f8\u5f53\u4e8e\u5728\u5bf9\u8c61\u5916\u5c42\u52a0\u62e6\u622a\r\n  const observed = new Proxy(obj, {\r\n    get(target, key, receiver) {\r\n      const res = Reflect.get(target, key, receiver);\r\n      console.log(`\u83b7\u53d6${key}:${res}`);\r\n      return res;\r\n    },\r\n    set(target, key, value, receiver) {\r\n      const res = Reflect.set(target, key, value, receiver);\r\n      console.log(`\u8bbe\u7f6e${key}:${value}`);\r\n      return res;\r\n    },\r\n    deleteProperty(target, key) {\r\n      const res = Reflect.deleteProperty(target, key);\r\n      console.log(`\u5220\u9664${key}:${res}`);\r\n      return res;\r\n    },\r\n  });\r\n  return observed;\r\n}\n'})}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"Proxy"}),"\u53ef\u4ee5\u76f4\u63a5\u76d1\u542c\u6570\u7ec4\u7684\u53d8\u5316\uff08",(0,o.jsx)(r.code,{children:"push"}),"\u3001",(0,o.jsx)(r.code,{children:"shift"}),"\u3001",(0,o.jsx)(r.code,{children:"splice"}),"\uff09"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"const obj = [1, 2, 3];\r\nconst proxtObj = reactive(obj);\r\nobj.psuh(4); // ok\n"})}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"Proxy"}),"\u6709\u591a\u8fbe 13 \u79cd\u62e6\u622a\u65b9\u6cd5,\u4e0d\u9650\u4e8e",(0,o.jsx)(r.code,{children:"apply"}),"\u3001",(0,o.jsx)(r.code,{children:"ownKeys"}),"\u3001",(0,o.jsx)(r.code,{children:"deleteProperty"}),"\u3001",(0,o.jsx)(r.code,{children:"has"}),"\u7b49\u7b49\uff0c\u8fd9\u662f",(0,o.jsx)(r.code,{children:"Object.defineProperty"}),"\u4e0d\u5177\u5907\u7684"]}),"\n",(0,o.jsxs)(r.p,{children:["\u6b63\u56e0\u4e3a",(0,o.jsx)(r.code,{children:"defineProperty"}),"\u81ea\u8eab\u7684\u7f3a\u9677\uff0c\u5bfc\u81f4",(0,o.jsx)(r.code,{children:"Vue2"}),"\u5728\u5b9e\u73b0\u54cd\u5e94\u5f0f\u8fc7\u7a0b\u9700\u8981\u5b9e\u73b0\u5176\u4ed6\u7684\u65b9\u6cd5\u8f85\u52a9\uff08\u5982\u91cd\u5199\u6570\u7ec4\u65b9\u6cd5\u3001\u589e\u52a0\u989d\u5916",(0,o.jsx)(r.code,{children:"set"}),"\u3001",(0,o.jsx)(r.code,{children:"delete"}),"\u65b9\u6cd5\uff09"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"// \u6570\u7ec4\u91cd\u5199\r\nconst originalProto = Array.prototype\r\nconst arrayProto = Object.create(originalProto)\r\n['push', 'pop', 'shift', 'unshift', 'splice', 'reverse', 'sort'].forEach(method => {\r\n  arrayProto[method] = function () {\r\n    originalProto[method].apply(this.arguments)\r\n    dep.notice()\r\n  }\r\n});\r\n\r\n// set\u3001delete\r\nVue.set(obj,'bar','newbar')\r\nVue.delete(obj),'bar')\n"})}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"Proxy"})," \u4e0d\u517c\u5bb9 IE\uff0c\u4e5f\u6ca1\u6709 ",(0,o.jsx)(r.code,{children:"polyfill"}),", ",(0,o.jsx)(r.code,{children:"defineProperty"})," \u80fd\u652f\u6301\u5230 IE9"]}),"\n",(0,o.jsx)(r.h3,{id:"\u53c2\u8003\u6587\u732e",children:"\u53c2\u8003\u6587\u732e"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.a,{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty",children:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty"})}),"\n"]})]})}function j(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>l});var o=n(96540);const s={},c=o.createContext(s);function t(e){const r=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),o.createElement(c.Provider,{value:r},e.children)}}}]);