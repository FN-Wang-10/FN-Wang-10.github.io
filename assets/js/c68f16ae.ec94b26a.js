"use strict";(self.webpackChunkfn_wang_10_github_io=self.webpackChunkfn_wang_10_github_io||[]).push([[1277],{41095:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>t,metadata:()=>l,toc:()=>i});var c=r(74848),d=r(28453);const t={},o=void 0,l={id:"React/jsx\u8f6c\u6362\u6210\u771f\u5b9edom\u7684\u8fc7\u7a0b",title:"jsx\u8f6c\u6362\u6210\u771f\u5b9edom\u7684\u8fc7\u7a0b",description:"\u4e00\u3001\u662f\u4ec0\u4e48",source:"@site/docs/React/jsx\u8f6c\u6362\u6210\u771f\u5b9edom\u7684\u8fc7\u7a0b.md",sourceDirName:"React",slug:"/React/jsx\u8f6c\u6362\u6210\u771f\u5b9edom\u7684\u8fc7\u7a0b",permalink:"/docs/React/jsx\u8f6c\u6362\u6210\u771f\u5b9edom\u7684\u8fc7\u7a0b",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"reactSidebar",previous:{title:"immutable\u4e0d\u53ef\u6539\u53d8\u6570\u636e",permalink:"/docs/React/immutable\u4e0d\u53ef\u6539\u53d8\u6570\u636e"},next:{title:"react17,18\u7248\u672c\u7684\u533a\u522b",permalink:"/docs/React/react17,18\u7248\u672c\u7684\u533a\u522b"}},s={},i=[{value:"\u4e00\u3001\u662f\u4ec0\u4e48",id:"\u4e00\u662f\u4ec0\u4e48",level:2},{value:"\u4e8c\u3001\u8fc7\u7a0b",id:"\u4e8c\u8fc7\u7a0b",level:2},{value:"\u4e09\u3001\u603b\u7ed3",id:"\u4e09\u603b\u7ed3",level:2},{value:"\u53c2\u8003\u6587\u732e",id:"\u53c2\u8003\u6587\u732e",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h2,{id:"\u4e00\u662f\u4ec0\u4e48",children:"\u4e00\u3001\u662f\u4ec0\u4e48"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"react"}),"\u901a\u8fc7\u5c06\u7ec4\u4ef6\u7f16\u5199\u7684",(0,c.jsx)(n.code,{children:"JSX"}),"\u6620\u5c04\u5230\u5c4f\u5e55\uff0c\u4ee5\u53ca\u7ec4\u4ef6\u4e2d\u7684\u72b6\u6001\u53d1\u751f\u4e86\u53d8\u5316\u4e4b\u540e ",(0,c.jsx)(n.code,{children:"React"}),"\u4f1a\u5c06\u8fd9\u4e9b\u300c\u53d8\u5316\u300d\u66f4\u65b0\u5230\u5c4f\u5e55\u4e0a"]}),"\n",(0,c.jsxs)(n.p,{children:["\u5728\u524d\u9762\u6587\u7ae0\u4e86\u89e3\u4e2d\uff0c",(0,c.jsx)(n.code,{children:"JSX"}),"\u901a\u8fc7",(0,c.jsx)(n.code,{children:"babel"}),"\u6700\u7ec8\u8f6c\u5316\u6210",(0,c.jsx)(n.code,{children:"React.createElement"}),"\u8fd9\u79cd\u5f62\u5f0f\uff0c\u4f8b\u5982\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-jsx",children:'<div>\r\n  <img src="avatar.png" className="profile" />\r\n  <Hello />\r\n</div>\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u4f1a\u88ab",(0,c.jsx)(n.code,{children:"bebel"}),"\u8f6c\u5316\u6210\u5982\u4e0b\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-jsx",children:'React.createElement(\r\n  "div",\r\n  null,\r\n  React.createElement("img", {\r\n    src: "avatar.png",\r\n    className: "profile",\r\n  }),\r\n  React.createElement(Hello, null)\r\n);\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u5728\u8f6c\u5316\u8fc7\u7a0b\u4e2d\uff0c",(0,c.jsx)(n.code,{children:"babel"}),"\u5728\u7f16\u8bd1\u65f6\u4f1a\u5224\u65ad JSX \u4e2d\u7ec4\u4ef6\u7684\u9996\u5b57\u6bcd\uff1a"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["\u5f53\u9996\u5b57\u6bcd\u4e3a\u5c0f\u5199\u65f6\uff0c\u5176\u88ab\u8ba4\u5b9a\u4e3a\u539f\u751f ",(0,c.jsx)(n.code,{children:"DOM"})," \u6807\u7b7e\uff0c",(0,c.jsx)(n.code,{children:"createElement"})," \u7684\u7b2c\u4e00\u4e2a\u53d8\u91cf\u88ab\u7f16\u8bd1\u4e3a\u5b57\u7b26\u4e32"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"\u5f53\u9996\u5b57\u6bcd\u4e3a\u5927\u5199\u65f6\uff0c\u5176\u88ab\u8ba4\u5b9a\u4e3a\u81ea\u5b9a\u4e49\u7ec4\u4ef6\uff0ccreateElement \u7684\u7b2c\u4e00\u4e2a\u53d8\u91cf\u88ab\u7f16\u8bd1\u4e3a\u5bf9\u8c61"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["\u6700\u7ec8\u90fd\u4f1a\u901a\u8fc7",(0,c.jsx)(n.code,{children:"RenderDOM.render(...)"}),"\u65b9\u6cd5\u8fdb\u884c\u6302\u8f7d\uff0c\u5982\u4e0b\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-jsx",children:'ReactDOM.render(<App />, document.getElementById("root"));\n'})}),"\n",(0,c.jsx)(n.h2,{id:"\u4e8c\u8fc7\u7a0b",children:"\u4e8c\u3001\u8fc7\u7a0b"}),"\n",(0,c.jsxs)(n.p,{children:["\u5728",(0,c.jsx)(n.code,{children:"react"}),"\u4e2d\uff0c\u8282\u70b9\u5927\u81f4\u53ef\u4ee5\u5206\u6210\u56db\u4e2a\u7c7b\u522b\uff1a"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u539f\u751f\u6807\u7b7e\u8282\u70b9"}),"\n",(0,c.jsx)(n.li,{children:"\u6587\u672c\u8282\u70b9"}),"\n",(0,c.jsx)(n.li,{children:"\u51fd\u6570\u7ec4\u4ef6"}),"\n",(0,c.jsx)(n.li,{children:"\u7c7b\u7ec4\u4ef6"}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-jsx",children:'class ClassComponent extends Component {\r\n  static defaultProps = {\r\n    color: "pink",\r\n  };\r\n  render() {\r\n    return (\r\n      <div className="border">\r\n        <h3>ClassComponent</h3>\r\n        <p className={this.props.color}>{this.props.name}</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction FunctionComponent(props) {\r\n  return (\r\n    <div className="border">\r\n      FunctionComponent\r\n      <p>{props.name}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst jsx = (\r\n  <div className="border">\r\n    <p>xx</p>\r\n    <a href=" ">xxx</a>\r\n    <FunctionComponent name="\u51fd\u6570\u7ec4\u4ef6" />\r\n    <ClassComponent name="\u7c7b\u7ec4\u4ef6" color="red" />\r\n  </div>\r\n);\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u8fd9\u4e9b\u7c7b\u522b\u6700\u7ec8\u90fd\u4f1a\u88ab\u8f6c\u5316\u6210",(0,c.jsx)(n.code,{children:"React.createElement"}),"\u8fd9\u79cd\u5f62\u5f0f"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"React.createElement"}),"\u5176\u88ab\u8c03\u7528\u65f6\u4f1a\u4f20\u2f0a\u6807\u7b7e\u7c7b\u578b",(0,c.jsx)(n.code,{children:"type"}),"\uff0c\u6807\u7b7e\u5c5e\u6027",(0,c.jsx)(n.code,{children:"props"}),"\u53ca\u82e5\u5e72\u5b50\u5143\u7d20",(0,c.jsx)(n.code,{children:"children"}),"\uff0c\u4f5c\u7528\u662f\u751f\u6210\u4e00\u4e2a\u865a\u62df",(0,c.jsx)(n.code,{children:"Dom"}),"\u5bf9\u8c61\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:'function createElement(type, config, ...children) {\r\n  if (config) {\r\n    delete config.__self;\r\n    delete config.__source;\r\n  }\r\n  // ! \u6e90\u7801\u4e2d\u505a\u4e86\u8be6\u7ec6\u5904\u7406\uff0c\u2f50\u5982\u8fc7\u6ee4\u6389key\u3001ref\u7b49\r\n  const props = {\r\n    ...config,\r\n    children: children.map((child) =>\r\n      typeof child === "object" ? child : createTextNode(child)\r\n    ),\r\n  };\r\n  return {\r\n    type,\r\n    props,\r\n  };\r\n}\r\nfunction createTextNode(text) {\r\n  return {\r\n    type: TEXT,\r\n    props: {\r\n      children: [],\r\n      nodeValue: text,\r\n    },\r\n  };\r\n}\r\nexport default {\r\n  createElement,\r\n};\n'})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"createElement"}),"\u4f1a\u6839\u636e\u4f20\u5165\u7684\u8282\u70b9\u4fe1\u606f\u8fdb\u884c\u4e00\u4e2a\u5224\u65ad\uff1a"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u5982\u679c\u662f\u539f\u751f\u6807\u7b7e\u8282\u70b9\uff0c type \u662f\u5b57\u7b26\u4e32\uff0c\u5982 div\u3001span"}),"\n",(0,c.jsx)(n.li,{children:"\u5982\u679c\u662f\u6587\u672c\u8282\u70b9\uff0c type \u5c31\u6ca1\u6709\uff0c\u8fd9\u91cc\u662f TEXT"}),"\n",(0,c.jsx)(n.li,{children:"\u5982\u679c\u662f\u51fd\u6570\u7ec4\u4ef6\uff0ctype \u662f\u51fd\u6570\u540d"}),"\n",(0,c.jsx)(n.li,{children:"\u5982\u679c\u662f\u7c7b\u7ec4\u4ef6\uff0ctype \u662f\u7c7b\u540d"}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["\u865a\u62df",(0,c.jsx)(n.code,{children:"DOM"}),"\u4f1a\u901a\u8fc7",(0,c.jsx)(n.code,{children:"ReactDOM.render"}),"\u8fdb\u884c\u6e32\u67d3\u6210\u771f\u5b9e",(0,c.jsx)(n.code,{children:"DOM"}),"\uff0c\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-jsx",children:"ReactDOM.render(element, container[, callback])\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u5f53\u9996\u6b21\u8c03\u7528\u65f6\uff0c\u5bb9\u5668\u8282\u70b9\u91cc\u7684\u6240\u6709 ",(0,c.jsx)(n.code,{children:"DOM"})," \u5143\u7d20\u90fd\u4f1a\u88ab\u66ff\u6362\uff0c\u540e\u7eed\u7684\u8c03\u7528\u5219\u4f1a\u4f7f\u7528 ",(0,c.jsx)(n.code,{children:"React"})," \u7684 ",(0,c.jsx)(n.code,{children:"diff"}),"\u7b97\u6cd5\u8fdb\u884c\u9ad8\u6548\u7684\u66f4\u65b0"]}),"\n",(0,c.jsxs)(n.p,{children:["\u5982\u679c\u63d0\u4f9b\u4e86\u53ef\u9009\u7684\u56de\u8c03\u51fd\u6570",(0,c.jsx)(n.code,{children:"callback"}),"\uff0c\u8be5\u56de\u8c03\u5c06\u5728\u7ec4\u4ef6\u88ab\u6e32\u67d3\u6216\u66f4\u65b0\u4e4b\u540e\u88ab\u6267\u884c"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"render"}),"\u5927\u81f4\u5b9e\u73b0\u65b9\u6cd5\u5982\u4e0b\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:'function render(vnode, container) {\r\n  console.log("vnode", vnode); // \u865a\u62dfDOM\u5bf9\u8c61\r\n  // vnode _> node\r\n  const node = createNode(vnode, container);\r\n  container.appendChild(node);\r\n}\r\n\r\n// \u521b\u5efa\u771f\u5b9eDOM\u8282\u70b9\r\nfunction createNode(vnode, parentNode) {\r\n  let node = null;\r\n  const { type, props } = vnode;\r\n  if (type === TEXT) {\r\n    node = document.createTextNode("");\r\n  } else if (typeof type === "string") {\r\n    node = document.createElement(type);\r\n  } else if (typeof type === "function") {\r\n    node = type.isReactComponent\r\n      ? updateClassComponent(vnode, parentNode)\r\n      : updateFunctionComponent(vnode, parentNode);\r\n  } else {\r\n    node = document.createDocumentFragment();\r\n  }\r\n  reconcileChildren(props.children, node);\r\n  updateNode(node, props);\r\n  return node;\r\n}\r\n\r\n// \u904d\u5386\u4e0b\u5b50vnode\uff0c\u7136\u540e\u628a\u5b50vnode->\u771f\u5b9eDOM\u8282\u70b9\uff0c\u518d\u63d2\u5165\u7236node\u4e2d\r\nfunction reconcileChildren(children, node) {\r\n  for (let i = 0; i < children.length; i++) {\r\n    let child = children[i];\r\n    if (Array.isArray(child)) {\r\n      for (let j = 0; j < child.length; j++) {\r\n        render(child[j], node);\r\n      }\r\n    } else {\r\n      render(child, node);\r\n    }\r\n  }\r\n}\r\nfunction updateNode(node, nextVal) {\r\n  Object.keys(nextVal)\r\n    .filter((k) => k !== "children")\r\n    .forEach((k) => {\r\n      if (k.slice(0, 2) === "on") {\r\n        let eventName = k.slice(2).toLocaleLowerCase();\r\n        node.addEventListener(eventName, nextVal[k]);\r\n      } else {\r\n        node[k] = nextVal[k];\r\n      }\r\n    });\r\n}\r\n\r\n// \u8fd4\u56de\u771f\u5b9edom\u8282\u70b9\r\n// \u6267\u884c\u51fd\u6570\r\nfunction updateFunctionComponent(vnode, parentNode) {\r\n  const { type, props } = vnode;\r\n  let vvnode = type(props);\r\n  const node = createNode(vvnode, parentNode);\r\n  return node;\r\n}\r\n\r\n// \u8fd4\u56de\u771f\u5b9edom\u8282\u70b9\r\n// \u5148\u5b9e\u4f8b\u5316\uff0c\u518d\u6267\u884crender\u51fd\u6570\r\nfunction updateClassComponent(vnode, parentNode) {\r\n  const { type, props } = vnode;\r\n  let cmp = new type(props);\r\n  const vvnode = cmp.render();\r\n  const node = createNode(vvnode, parentNode);\r\n  return node;\r\n}\r\nexport default {\r\n  render,\r\n};\n'})}),"\n",(0,c.jsx)(n.h2,{id:"\u4e09\u603b\u7ed3",children:"\u4e09\u3001\u603b\u7ed3"}),"\n",(0,c.jsxs)(n.p,{children:["\u5728",(0,c.jsx)(n.code,{children:"react"}),"\u6e90\u7801\u4e2d\uff0c\u865a\u62df",(0,c.jsx)(n.code,{children:"Dom"}),"\u8f6c\u5316\u6210\u771f\u5b9e",(0,c.jsx)(n.code,{children:"Dom"}),"\u6574\u4f53\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{src:"https://static.vue-js.com/28824fa0-f00a-11eb-ab90-d9ae814b240d.png",alt:""})}),"\n",(0,c.jsx)(n.p,{children:"\u5176\u6e32\u67d3\u6d41\u7a0b\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u4f7f\u7528 React.createElement \u6216 JSX \u7f16\u5199 React \u7ec4\u4ef6\uff0c\u5b9e\u9645\u4e0a\u6240\u6709\u7684 JSX \u4ee3\u7801\u6700\u540e\u90fd\u4f1a\u8f6c\u6362\u6210 React.createElement(...) \uff0cBabel \u5e2e\u52a9\u6211\u4eec\u5b8c\u6210\u4e86\u8fd9\u4e2a\u8f6c\u6362\u7684\u8fc7\u7a0b\u3002"}),"\n",(0,c.jsx)(n.li,{children:"createElement \u51fd\u6570\u5bf9 key \u548c ref \u7b49\u7279\u6b8a\u7684 props \u8fdb\u884c\u5904\u7406\uff0c\u5e76\u83b7\u53d6 defaultProps \u5bf9\u9ed8\u8ba4 props \u8fdb\u884c\u8d4b\u503c\uff0c\u5e76\u4e14\u5bf9\u4f20\u5165\u7684\u5b69\u5b50\u8282\u70b9\u8fdb\u884c\u5904\u7406\uff0c\u6700\u7ec8\u6784\u9020\u6210\u4e00\u4e2a\u865a\u62df DOM \u5bf9\u8c61"}),"\n",(0,c.jsx)(n.li,{children:"ReactDOM.render \u5c06\u751f\u6210\u597d\u7684\u865a\u62df DOM \u6e32\u67d3\u5230\u6307\u5b9a\u5bb9\u5668\u4e0a\uff0c\u5176\u4e2d\u91c7\u7528\u4e86\u6279\u5904\u7406\u3001\u4e8b\u52a1\u7b49\u673a\u5236\u5e76\u4e14\u5bf9\u7279\u5b9a\u6d4f\u89c8\u5668\u8fdb\u884c\u4e86\u6027\u80fd\u4f18\u5316\uff0c\u6700\u7ec8\u8f6c\u6362\u4e3a\u771f\u5b9e DOM"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"\u53c2\u8003\u6587\u732e",children:"\u53c2\u8003\u6587\u732e"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://bbs.huaweicloud.com/blogs/265503",children:"https://bbs.huaweicloud.com/blogs/265503"}),")"]}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://huang-qing.github.io/react/2019/05/29/React-VirDom/",children:"https://huang-qing.github.io/react/2019/05/29/React-VirDom/"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://segmentfault.com/a/1190000018891454",children:"https://segmentfault.com/a/1190000018891454"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>l});var c=r(96540);const d={},t=c.createContext(d);function o(e){const n=c.useContext(t);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:o(e.components),c.createElement(t.Provider,{value:n},e.children)}}}]);