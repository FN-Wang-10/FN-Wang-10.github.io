"use strict";(self.webpackChunkfn_wang_10_github_io=self.webpackChunkfn_wang_10_github_io||[]).push([[26746],{62939:(n,r,e)=>{e.r(r),e.d(r,{assets:()=>c,contentTitle:()=>p,default:()=>a,frontMatter:()=>s,metadata:()=>u,toc:()=>i});var t=e(74848),o=e(28453);const s={},p=void 0,u={id:"Vue3/vue3\u6587\u6863/\u57fa\u7840\u8bed\u6cd5",title:"\u57fa\u7840\u8bed\u6cd5",description:"setup",source:"@site/docs/Vue3/vue3\u6587\u6863/\u57fa\u7840\u8bed\u6cd5.md",sourceDirName:"Vue3/vue3\u6587\u6863",slug:"/Vue3/vue3\u6587\u6863/\u57fa\u7840\u8bed\u6cd5",permalink:"/docs/Vue3/vue3\u6587\u6863/\u57fa\u7840\u8bed\u6cd5",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"vue3Sidebar",previous:{title:"vuex",permalink:"/docs/Vue3/vue3\u6587\u6863/vuex"},next:{title:"\u603b\u7ed3",permalink:"/docs/Vue3/vue3\u6587\u6863/\u603b\u7ed3"}},c={},i=[{value:"setup",id:"setup",level:2},{value:"setupToDoLost",id:"setuptodolost",level:2},{value:"\u751f\u547d\u5468\u671f",id:"\u751f\u547d\u5468\u671f",level:2},{value:"watch",id:"watch",level:2},{value:"computed",id:"computed",level:2},{value:"components \u7ec4\u4ef6\u4f20\u53c2 props",id:"components-\u7ec4\u4ef6\u4f20\u53c2-props",level:2},{value:"reactive",id:"reactive",level:2},{value:"provide inject \u4f9d\u8d56\u6ce8\u5165",id:"provide-inject-\u4f9d\u8d56\u6ce8\u5165",level:2}];function l(n){const r={br:"br",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h2,{id:"setup",children:"setup"}),"\n",(0,t.jsxs)(r.p,{children:["setup \u5c31\u662f\u7ec4\u5408 api(composition Api)\u7684\u5165\u53e3",(0,t.jsx)(r.br,{}),"\n","setup \u540c\u65f6\u4e5f\u662f\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\uff0c\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u662f\u6700\u65e9\u6267\u884c\u7684",(0,t.jsx)(r.br,{}),"\n","setup \u91cc\u9762\u662f\u53d6\u4e0d\u5230 this \u7684\uff08\u8def\u7531\u4e2d\u7684 BeforeRouterEnter \u4e5f\u662f\u53d6\u4e0d\u5230 this \u7684\uff09"]}),"\n",(0,t.jsxs)(r.p,{children:["\u5982\u679c\u4e00\u4e2a\u53d8\u91cf\u9700\u8981\u6709\u54cd\u5e94\u5f0f\uff0c\u5c31\u9700\u8981\u7528\u5230 ref",(0,t.jsx)(r.br,{}),"\n","\u4f7f\u7528\u4e86 ref \u4e4b\u540e\u7684 count \u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u590d\u6742\u7c7b\u578b\uff09\uff0c\u5e76\u4e14\u4e0b\u9762\u6709\u4e00\u4e2a value \u5c5e\u6027\u662f 5"]}),"\n",(0,t.jsx)(r.p,{children:"setup \u91cc\u9762\u5b9a\u4e49\u7684\u5185\u5bb9\uff0c\u60f3\u5728\u4e0a\u9762\u6a21\u677f\u4e2d\u4f7f\u7528\uff0c\u9700\u8981 return"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",children:'<template>\r\n  <div>\r\n    <h2>\u7ec4\u5408api</h2>\r\n    <p>{{ count }}</p>\r\n    <button @click="add">\u70b9\u51fb</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// ref\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u6267\u884c\u4e4b\u540e\u4f1a\u6307\u5411\u4e00\u4e2a\u5185\u5b58\uff0c\u91cc\u9762\u53ef\u4ee5\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\r\nimport {ref} from "vue";\r\nexport default {\r\n    // setup\u5c31\u662f\u7ec4\u5408api(composition Api)\u7684\u5165\u53e3\r\n    // setup\u540c\u65f6\u4e5f\u662f\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\uff0c\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u662f\u6700\u65e9\u6267\u884c\u7684\r\n    // setup\u91cc\u9762\u662f\u53d6\u4e0d\u5230this\u7684\uff08\u8def\u7531\u4e2d\u7684BeforeRouterEnter\u4e5f\u662f\u53d6\u4e0d\u5230this\u7684\uff09\r\n    setup(){\r\n        // console.log(123);\r\n        // console.log(this);//undefined setup\u91cc\u9762\u662f\u53d6\u4e0d\u5230this\u7684\r\n\r\n        // \u5982\u679c\u4e00\u4e2a\u53d8\u91cf\u9700\u8981\u6709\u54cd\u5e94\u5f0f\uff0c\u5c31\u9700\u8981\u7528\u5230ref\r\n        // \u4f7f\u7528\u4e86ref\u4e4b\u540e\u7684count\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u590d\u6742\u7c7b\u578b\uff09\uff0c\u5e76\u4e14\u4e0b\u9762\u6709\u4e00\u4e2avalue\u5c5e\u6027\u662f5\r\n        const count=ref(5);\r\n        const add=()=>{\r\n            // count++;//\u4e0d\u884c\u7684\r\n            // \u4f7f\u7528\u4e86ref\u4e4b\u540e\uff0ccount\u5c31\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u91cc\u9762\u6709\u4e00\u4e2avalue\u5c5e\u6027\uff0c\u5c31\u662f5\r\n            // console.log(count);\r\n            count.value++;\r\n\r\n        };\r\n\r\n        // setup\u91cc\u9762\u5b9a\u4e49\u7684\u5185\u5bb9\uff0c\u60f3\u5728\u4e0a\u9762\u6a21\u677f\u4e2d\u4f7f\u7528\uff0c\u9700\u8981return\r\n        return {\r\n            count,\r\n            add,\r\n        };\r\n    },\r\n\r\n    // setup\u4f1a\u5148\u6267\u884c\uff0c\u5b83\u4f1a\u5c06\u91cc\u9762\u7684\u4ee3\u7801\u7ffb\u8bd1\u6210\u4e0b\u9762\u7684\u6837\u5b50\uff0c\u76f8\u5f53\u4e8e\u6211\u4eec\u6267\u884c\u4e86\u4e0b\u9762\u7684\u4ee3\u7801\r\n    // data(){\r\n    //     return {\r\n    //         count:5\r\n    //     }\r\n    // },\r\n    // methods:{\r\n    //     add(){\r\n    //         this.count++;\r\n    //     }\r\n    // }\r\n}\r\n<\/script>\r\n\n'})}),"\n",(0,t.jsx)(r.h2,{id:"setuptodolost",children:"setupToDoLost"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",children:'<template>\r\n  <input type="text" v-model="textValue" />\r\n  <button @click="add">\u6dfb\u52a0</button>\r\n\r\n  <hr />\r\n\r\n  <ul>\r\n    <li v-for="item in list" :key="item.id">\r\n      {{ item.name }}-<button @click="remove(item.id)">\u5220\u9664</button>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from "vue";\r\nexport default {\r\n  setup() {\r\n    const [list, remove] = removeModule();// \u89e3\u6784\r\n    const [textValue, add] = addModule(list);// \u89e3\u6784\r\n\r\n    // const textValue = ref("");\r\n    // const add = () => {\r\n    //   list.value.push({\r\n    //     id: new Date().getTime(),\r\n    //     name: textValue.value,\r\n    //   });\r\n    //   textValue.value = "";\r\n    // };\r\n\r\n    // const list = ref([\r\n    //   {\r\n    //     id: 1,\r\n    //     name: "zhangsan",\r\n    //   },\r\n    //   {\r\n    //     id: 2,\r\n    //     name: "lisi",\r\n    //   },\r\n    // ]);\r\n    // const remove = (id) => {\r\n    //   list.value = list.value.filter((item) => item.id !== id);\r\n    // };\r\n\r\n    return {\r\n      textValue,\r\n      list,\r\n      add,\r\n      remove,\r\n    };\r\n  },\r\n};\r\n\r\n// \u5220\u9664\u529f\u80fd\r\nconst removeModule = () => {\r\n  const list = ref([\r\n    {\r\n      id: 1,\r\n      name: "zhangsan",\r\n    },\r\n    {\r\n      id: 2,\r\n      name: "lisi",\r\n    },\r\n  ]);\r\n  const remove = (id) => {\r\n    list.value = list.value.filter((item) => item.id !== id);\r\n  };\r\n  // \u5c06\u91cc\u9762\u7684\u4e24\u4e2a\u4e1c\u897f\u8fd4\u56de\r\n  return [list, remove];\r\n};\r\n// \u6dfb\u52a0\u529f\u80fd\r\nconst addModule = (list) => {\r\n  const textValue = ref("");\r\n  const add = () => {\r\n    list.value.push({\r\n      id: new Date().getTime(),\r\n      name: textValue.value,\r\n    });\r\n    textValue.value = "";\r\n  };\r\n  // \u5c06\u91cc\u9762\u7684\u4e24\u4e2a\u4e1c\u897f\u8fd4\u56de\r\n  return [textValue, add];\r\n};\r\n<\/script>\r\n\n'})}),"\n",(0,t.jsx)(r.h2,{id:"\u751f\u547d\u5468\u671f",children:"\u751f\u547d\u5468\u671f"}),"\n",(0,t.jsxs)(r.p,{children:["\u751f\u547d\u5468\u671f\u6dfb\u52a0 on, \u5220\u9664\u4e86 beforeCreate,created \u4e24\u4e2a\u751f\u547d\u5468\u671f\uff0c\u5378\u8f7d\u9636\u6bb5\u6539\u4e3a onBeforeUnmount,onUnmounted",(0,t.jsx)(r.br,{}),"\n","\u751f\u547d\u5468\u671f\u94a9\u5b50\u90fd\u662f\u4ece vue \u4e2d\u89e3\u6784"]}),"\n",(0,t.jsxs)(r.p,{children:["vue3 \u4e2d\u6240\u6709\u7684\u751f\u547d\u5468\u671f\u90fd\u9700\u8981\u4ece vue \u4e2d\u89e3\u6784",(0,t.jsx)(r.br,{}),"\n","onMounted \u662f\u4e00\u4e2a\u751f\u547d\u5468\u671f\uff0c\u5b83\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u76f4\u63a5\u6267\u884c\uff0c\u8fd9\u4e9b\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u56de\u8c03\uff0c\u5f53\u94a9\u5b50\u88ab\u7ec4\u4ef6\u8c03\u7528\u65f6\uff0c\u8be5\u56de\u8c03\u5c06\u88ab\u6267\u884c\u3002"]}),"\n",(0,t.jsxs)(r.p,{children:["vue3 \u4e2d created \u548c BeforeCreated \u8fd9\u4e24\u4e2a\u751f\u547d\u5468\u671f\u4e0d\u5b58\u5728\u4e86",(0,t.jsx)(r.br,{}),"\n","\u53ef\u4ee5\u76f4\u63a5\u5199\u5728 setup \u91cc\u9762\uff0c\u5c31\u53ef\u4ee5\u8868\u793a\u521b\u5efa\u9636\u6bb5",(0,t.jsx)(r.br,{}),"\n","\u56e0\u4e3a setup \u662f\u56f4\u7ed5 beforeCreate \u548c created \u751f\u547d\u5468\u671f\u94a9\u5b50\u8fd0\u884c\u7684\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u663e\u5f0f\u5730\u5b9a\u4e49\u5b83\u4eec\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5728\u8fd9\u4e9b\u94a9\u5b50\u4e2d\u7f16\u5199\u7684\u4efb\u4f55\u4ee3\u7801\u90fd\u5e94\u8be5\u76f4\u63a5\u5728 setup \u51fd\u6570\u4e2d\u7f16\u5199\u3002"]}),"\n",(0,t.jsxs)(r.p,{children:["\u540c\u4e00\u4e2a\u751f\u547d\u5468\u671f\u53ef\u4ee5\u5199\u591a\u4e2a",(0,t.jsx)(r.br,{}),"\n","\u6bd4\u5982\u8bf4\u6211\u73b0\u5728\u6709\u4e09\u4e2a\u529f\u80fd\uff0c\u6bcf\u4e00\u4e2a\u529f\u80fd\u53ef\u80fd\u90fd\u6709\u81ea\u5df1\u7684\u6302\u8f7d\u5b8c\u7684\u65f6\u5019\u8981\u505a\u7684\u4e8b\u60c5",(0,t.jsx)(r.br,{}),"\n","\u8c03\u7528\u591a\u6b21\u5c31\u53ef\u4ee5\u5206\u5f00\u5199\u5728\u4e0d\u540c\u7684\u529f\u80fd\u91cc\u9762"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",children:'<template>\r\n  <h3>\u7ec4\u5408api-\u751f\u547d\u5468\u671f</h3>\r\n</template>\r\n\r\n<script>\r\n// vue3\u4e2d\u6240\u6709\u7684\u751f\u547d\u5468\u671f\u90fd\u9700\u8981\u4ecevue\u4e2d\u89e3\u6784\r\n// onMounted\u662f\u4e00\u4e2a\u751f\u547d\u5468\u671f\uff0c\u5b83\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u76f4\u63a5\u6267\u884c\uff0c\u8fd9\u4e9b\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u56de\u8c03\uff0c\u5f53\u94a9\u5b50\u88ab\u7ec4\u4ef6\u8c03\u7528\u65f6\uff0c\u8be5\u56de\u8c03\u5c06\u88ab\u6267\u884c\u3002\r\nimport { onMounted, onBeforeUnmount } from "vue";\r\nexport default {\r\n  setup() {\r\n    // console.log("created");\r\n    // vue3\u4e2d created\u548cBeforeCreated \u8fd9\u4e24\u4e2a\u751f\u547d\u5468\u671f\u4e0d\u5b58\u5728\u4e86\r\n    // \u53ef\u4ee5\u76f4\u63a5\u5199\u5728setup\u91cc\u9762\uff0c\u5c31\u53ef\u4ee5\u8868\u793a\u521b\u5efa\u9636\u6bb5\r\n    // \u56e0\u4e3a setup \u662f\u56f4\u7ed5 beforeCreate \u548c created \u751f\u547d\u5468\u671f\u94a9\u5b50\u8fd0\u884c\u7684\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u663e\u5f0f\u5730\u5b9a\u4e49\u5b83\u4eec\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5728\u8fd9\u4e9b\u94a9\u5b50\u4e2d\u7f16\u5199\u7684\u4efb\u4f55\u4ee3\u7801\u90fd\u5e94\u8be5\u76f4\u63a5\u5728 setup \u51fd\u6570\u4e2d\u7f16\u5199\u3002\r\n\r\n    // \u540c\u4e00\u4e2a\u751f\u547d\u5468\u671f\u53ef\u4ee5\u5199\u591a\u4e2a\r\n    // \u6bd4\u5982\u8bf4\u6211\u73b0\u5728\u6709\u4e09\u4e2a\u529f\u80fd\uff0c\u6bcf\u4e00\u4e2a\u529f\u80fd\u53ef\u80fd\u90fd\u6709\u81ea\u5df1\u7684\u6302\u8f7d\u5b8c\u7684\u65f6\u5019\u8981\u505a\u7684\u4e8b\u60c5\r\n    // \u8c03\u7528\u591a\u6b21\u5c31\u53ef\u4ee5\u5206\u5f00\u5199\u5728\u4e0d\u540c\u7684\u529f\u80fd\u91cc\u9762\r\n    onMounted(() => {\r\n      console.log("onMounted");\r\n    });\r\n    onMounted(() => {\r\n      console.log("onMounted2");\r\n    });\r\n    onBeforeUnmount(() => {\r\n      console.log("onBeforeUnmount");\r\n    });\r\n  },\r\n};\r\n<\/script>\r\n\n'})}),"\n",(0,t.jsx)(r.h2,{id:"watch",children:"watch"}),"\n",(0,t.jsxs)(r.p,{children:["watch \u73b0\u5728\u4e5f\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4e5f\u662f\u76f4\u63a5\u8c03\u7528",(0,t.jsx)(r.br,{}),"\n","watch \u4e5f\u53ef\u4ee5\u591a\u6b21\u8c03\u7528"]}),"\n",(0,t.jsx)(r.p,{children:"\u53ef\u4ee5\u63a5\u6536\u4e09\u4e2a\u53c2\u6570"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"\u6211\u4eec\u8981\u76d1\u542c\u7684\u503c"}),"\n",(0,t.jsx)(r.li,{children:"\u56de\u8c03\u51fd\u6570\uff08\u53ef\u4ee5\u6709\u4e24\u4e2a\u53c2\u6570 val,oldVal\uff09"}),"\n",(0,t.jsx)(r.li,{children:"\u63cf\u8ff0\u5bf9\u8c61\uff0cdeep immediate"}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",children:'<template>\r\n    <h3>\u7ec4\u5408api-watch</h3>\r\n    <p>{{ count }}</p>\r\n    <button @click="fn">\u70b9\u51fb</button>\r\n</template>\r\n\r\n<script>\r\n// watch\u73b0\u5728\u4e5f\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4e5f\u662f\u76f4\u63a5\u8c03\u7528\r\nimport {ref,watch} from "vue";\r\nexport default {\r\n    setup(){\r\n        const count=ref(100);\r\n        const fn=()=>{\r\n            count.value++;\r\n        };\r\n\r\n        // watch\u4e5f\u53ef\u4ee5\u591a\u6b21\u8c03\u7528\r\n        // \u53ef\u4ee5\u63a5\u6536\u4e09\u4e2a\u53c2\u6570\r\n        // 1.\u6211\u4eec\u8981\u76d1\u542c\u7684\u503c\r\n        // 2.\u56de\u8c03\u51fd\u6570\uff08\u53ef\u4ee5\u6709\u4e24\u4e2a\u53c2\u6570val,oldVal\uff09\r\n        // 3.\u63cf\u8ff0\u5bf9\u8c61\uff0cdeep immediate\r\n        watch(count,(val,oldVal)=>{\r\n            console.log(val);\r\n            console.log(oldVal);\r\n            console.log(123);\r\n        },\r\n        {\r\n            // \u6df1\u5ea6\u7684\u76d1\u542c\uff0c\u53ef\u4ee5\u53bb\u76d1\u542c\u5bf9\u8c61\u548c\u6570\u7ec4\r\n            deep:true,\r\n            // \u8fdb\u5165\u9875\u9762\u4e4b\u540e\u5148\u505a\u4e00\u6b21\u76d1\u542c\r\n            immediate:true,\r\n        }\r\n        );\r\n        return {\r\n            count,\r\n            fn\r\n        }\r\n    }\r\n}\r\n<\/script>\n'})}),"\n",(0,t.jsx)(r.h2,{id:"computed",children:"computed"}),"\n",(0,t.jsx)(r.p,{children:"\u8ba1\u7b97\u5c5e\u6027 computed \u4e5f\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4e5f\u9700\u8981\u4ece vue \u91cc\u9762\u89e3\u6784"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",children:'<template>\r\n    <h3>\u7ec4\u5408api-computed</h3>\r\n    <p>{{ count }}-<button @click="fn">\u70b9\u51fb</button></p>\r\n    <p>{{ doubleCount }}</p>\r\n\r\n    <hr>\r\n\r\n    <p>{{addArr}}</p>\r\n</template>\r\n\r\n<script>\r\n// \u8ba1\u7b97\u5c5e\u6027computed\u4e5f\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4e5f\u9700\u8981\u4ecevue\u91cc\u9762\u89e3\u6784\r\nimport {ref,computed} from "vue";\r\nexport default {\r\n    setup(){\r\n        const count=ref(10);\r\n        const fn=()=>{\r\n            count.value++;\r\n        };\r\n        const doubleCount=computed(()=>{//\u8c03\u7528computed\uff0c\u91cc\u9762\u662f\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u9700\u8981\u6709\u8fd4\u56de\u503c\r\n            return count.value*2;\r\n        })\r\n\r\n        const arr=ref([1,2,3,4,5,6]);\r\n        const addArr=computed(()=>arr.value.filter(item=>item%2));//\u8c03\u7528computed\uff0c\u91cc\u9762\u662f\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u9700\u8981\u6709\u8fd4\u56de\u503c\r\n        return {\r\n            count,\r\n            fn,\r\n            doubleCount,\r\n            addArr\r\n        }\r\n    }\r\n}\r\n<\/script>\n'})}),"\n",(0,t.jsx)(r.h2,{id:"components-\u7ec4\u4ef6\u4f20\u53c2-props",children:"components \u7ec4\u4ef6\u4f20\u53c2 props"}),"\n",(0,t.jsxs)(r.p,{children:["setup \u91cc\u9762\u662f\u4e0d\u80fd\u62ff\u5230 data,computed,methods,watch,refs \u7b49",(0,t.jsx)(r.br,{}),"\n","setup \u7684\u6267\u884c\u65f6\u673a\u6bd4\u8f83\u65e9\uff0csetup \u91cc\u9762\u4e0d\u80fd\u4f7f\u7528 this\uff0c\u6ca1\u6709\u53c2\u6570\u53ef\u4ee5\u63a5\u6536\u8fd9\u4e9b\u9009\u9879",(0,t.jsx)(r.br,{}),"\n","\u5982\u679c\u4f7f\u7528\u4e86 setup,\u5c31\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528\u4f20\u7edf\u7684\u9009\u9879 api \u4e86",(0,t.jsx)(r.br,{}),"\n","components \u548c props \u9009\u9879\u662f\u4e0d\u80fd\u5199\u5230 setup \u91cc\u9762\u7684"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",children:'<template>\r\n    <h3>components\u7ec4\u4ef6-\u7ec4\u5408api-setup\u53c2\u6570</h3>\r\n    <Son msg="hello" @fn="fn"/>\r\n</template>\r\n\r\n<script>\r\nimport Son from "./07-son.vue";\r\nexport default {\r\n    setup(){\r\n        // setup\u91cc\u9762\u662f\u4e0d\u80fd\u62ff\u5230data,computed,methods,watch,refs\u7b49\r\n        // setup\u7684\u6267\u884c\u65f6\u673a\u6bd4\u8f83\u65e9\uff0csetup\u91cc\u9762\u4e0d\u80fd\u4f7f\u7528this\uff0c\u6ca1\u6709\u53c2\u6570\u53ef\u4ee5\u63a5\u6536\u8fd9\u4e9b\u9009\u9879\r\n        // \u5982\u679c\u4f7f\u7528\u4e86setup,\u5c31\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528\u4f20\u7edf\u7684\u9009\u9879api\u4e86\r\n        const fn=()=>{\r\n            console.log("father");\r\n        };\r\n        return {\r\n            fn,\r\n        }\r\n    },\r\n    // components\u548cprops\u9009\u9879\u662f\u4e0d\u80fd\u5199\u5230setup\u91cc\u9762\u7684\r\n    components:{\r\n        Son,\r\n    }\r\n}\r\n<\/script>\n'})}),"\n",(0,t.jsxs)(r.p,{children:["props \u8981\u5199\u5728 setup \u5916\u9762(\u548c setup \u540c\u7ea7)",(0,t.jsx)(r.br,{}),"\n","\u5728 setup \u91cc\u9762\u5982\u679c\u60f3\u8981\u4f7f\u7528 props \u7684\u503c\uff0c\u7531\u4e8e setup \u91cc\u9762\u6ca1\u6709 this,\u6240\u4ee5 setup \u9700\u8981\u63a5\u53d7\u7b2c\u4e00\u4e2a\u53c2\u6570 props",(0,t.jsx)(r.br,{}),"\n","\u7b2c\u4e00\u4e2a\u53c2\u6570 props \u662f\u4e0d\u80fd\u76f4\u63a5\u89e3\u6784\u7684\uff0c\u4ed6\u4f1a\u6d88\u9664\u54cd\u5e94\u5f0f",(0,t.jsx)(r.br,{}),"\n","\u5982\u679c\u771f\u7684\u9700\u8981\u89e3\u6784\uff0c\u9700\u8981\u5728 setup \u91cc\u9762\uff0c\u4f7f\u7528 toRefs \u65b9\u6cd5\u8fdb\u884c\u89e3\u6784"]}),"\n",(0,t.jsxs)(r.p,{children:["setup \u8fd8\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u53c2\u6570 context \u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5bf9\u8c61\u91cc\u9762\u6709 attrs,emit,expose,slots",(0,t.jsx)(r.br,{}),"\n","\u7b2c\u4e8c\u4e2a\u53c2\u6570\u56e0\u4e3a\u662f\u666e\u901a\u5bf9\u8c61\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u89e3\u6784"]}),"\n",(0,t.jsxs)(r.p,{children:["setup \u53ef\u4ee5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570 props \u548c context\uff0cprops \u662f\u4e0d\u80fd\u88ab\u89e3\u6784\u7684\uff0c\u56e0\u4e3a props \u662f\u54cd\u5e94\u5f0f\u7684\uff0c\u4f60\u4e0d\u80fd\u4f7f\u7528 ES6 \u89e3\u6784\uff0c\u5b83\u4f1a\u6d88\u9664 prop \u7684\u54cd\u5e94\u6027",(0,t.jsx)(r.br,{}),"\n","\u5982\u679c\u771f\u7684\u9700\u8981\u89e3\u6784\uff0c\u9700\u8981\u5728 setup \u91cc\u9762\uff0c\u4f7f\u7528 toRefs \u65b9\u6cd5\uff08\u6216\u8005 toRef\uff09\u8fdb\u884c\u89e3\u6784 \u770b\u5b98\u7f51"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",children:'<template>\r\n    <div>son\u7ec4\u4ef6 {{ msg }}-{{msg2}}</div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, toRefs, onMounted } from "vue";\r\nexport default {\r\n    // props\u8981\u5199\u5728setup\u5916\u9762(\u548csetup\u540c\u7ea7)\r\n    props:{\r\n        msg:String,\r\n    },\r\n    // \u5728setup\u91cc\u9762\u5982\u679c\u60f3\u8981\u4f7f\u7528props\u7684\u503c\uff0c\u7531\u4e8esetup\u91cc\u9762\u6ca1\u6709this,\u6240\u4ee5setup\u9700\u8981\u63a5\u53d7\u7b2c\u4e00\u4e2a\u53c2\u6570props\r\n    // \u7b2c\u4e00\u4e2a\u53c2\u6570props\u662f\u4e0d\u80fd\u76f4\u63a5\u89e3\u6784\u7684\uff0c\u4ed6\u4f1a\u6d88\u9664\u54cd\u5e94\u5f0f\r\n    // \u5982\u679c\u771f\u7684\u9700\u8981\u89e3\u6784\uff0c\u9700\u8981\u5728setup\u91cc\u9762\uff0c\u4f7f\u7528toRefs\u65b9\u6cd5\u8fdb\u884c\u89e3\u6784\r\n\r\n\r\n    // setup\u8fd8\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u53c2\u6570context\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5bf9\u8c61\u91cc\u9762\u6709attrs,emit,expose,slots\r\n    // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u56e0\u4e3a\u662f\u666e\u901a\u5bf9\u8c61\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u89e3\u6784\r\n    setup(props,{emit}){//setup\u53ef\u4ee5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570props\u548ccontext\uff0cprops\u662f\u4e0d\u80fd\u88ab\u89e3\u6784\u7684\uff0c\u56e0\u4e3a props \u662f\u54cd\u5e94\u5f0f\u7684\uff0c\u4f60\u4e0d\u80fd\u4f7f\u7528 ES6 \u89e3\u6784\uff0c\u5b83\u4f1a\u6d88\u9664 prop \u7684\u54cd\u5e94\u6027\u3002\r\n        const {msg}=toRefs(props);//\u5982\u679c\u771f\u7684\u9700\u8981\u89e3\u6784\uff0c\u9700\u8981\u5728setup\u91cc\u9762\uff0c\u4f7f\u7528toRefs\u65b9\u6cd5\u8fdb\u884c\u89e3\u6784\r\n        // console.log(context);//context\u662f\u4e00\u4e2a\u5bf9\u8c61\r\n\r\n        onMounted(()=>{\r\n            setTimeout(()=>{\r\n                emit("fn");//emit\u5b50\u7ec4\u4ef6\u8c03\u7528\u7236\u7ec4\u4ef6\u4e8b\u4ef6\r\n            },2000)\r\n        })\r\n        const msg2=ref(msg);\r\n        const fn=()=>{\r\n            console.log(msg)\r\n        }\r\n        return {\r\n            msg,\r\n            msg2,\r\n            fn,\r\n        }\r\n    }\r\n}\r\n<\/script>\n'})}),"\n",(0,t.jsx)(r.h2,{id:"reactive",children:"reactive"}),"\n",(0,t.jsxs)(r.p,{children:["reactive \u4e5f\u662f\u7528\u6765\u5b9a\u4e49\u54cd\u5e94\u5f0f\u6570\u636e\uff0c",(0,t.jsx)(r.br,{}),"\n","reactive \u53ef\u4ee5\u7528\u6765\u4e00\u6b21\u6027\u5b9a\u4e49\u591a\u4e2a\u53d8\u91cf",(0,t.jsx)(r.br,{}),"\n","\u4e00\u4e2a\u53d8\u91cf\u7528 ref,\u591a\u4e2a\u53d8\u91cf\u4f7f\u7528 reactive",(0,t.jsx)(r.br,{}),"\n","reactive \u4e5f\u662f\u4e00\u4e2a\u51fd\u6570,\u8c03\u7528\u7684\u65f6\u5019\uff0c\u53c2\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5bf9\u8c61\u91cc\u9762\u5199\u53d8\u91cf"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",children:'<template>\r\n  <h3>\u7ec4\u5408api-reactive</h3>\r\n  <p>{{ data.count }}</p>\r\n  <button @click="fn">\u70b9\u51fb</button>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { reactive } from "vue";\r\nexport default {\r\n  setup() {\r\n    const data = reactive({\r\n      count: 3,\r\n      msg: "hello",\r\n      num: 10,\r\n    });\r\n    const fn=()=>{\r\n      data.count++;\r\n    }\r\n\r\n    return {\r\n        data,\r\n        fn,\r\n    }\r\n  },\r\n};\r\n<\/script>\n'})}),"\n",(0,t.jsx)(r.h2,{id:"provide-inject-\u4f9d\u8d56\u6ce8\u5165",children:"provide inject \u4f9d\u8d56\u6ce8\u5165"}),"\n",(0,t.jsxs)(r.p,{children:["provide \u4e5f\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u9700\u8981\u4ece vue \u4e2d\u89e3\u6784\uff0c\u4f7f\u7528\u65f6\u9700\u8981\u8c03\u7528",(0,t.jsx)(r.br,{}),"\n","vue2 \u4e2d\u7684 provide \u8bed\u6cd5\u548c data \u4e00\u6837\uff0c\u662f\u5bf9\u8c61\uff0cinject \u8bed\u6cd5\u548c props \u4e00\u6837",(0,t.jsx)(r.br,{}),"\n","vue3 \u4e2d provide \u8bed\u6cd5\u662f\u51fd\u6570\uff0c\u8c03\u7528\u65f6 provide \u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f key \u548c value\uff0cinject \u8bed\u6cd5\u4e5f\u662f\u51fd\u6570\uff0c\u8c03\u7528\u662f\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u662f\u7236\u7ec4\u4ef6\u4f20\u8fc7\u6765\u7684 key\uff0c\u7b2c\u4e8c\u4e2a\u662f\u9ed8\u8ba4\u503c",(0,t.jsx)(r.br,{}),"\n","vue2 \u4e2d\u7684\u4f9d\u8d56\u6ce8\u5165\u662f\u6ca1\u6709\u54cd\u5e94\u5f0f\u7684\uff0cvue3 \u4e2d\u7684\u4f9d\u8d56\u6ce8\u5165\u662f\u7531\u54cd\u5e94\u5f0f\u7684\uff08\u524d\u63d0\u6761\u4ef6\u662f\uff0c\u7236\u7ec4\u4ef6\u4f20\u8fc7\u6765\u7684\u503c\u672c\u8eab\u662f\u5177\u6709\u54cd\u5e94\u5f0f\u7684\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u4f7f\u7528 ref \u548c reactive \u5b9a\u4e49\u7684\u53d8\u91cf\uff09"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",children:'<template>\r\n    <h3>\u7ec4\u5408api-provide-inject \u4f9d\u8d56\u6ce8\u5165</h3>\r\n    <button @click="fn">\u70b9\u51fb</button>\r\n    <child />\r\n</template>\r\n\r\n<script>\r\nimport Child from "./10-Child-Inject.vue";\r\n// provide\u4e5f\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u9700\u8981\u4ecevue\u4e2d\u89e3\u6784\uff0c\u4f7f\u7528\u65f6\u9700\u8981\u8c03\u7528\r\nimport {provide,ref} from "vue";\r\nexport default {\r\n    setup(){\r\n        const count =ref(5);\r\n        // vue2\u4e2d\u7684provide\u8bed\u6cd5\u548cdata\u4e00\u6837\uff0c\u662f\u5bf9\u8c61\uff0cinject\u8bed\u6cd5\u548cprops\u4e00\u6837\r\n        // vue3\u4e2dprovide\u8bed\u6cd5\u662f\u51fd\u6570\uff0c\u8c03\u7528\u65f6provide\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662fkey\u548cvalue\uff0cinject\u8bed\u6cd5\u4e5f\u662f\u51fd\u6570\uff0c\u8c03\u7528\u662f\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u662f\u7236\u7ec4\u4ef6\u4f20\u8fc7\u6765\u7684key\uff0c\u7b2c\u4e8c\u4e2a\u662f\u9ed8\u8ba4\u503c\r\n        // vue2\u4e2d\u7684\u4f9d\u8d56\u6ce8\u5165\u662f\u6ca1\u6709\u54cd\u5e94\u5f0f\u7684\uff0cvue3\u4e2d\u7684\u4f9d\u8d56\u6ce8\u5165\u662f\u7531\u54cd\u5e94\u5f0f\u7684\uff08\u524d\u63d0\u6761\u4ef6\u662f\uff0c\u7236\u7ec4\u4ef6\u4f20\u8fc7\u6765\u7684\u503c\u672c\u8eab\u662f\u5177\u6709\u54cd\u5e94\u5f0f\u7684\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u4f7f\u7528ref\u548creactive\u5b9a\u4e49\u7684\u53d8\u91cf\uff09\r\n        provide("count",count);\r\n        const fn=()=>{\r\n            count.value++;\r\n        }\r\n        return {\r\n            fn\r\n        }\r\n    },\r\n    components:{\r\n        Child,\r\n    }\r\n}\r\n<\/script>\n'})}),"\n",(0,t.jsxs)(r.p,{children:["inject \u4e5f\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u9700\u8981\u4ece vue \u4e2d\u7ed3\u6784\uff0c\u7528\u7684\u65f6\u5019\u9700\u8981\u8c03\u7528",(0,t.jsx)(r.br,{}),"\n","inject \u5176\u5b9e\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u7236\u7ec4\u4ef6\u4f20\u8fdb\u6765\u7684 key",(0,t.jsx)(r.br,{}),"\n","\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u9ed8\u8ba4\u503c\uff08\u53ea\u6709\u5f53\u7236\u7ec4\u4ef6\u4e2d\u6ca1\u5199 provide \u65f6\uff0c\u9ed8\u8ba4\u503c\u624d\u4f1a\u751f\u6548\uff09"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",children:'<template>\r\n  <div>child\u7ec4\u4ef6-{{ count }}</div>\r\n</template>\r\n\r\n<script>\r\n// inject\u4e5f\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u9700\u8981\u4ecevue\u4e2d\u7ed3\u6784\uff0c\u7528\u7684\u65f6\u5019\u9700\u8981\u8c03\u7528\r\nimport { inject } from "vue";\r\nexport default {\r\n  setup() {\r\n    // inject\u5176\u5b9e\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u7236\u7ec4\u4ef6\u4f20\u8fdb\u6765\u7684key\r\n    // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u9ed8\u8ba4\u503c\uff08\u53ea\u6709\u5f53\u7236\u7ec4\u4ef6\u4e2d\u6ca1\u5199provide\u65f6\uff0c\u9ed8\u8ba4\u503c\u624d\u4f1a\u751f\u6548\uff09\r\n    const count = inject("count");\r\n    // const count = inject("count",100);\r\n    return {\r\n      count,\r\n    };\r\n  },\r\n};\r\n<\/script>\r\n\n'})})]})}function a(n={}){const{wrapper:r}={...(0,o.R)(),...n.components};return r?(0,t.jsx)(r,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}},28453:(n,r,e)=>{e.d(r,{R:()=>p,x:()=>u});var t=e(96540);const o={},s=t.createContext(o);function p(n){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof n?n(r):{...r,...n}}),[r,n])}function u(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:p(n.components),t.createElement(s.Provider,{value:r},n.children)}}}]);