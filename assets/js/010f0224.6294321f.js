"use strict";(self.webpackChunkfn_wang_10_github_io=self.webpackChunkfn_wang_10_github_io||[]).push([[29979],{57001:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>l,frontMatter:()=>s,metadata:()=>i,toc:()=>h});var t=r(85893),o=r(11151);const s={},c=void 0,i={id:"React/React Router\u6709\u51e0\u79cd\u6a21\u5f0f",title:"React Router\u6709\u51e0\u79cd\u6a21\u5f0f",description:"\u4e00\u3001\u662f\u4ec0\u4e48",source:"@site/docs/React/React Router\u6709\u51e0\u79cd\u6a21\u5f0f.md",sourceDirName:"React",slug:"/React/React Router\u6709\u51e0\u79cd\u6a21\u5f0f",permalink:"/docs/React/React Router\u6709\u51e0\u79cd\u6a21\u5f0f",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"reactSidebar",previous:{title:"React Router",permalink:"/docs/React/React Router"},next:{title:"React \u53d7\u63a7\u7ec4\u4ef6\u548c\u975e\u53d7\u63a7\u7ec4\u4ef6",permalink:"/docs/React/React \u53d7\u63a7\u7ec4\u4ef6\u548c\u975e\u53d7\u63a7\u7ec4\u4ef6"}},a={},h=[{value:"\u4e00\u3001\u662f\u4ec0\u4e48",id:"\u4e00\u662f\u4ec0\u4e48",level:2},{value:"\u4e8c\u3001\u4f7f\u7528",id:"\u4e8c\u4f7f\u7528",level:2},{value:"\u4e09\u3001\u5b9e\u73b0\u539f\u7406",id:"\u4e09\u5b9e\u73b0\u539f\u7406",level:2},{value:"HashRouter",id:"hashrouter",level:2},{value:"Router",id:"router",level:3},{value:"\u53c2\u8003\u6587\u732e",id:"\u53c2\u8003\u6587\u732e",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"\u4e00\u662f\u4ec0\u4e48",children:"\u4e00\u3001\u662f\u4ec0\u4e48"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728\u5355\u9875\u5e94\u7528\u4e2d\uff0c\u4e00\u4e2a",(0,t.jsx)(n.code,{children:"web"}),"\u9879\u76ee\u53ea\u6709\u4e00\u4e2a",(0,t.jsx)(n.code,{children:"html"}),"\u9875\u9762\uff0c\u4e00\u65e6\u9875\u9762\u52a0\u8f7d\u5b8c\u6210\u4e4b\u540e\uff0c\u5c31\u4e0d\u7528\u56e0\u4e3a\u7528\u6237\u7684\u64cd\u4f5c\u800c\u8fdb\u884c\u9875\u9762\u7684\u91cd\u65b0\u52a0\u8f7d\u6216\u8005\u8df3\u8f6c\uff0c\u5176\u7279\u6027\u5982\u4e0b\uff1a"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u6539\u53d8 url \u4e14\u4e0d\u8ba9\u6d4f\u89c8\u5668\u50cf\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u5728\u4e0d\u5237\u65b0\u9875\u9762\u7684\u524d\u63d0\u4e0b\u52a8\u6001\u6539\u53d8\u6d4f\u89c8\u5668\u5730\u5740\u680f\u4e2d\u7684 URL \u5730\u5740"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u5176\u4e2d\u4e3b\u8981\u5206\u6210\u4e86\u4e24\u79cd\u6a21\u5f0f\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["hash \u6a21\u5f0f\uff1a\u5728 url \u540e\u9762\u52a0\u4e0a#\uff0c\u5982",(0,t.jsx)(n.a,{href:"http://127.0.0.1:5500/home/#/page1",children:"http://127.0.0.1:5500/home/#/page1"})]}),"\n",(0,t.jsx)(n.li,{children:"history \u6a21\u5f0f\uff1a\u5141\u8bb8\u64cd\u4f5c\u6d4f\u89c8\u5668\u7684\u66fe\u7ecf\u5728\u6807\u7b7e\u9875\u6216\u8005\u6846\u67b6\u91cc\u8bbf\u95ee\u7684\u4f1a\u8bdd\u5386\u53f2\u8bb0\u5f55"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u4e8c\u4f7f\u7528",children:"\u4e8c\u3001\u4f7f\u7528"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"React Router"}),"\u5bf9\u5e94\u7684",(0,t.jsx)(n.code,{children:"hash"}),"\u6a21\u5f0f\u548c",(0,t.jsx)(n.code,{children:"history"}),"\u6a21\u5f0f\u5bf9\u5e94\u7684\u7ec4\u4ef6\u4e3a\uff1a"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"HashRouter"}),"\n",(0,t.jsx)(n.li,{children:"BrowserRouter"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u4e24\u4e2a\u7ec4\u4ef6\u7684\u4f7f\u7528\u90fd\u5341\u5206\u7684\u7b80\u5355\uff0c\u4f5c\u4e3a\u6700\u9876\u5c42\u7ec4\u4ef6\u5305\u88f9\u5176\u4ed6\u7ec4\u4ef6\uff0c\u5982\u4e0b\u6240\u793a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:'// 1.import { BrowserRouter as Router } from "react-router-dom";\r\n// 2.import { HashRouter as Router } from "react-router-dom";\r\n\r\nimport React from "react";\r\nimport {\r\n  BrowserRouter as Router,\r\n  // HashRouter as Router\r\n  Switch,\r\n  Route,\r\n} from "react-router-dom";\r\nimport Home from "./pages/Home";\r\nimport Login from "./pages/Login";\r\nimport Backend from "./pages/Backend";\r\nimport Admin from "./pages/Admin";\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <Route path="/login" component={Login} />\r\n      <Route path="/backend" component={Backend} />\r\n      <Route path="/admin" component={Admin} />\r\n      <Route path="/" component={Home} />\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u4e09\u5b9e\u73b0\u539f\u7406",children:"\u4e09\u3001\u5b9e\u73b0\u539f\u7406"}),"\n",(0,t.jsxs)(n.p,{children:["\u8def\u7531\u63cf\u8ff0\u4e86 ",(0,t.jsx)(n.code,{children:"URL"})," \u4e0e ",(0,t.jsx)(n.code,{children:"UI "}),"\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u8fd9\u79cd\u6620\u5c04\u662f\u5355\u5411\u7684\uff0c\u5373 URL \u53d8\u5316\u5f15\u8d77 UI \u66f4\u65b0\uff08\u65e0\u9700\u5237\u65b0\u9875\u9762\uff09"]}),"\n",(0,t.jsxs)(n.p,{children:["\u4e0b\u9762\u4ee5",(0,t.jsx)(n.code,{children:"hash"}),"\u6a21\u5f0f\u4e3a\u4f8b\u5b50\uff0c\u6539\u53d8",(0,t.jsx)(n.code,{children:"hash"}),"\u503c\u5e76\u4e0d\u4f1a\u5bfc\u81f4\u6d4f\u89c8\u5668\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\u6d4f\u89c8\u5668\u4e0d\u53d1\u51fa\u8bf7\u6c42\uff0c\u4e5f\u5c31\u4e0d\u4f1a\u5237\u65b0\u9875\u9762"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"hash"})," \u503c\u6539\u53d8\uff0c\u89e6\u53d1\u5168\u5c40 ",(0,t.jsx)(n.code,{children:"window"})," \u5bf9\u8c61\u4e0a\u7684 ",(0,t.jsx)(n.code,{children:"hashchange"})," \u4e8b\u4ef6\u3002\u6240\u4ee5 ",(0,t.jsx)(n.code,{children:"hash"})," \u6a21\u5f0f\u8def\u7531\u5c31\u662f\u5229\u7528 ",(0,t.jsx)(n.code,{children:"hashchange"})," \u4e8b\u4ef6\u76d1\u542c ",(0,t.jsx)(n.code,{children:"URL"})," \u7684\u53d8\u5316\uff0c\u4ece\u800c\u8fdb\u884c ",(0,t.jsx)(n.code,{children:"DOM"})," \u64cd\u4f5c\u6765\u6a21\u62df\u9875\u9762\u8df3\u8f6c"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"react-router"}),"\u4e5f\u662f\u57fa\u4e8e\u8fd9\u4e2a\u7279\u6027\u5b9e\u73b0\u8def\u7531\u7684\u8df3\u8f6c"]}),"\n",(0,t.jsxs)(n.p,{children:["\u4e0b\u9762\u4ee5",(0,t.jsx)(n.code,{children:"HashRouter"}),"\u7ec4\u4ef6\u5206\u6790\u8fdb\u884c\u5c55\u5f00\uff1a"]}),"\n",(0,t.jsx)(n.h2,{id:"hashrouter",children:"HashRouter"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"HashRouter"}),"\u5305\u88f9\u4e86\u6574\u5e94\u7528\uff0c"]}),"\n",(0,t.jsxs)(n.p,{children:["\u901a\u8fc7",(0,t.jsx)(n.code,{children:"window.addEventListener('hashChange',callback)"}),"\u76d1\u542c",(0,t.jsx)(n.code,{children:"hash"}),"\u503c\u7684\u53d8\u5316\uff0c\u5e76\u4f20\u9012\u7ed9\u5176\u5d4c\u5957\u7684\u7ec4\u4ef6"]}),"\n",(0,t.jsxs)(n.p,{children:["\u7136\u540e\u901a\u8fc7",(0,t.jsx)(n.code,{children:"context"}),"\u5c06",(0,t.jsx)(n.code,{children:"location"}),"\u6570\u636e\u5f80\u540e\u4ee3\u7ec4\u4ef6\u4f20\u9012\uff0c\u5982\u4e0b\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:'import React, { Component } from "react";\r\nimport { Provider } from "./context";\r\n// \u8be5\u7ec4\u4ef6\u4e0bApi\u63d0\u4f9b\u7ed9\u5b50\u7ec4\u4ef6\u4f7f\u7528\r\nclass HashRouter extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      location: {\r\n        pathname: window.location.hash.slice(1) || "/",\r\n      },\r\n    };\r\n  }\r\n  // url\u8def\u5f84\u53d8\u5316 \u6539\u53d8location\r\n  componentDidMount() {\r\n    window.location.hash = window.location.hash || "/";\r\n    window.addEventListener("hashchange", () => {\r\n      this.setState(\r\n        {\r\n          location: {\r\n            ...this.state.location,\r\n            pathname: window.location.hash.slice(1) || "/",\r\n          },\r\n        },\r\n        () => console.log(this.state.location)\r\n      );\r\n    });\r\n  }\r\n  render() {\r\n    let value = {\r\n      location: this.state.location,\r\n    };\r\n    return <Provider value={value}>{this.props.children}</Provider>;\r\n  }\r\n}\r\n\r\nexport default HashRouter;\n'})}),"\n",(0,t.jsx)(n.h3,{id:"router",children:"Router"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Router"}),"\u7ec4\u4ef6\u4e3b\u8981\u505a\u7684\u662f\u901a\u8fc7",(0,t.jsx)(n.code,{children:"BrowserRouter"}),"\u4f20\u8fc7\u6765\u7684\u5f53\u524d\u503c\uff0c\u901a\u8fc7",(0,t.jsx)(n.code,{children:"props"}),"\u4f20\u8fdb\u6765\u7684",(0,t.jsx)(n.code,{children:"path"}),"\u4e0e",(0,t.jsx)(n.code,{children:"context"}),"\u4f20\u8fdb\u6765\u7684",(0,t.jsx)(n.code,{children:"pathname"}),"\u8fdb\u884c\u5339\u914d\uff0c\u7136\u540e\u51b3\u5b9a\u662f\u5426\u6267\u884c\u6e32\u67d3\u7ec4\u4ef6"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'import React, { Component } from "react";\r\nimport { Consumer } from "./context";\r\nconst { pathToRegexp } = require("path-to-regexp");\r\nclass Route extends Component {\r\n  render() {\r\n    return (\r\n      <Consumer>\r\n        {(state) => {\r\n          console.log(state);\r\n          let { path, component: Component } = this.props;\r\n          let pathname = state.location.pathname;\r\n          let reg = pathToRegexp(path, [], { end: false });\r\n          // \u5224\u65ad\u5f53\u524dpath\u662f\u5426\u5305\u542bpathname\r\n          if (pathname.match(reg)) {\r\n            return <Component></Component>;\r\n          }\r\n          return null;\r\n        }}\r\n      </Consumer>\r\n    );\r\n  }\r\n}\r\nexport default Route;\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u53c2\u8003\u6587\u732e",children:"\u53c2\u8003\u6587\u732e"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://juejin.cn/post/6870376090297171975#heading-9",children:"https://juejin.cn/post/6870376090297171975#heading-9"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://segmentfault.com/a/1190000023560665",children:"https://segmentfault.com/a/1190000023560665"})}),"\n"]}),"\n"]})]})}function l(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},11151:(e,n,r)=>{r.d(n,{Z:()=>i,a:()=>c});var t=r(67294);const o={},s=t.createContext(o);function c(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);