"use strict";(self.webpackChunkfn_wang_10_github_io=self.webpackChunkfn_wang_10_github_io||[]).push([[36240],{92219:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var r=t(74848),s=t(28453);const a={},o=void 0,i={id:"Vue/vue2\u6587\u6863/vuex",title:"vuex",description:"vuex \u662f vue \u7684\u63d2\u4ef6",source:"@site/docs/Vue/vue2\u6587\u6863/vuex.md",sourceDirName:"Vue/vue2\u6587\u6863",slug:"/Vue/vue2\u6587\u6863/vuex",permalink:"/docs/Vue/vue2\u6587\u6863/vuex",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"vueSidebar",previous:{title:"vue2\u53cc\u5411\u7ed1\u5b9a\u539f\u7406",permalink:"/docs/Vue/vue2\u6587\u6863/vue2\u53cc\u5411\u7ed1\u5b9a\u539f\u7406"},next:{title:"\u4ec0\u4e48\u662fvue",permalink:"/docs/Vue/vue2\u6587\u6863/\u4ec0\u4e48\u662fvue"}},c={},d=[{value:"vuex \u662f\u4ec0\u4e48",id:"vuex-\u662f\u4ec0\u4e48",level:2},{value:"1.state",id:"1state",level:2},{value:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570",id:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570",level:3},{value:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(mapState)",id:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570mapstate",level:3},{value:"2.getters(\u76f8\u5f53\u4e8e\u8ba1\u7b97\u5c5e\u6027)",id:"2getters\u76f8\u5f53\u4e8e\u8ba1\u7b97\u5c5e\u6027",level:2},{value:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(computed)",id:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570computed",level:3},{value:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(mapGetters)",id:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570mapgetters",level:3},{value:"3.mutations",id:"3mutations",level:2},{value:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(methods commit)",id:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570methods-commit",level:3},{value:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(mapMutations)",id:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570mapmutations",level:3},{value:"4.actions",id:"4actions",level:2},{value:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(methods dispatch)",id:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570methods-dispatch",level:3},{value:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(mapActions)",id:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570mapactions",level:3},{value:"5.modules",id:"5modules",level:2}];function u(n){const e={br:"br",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:"vuex \u662f vue \u7684\u63d2\u4ef6"}),"\n",(0,r.jsx)(e.h2,{id:"vuex-\u662f\u4ec0\u4e48",children:"vuex \u662f\u4ec0\u4e48"}),"\n",(0,r.jsxs)(e.p,{children:["vuex \u5168\u5c40\u72b6\u6001\u7ba1\u7406",(0,r.jsx)(e.br,{}),"\n","Vuex \u662f\u4e00\u4e2a\u4e13\u4e3a Vue.js \u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u7684\u72b6\u6001\u7ba1\u7406\u6a21\u5f0f(\u5168\u5c40\u72b6\u6001\u7ba1\u7406\u5de5\u5177\uff0c\u4e5f\u5c31\u662f\u7ba1\u7406 data\uff0c\u6570\u636e\uff0c\u53d8\u91cf)\uff0c\r\nvuex \u7684\u539f\u7406\uff1a\u7ec4\u4ef6\u901a\u8fc7 dispatch \u8c03\u7528 actions \u91cc\u9762\u7684\u51fd\u6570\uff08\u53ef\u4ee5\u662f\u5f02\u6b65\u7684\uff0cactions \u548c Backend API \u540e\u7aef\u63a5\u53e3\u7ed1\u5b9a\u5728\u4e00\u8d77\u7684\uff09\uff0cactions \u5728\u901a\u8fc7 commit \u53bb\u8c03\u7528 mutatuins \u91cc\u9762\u7684\u51fd\u6570\uff08mutations \u548c Devtools \u5f00\u53d1\u8005\u5de5\u5177\u7ed1\u5b9a\u5728\u4e00\u8d77\u7684\uff0c\u5feb\u7167\uff0c\u53ea\u8981 mutations \u91cc\u9762\u7684\u51fd\u6570\u6267\u884c\u4e86\uff0c\u5f00\u53d1\u8005\u5de5\u5177\u5c31\u4f1a\u4ea7\u751f\u4e00\u4e2a\u5feb\u7167\uff09\uff0cmutations \u53ef\u4ee5\u6539\u53d8 state \u91cc\u9762\u7684\u6570\u636e\uff0c\u6570\u636e\u6539\u53d8\u4e86\u7136\u540e\u5728\u76f8\u5bf9\u7ec4\u4ef6\u8fdb\u884c\u91cd\u65b0\u6e32\u67d3\uff0c"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://vuex.vuejs.org/vuex.png",alt:""})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"1.store\u6587\u4ef6\u2014\u2014\u91cc\u9762\u6709\u4e00\u4e2aindex.js\u6587\u4ef6\r\nindex.js\u6587\u4ef6\r\nstore\u5c31\u662f\u5199\u4ed3\u5e93\u7684\u6570\u636e\uff0c\u4ed3\u5e93\u7684\u6570\u636e\u5c31\u662f\u6574\u4e2a\u9879\u76ee\u5168\u5c40\u7684\u6570\u636e\r\nstate(){}\r\ngetters(){}\r\nmutations(){}\r\nactions(){}\r\nmodules(){}\r\n\r\n2.store/index.js\r\nimport Vue from\u201cvue\u201d\r\nimport Vuex from \"vuex\"\r\nVue.use(Vuex);\r\nconst store=new  Vuex.Store({\r\n\tstate: {   },\r\n\tgetters: {  }\uff0c\r\n\tmutations\uff1a {  }\uff0c\r\n\tactions\uff1a{  }\uff0c\r\n\tmodules\uff1a{  }\uff0c\r\n})\r\nexport default store;\r\n\r\n3.\u4e3b\u5165\u53e3\u6587\u4ef6main.js\r\nimport Vue from 'vue'\r\nimport App from './App.vue'\r\n// \u5f15\u5165\u4e86\u4ed3\u5e93\u5b9e\u4f8b\r\nimport store from './store'\r\nVue.config.productionTip = false\r\nnew Vue({\r\n\xa0 // \u6ce8\u518c\u4e86\u4ed3\u5e93\r\n\xa0 store,\r\n\xa0 render: h => h(App)\r\n}).$mount('#app')\n"})}),"\n",(0,r.jsx)(e.h2,{id:"1state",children:"1.state"}),"\n",(0,r.jsx)(e.p,{children:"store \u5c31\u662f\u5199\u4ed3\u5e93\u7684\u6570\u636e\uff0c\u4ed3\u5e93\u7684\u6570\u636e\u5c31\u662f\u6574\u4e2a\u9879\u76ee\u5168\u5c40\u7684\u6570\u636e"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'  state: {\r\n    count: 10,\r\n    name: "pengpeng",\r\n    age: 25,\r\n    address: "\u4e5d\u5821",\r\n    msg:"hello vuex!"\r\n  },\n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u4ed3\u5e93\u4e2d\u7684\u6570\u636e\u662f\u6709\u54cd\u5e94\u5f0f\u7684",(0,r.jsx)(e.br,{}),"\n","\u7ec4\u4ef6\u4f7f\u7528\u4ed3\u5e93\u4e2d\u7684 state \u72b6\u6001\u662f\u4f7f\u7528\u8ba1\u7b97\u5c5e\u6027\u7684\u65b9\u5f0f\uff0c\uff08\u4ed3\u5e93\u4e2d\u7684\u6570\u636e\u6539\u53d8\u4e86\uff0c\u7ec4\u4ef6\u4e2d\u8ba1\u7b97\u5c5e\u6027\u5c31\u4f1a\u6539\u53d8\uff0c\u5e76\u4e14\u91cd\u65b0\u6e32\u67d3\u5230\u9875\u9762\uff09"]}),"\n",(0,r.jsx)(e.h3,{id:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570",children:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'computed: {\r\n     count2() {\r\n       return this.$store.state.count;\r\n     },\r\n     name(){\r\n       return this.$store.state.name;\r\n     },\r\n   },\r\nmethods\uff1a{\r\n     handleClick() {\r\n       \u8fd9\u79cd\u5199\u6cd5\u6570\u636e\u4f1a\u6539\u53d8,\u4f46\u662f\u5f00\u53d1\u5de5\u5177\u91cc\u9762\u7684vuex\u4e2d\u7684state\u91cc\u9762\u7684\u6570\u636e\u5219\u4e0d\u4f1a\u6539\u53d8\uff0c\u5f00\u53d1\u5de5\u5177\u5c31\u6ca1\u6709\u7528\u4e86\r\n       this.$store.state.count++;\r\n\r\n       commit\u53ef\u4ee5\u53bb\u8c03\u7528mutations\u91cc\u9762\u7684add\u51fd\u6570\uff0c\u53c2\u6570\u5c31\u662fmutations\u91cc\u9762\u7684\u51fd\u6570\u540d\r\n       this.$store.commit("add");\r\n\r\n  },\r\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570mapstate",children:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(mapState)"}),"\n",(0,r.jsx)(e.p,{children:"mapState \u8f85\u52a9\u51fd\u6570 \u7528\u4e8e\u7b80\u5316\u8ba1\u7b97\u5c5e\u6027\u7684\u5199\u6cd5\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'import { mapState } from "vuex";\r\n\r\nmapState\u91cc\u9762\u53ef\u4ee5\u5199\u6570\u7ec4\u6216\u8005\u5bf9\u8c61\r\n\r\n1.\u6570\u7ec4\u8bed\u6cd5,\u7528\u7684\u6bd4\u8f83\u591a\uff08\u4ed3\u5e93\u4e2d\u662f\u4ec0\u4e48\u540d\u5b57\uff0c\u6570\u7ec4\u91cc\u9762\u5c31\u662f\u4ec0\u4e48\u540d\u5b57\uff0c\u5fc5\u987b\u4e00\u81f4\uff09\r\n\r\n\u2460 computed:mapState(["count","name","age","address"]),\xa0\r\n\r\n\u2461 \u5bf9\u8c61\u89e3\u6784\r\n computed:{\r\n\xa0 \xa0 ...mapState(["count","name","age","address"]),\r\n\xa0 \xa0 doubleNum(){   //\u4f9d\u8d56\u7684\u7ec4\u4ef6\u4e2d\u7684\u8ba1\u7b97\u5c5e\u6027\r\n\xa0 \xa0 \xa0 return this.num*2;\r\n\xa0 \xa0 },\r\n\xa0 }\r\n\r\n\r\n2.\u5bf9\u8c61\u8bed\u6cd5\r\n\u6211\u4eec\u7684\u7ec4\u4ef6\u4e2d\u7684\u6570\u636e\u53ef\u80fd\u548c\u4ed3\u5e93\u4e2d\u7684state\u91cc\u9762\u7684\u6570\u636e\u91cd\u540d\uff0c\u8fd9\u6837\u5c31\u4e0d\u597d\u4e86\uff0c\u6240\u4ee5\u4f7f\u7528\u5bf9\u8c61\u7684\u5199\u6cd5\uff0c\u5bf9\u8c61\u7684\u5199\u6cd5\u597d\u5904\u662f\uff0c\u6211\u4eec\u5f15\u8fdb\u7684\u4ed3\u5e93\u4e2d\u7684\u6570\u636e\u53ef\u4ee5\u81ea\u5b9a\u4e49\u540d\u5b57\uff08\u5c31\u662f\u5c5e\u6027\u540d\uff09\r\n\r\ncomputed: mapState({\r\n\u5bf9\u8c61\u91cc\u9762\u6709\u4e09\u79cd\u5199\u6cd5\uff1a\u7bad\u5934\u51fd\u6570\uff0c\u5b57\u7b26\u4e32\uff0c\u666e\u901a\u51fd\u6570\r\n\r\n\u2460 \u7bad\u5934\u51fd\u6570\r\n\u7bad\u5934\u51fd\u6570\u5199\u6cd5\uff0c\u53d6\u4e0d\u5230this\r\ncount2: (state) => state.count,\r\n\r\n\u2461 \u5b57\u7b26\u4e32\r\n\u4f20\u5b57\u7b26\u4e32\u53c2\u6570 \'name\' \u7b49\u540c\u4e8e `state => state.name`\r\nname: "name",\r\n\r\n\u2462 \u666e\u901a\u51fd\u6570\r\n\u4e3a\u4e86\u80fd\u591f\u4f7f\u7528 `this` \u83b7\u53d6\u5c40\u90e8\u72b6\u6001\uff0c\u5fc5\u987b\u4f7f\u7528\u5e38\u89c4\u51fd\u6570\r\n\u4e5f\u53ef\u4ee5\u5199\u6210\u666e\u901a\u51fd\u6570\u7684\u5f62\u5f0f\uff08computed\u5c5e\u6027\u53ef\u4ee5\u540c\u65f6\u4f9d\u8d56\u591a\u4e2a\u54cd\u5e94\u5f0f\u6570\u636e\uff0c\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u4f7f\u7528\u81ea\u5df1\u7ec4\u4ef6\u5185\u7684\u6570\u636e\u548c\u4ed3\u5e93\u4e2d\u7684\u5168\u5c40\u6570\u636e\uff0c\u505a\u62fc\u63a5\uff0c\u8fd9\u79cd\u666e\u901a\u51fd\u6570\u7684\u5199\u6cd5\u5c31\u6bd4\u8f83\u5408\u9002\u4e86\uff09\r\n\xa0 // \xa0 address(state) {\r\n\xa0 // \xa0 \xa0 return state.address + "--" + this.\u8857\u9053;\r\n\xa0 // \xa0 },\r\n\xa0 // }),\r\n};\n'})}),"\n",(0,r.jsx)(e.h2,{id:"2getters\u76f8\u5f53\u4e8e\u8ba1\u7b97\u5c5e\u6027",children:"2.getters(\u76f8\u5f53\u4e8e\u8ba1\u7b97\u5c5e\u6027)"}),"\n",(0,r.jsxs)(e.p,{children:["getters \u5c31\u662f vuex \u91cc\u9762\u7684\u8ba1\u7b97\u5c5e\u6027",(0,r.jsx)(e.br,{}),"\n","\u5177\u6709\u7f13\u5b58\uff0c\u7528\u6765\u6539\u53d8\u7684\u65f6\u5019\u624d\u4f1a\u91cd\u65b0\u89e6\u53d1\uff0c\u4e0d\u4f1a\u53bb\u6539\u53d8 state \u7684\u539f\u6570\u636e",(0,r.jsx)(e.br,{}),"\n","\u53ef\u4ee5\u63a5\u6536\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f state",(0,r.jsx)(e.br,{}),"\n","\u8fd8\u53ef\u4ee5\u63a5\u6536\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f getters,\u8bf4\u660e\u4ed6\u8fd8\u53ef\u4ee5\u4f9d\u8d56\u5176\u4ed6\u7684 getters"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'getters: {\r\n\xa0 \xa0 reverseMsg(state){\r\n\xa0 \xa0 \xa0 return state.msg.split("").reverse().join("");\r\n\xa0 \xa0 },\r\n    reverseMsg2(state,getters){\r\n\xa0 \xa0 \xa0 return getters.reverseMsg+"--\u4f60\u597d\uff0c\u4e16\u754c\uff01";\r\n\xa0 \xa0 }\r\n\xa0 },\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570computed",children:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(computed)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"computed: {\r\n\xa0 \xa0  reverseMsg() {\r\n\xa0 \xa0  \xa0 return this.$store.getters.reverseMsg;\r\n\xa0 \xa0  },\r\n\xa0 \xa0  reverseMsg2() {\r\n\xa0 \xa0  \xa0 return this.$store.getters.reverseMsg2;\r\n\xa0 \xa0 },\r\n},\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570mapgetters",children:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(mapGetters)"}),"\n",(0,r.jsx)(e.p,{children:"mapGetters \u662f vuex \u5b9e\u4f8b\u91cc\u9762\u7684\u4e00\u4e2a\u8f85\u52a9\u51fd\u6570\uff0c\u4e5f\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'import { mapGetters } from "vuex";\r\nexport default {\r\n\r\n1.\uff08\u6570\u7ec4\uff09\r\ncomputed:mapGetters(["reverseMsg","reverseMsg2"]),\r\n\r\n2. \u5bf9\u8c61\u89e3\u6784\r\n   computed:{\r\n   \xa0 \xa0 \xa0 \xa0 ...mapGetters(["reverseMsg","reverseMsg2"]),\r\n   \xa0 \xa0 \xa0 \xa0 ...mapState(["name"]),\r\n   \xa0 \xa0 }\r\n   };\n'})}),"\n",(0,r.jsx)(e.h2,{id:"3mutations",children:"3.mutations"}),"\n",(0,r.jsxs)(e.p,{children:["mutations \u91cc\u9762\u662f\u5199\u51fd\u6570\u7684\uff0cmutations \u662f\u552f\u4e00\u53ef\u4ee5\u53bb\u6539\u53d8 state \u91cc\u9762\u6570\u636e\u7684\u5730\u65b9",(0,r.jsx)(e.br,{}),"\n","mutations \u662f\u548c Devtools \u5f00\u53d1\u5de5\u5177\u7ed1\u5b9a\u5728\u4e00\u8d77\u7684\uff0c\u5f00\u53d1\u5de5\u5177\u4e0a\u7684\u5feb\u7167\uff0c\u5c31\u662f mutations \u91cc\u9762\u7684\u51fd\u6570\u6267\u884c\u7684\u65f6\u5019\u53bb\u62cd\u7684\uff0c\u53ea\u8981\u4e00\u89e6\u53d1 mutations \u91cc\u9762\u7684\u51fd\u6570\uff0c\u5c31\u4f1a\u5728\u5f00\u53d1\u5de5\u5177\u4e2d\u4ea7\u751f\u4e00\u4e2a\u5feb\u7167",(0,r.jsx)(e.br,{}),"\n","\u91cc\u9762\u7684\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a state \u53c2\u6570",(0,r.jsx)(e.br,{}),"\n",(0,r.jsx)(e.strong,{children:"mutations \u5fc5\u987b\u662f\u540c\u6b65\u51fd\u6570"}),"\uff08\u5f00\u53d1\u8005\u5de5\u5177\u91cc\u9762\u7684\u5feb\u7167\u662f\u5728 mutations \u51fd\u6570\u6267\u884c\u7684\u65f6\u5019\u4ea7\u751f\u7684\uff0c\u800c\u4e0d\u662f\u5728\u6570\u636e\u6539\u53d8\u7684\u65f6\u5019\u4ea7\u751f\u7684\uff09",(0,r.jsx)(e.br,{}),"\n","\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u5c31\u662f\u7ec4\u4ef6\u4f20\u6765\u7684\u503c\uff08payload\uff09"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"mutations: {\r\n    add(state, payload) {\r\n         setTimeout(()=>{\r\n              state.count += payload.a;\r\n       },200);\r\n    },\r\n    minus(state, payload) {\r\n          state.count -= payload.num;\r\n    },\r\n},\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570methods-commit",children:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(methods commit)"}),"\n",(0,r.jsxs)(e.p,{children:["\u7528 commit \u65b9\u6cd5\u4e0e\u8c03\u7528\u4ed3\u5e93\u4e2d\u7684 mutations \u91cc\u9762\u7684\u51fd\u6570",(0,r.jsx)(e.br,{}),"\n","commit \u65b9\u6cd5\u53ef\u4ee5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f mutations \u7684\u51fd\u6570\u540d\u79f0\uff08type\uff09,\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5c31\u662f\u4f20\u9012\u7684\u53c2\u6570\uff08payload\uff09\uff0c\u5982\u679c\u662f\u4f20\u591a\u4e2a\u53c2\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528\u5bf9\u8c61\u7684\u65b9\u5f0f\u8fdb\u884c\u4f20\u53c2"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'methods: {\r\n    handleClick1(num) {\r\n         this.$store.commit("minus", num);\r\n         this.$store.commit("minus", {num});\r\n\u7b49\u4ef7\u4e8e\r\n\u5bf9\u8c61\u98ce\u683c\u7684\u63d0\u4ea4\u65b9\u5f0f\r\n         this.$store.commit({\r\n               type:"minus",\r\n               num:num,\r\n      });\r\n    },\r\n    handleClick2(){\r\n           this.$store.commit("add");\r\n    }\r\n  },\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570mapmutations",children:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(mapMutations)"}),"\n",(0,r.jsxs)(e.p,{children:["mapMutations \u662f\u8f85\u52a9\u51fd\u6570\uff0c\u53ef\u4ee5\u7528\u4e8e\u7b80\u5316 commit \u7684\u5199\u6cd5\uff0c\u4e5f\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61",(0,r.jsx)(e.br,{}),"\n","\u5c06\u4ed3\u5e93\u4e2d\u7684 mutations \u91cc\u9762\u7684 add \u548c minus \u51fd\u6570\u6620\u5c04\u5230\u7ec4\u4ef6\u91cc\u9762\u7684 handleClick1 \u548c handleClick2 \u51fd\u6570"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'import { mapMutations } from "vuex";\r\nexport default {\r\n  methods: {\r\n    ...mapMutations(["add", "minus"]),\r\n    handleClick1(num) {\r\n      this.minus({ num });\r\n    },\r\n    handleClick2() {\r\n      this.add();\r\n    },\r\n  },\r\n};\n'})}),"\n",(0,r.jsx)(e.h2,{id:"4actions",children:"4.actions"}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u91cc\u4e5f\u662f\u5199\u51fd\u6570\u7684\uff0c\u4f46\u662f\u4e0d\u80fd\u53bb\u6539\u53d8 state,\u8fd9\u91cc\u80fd\u505a\u7684\u662f\u53bb\u8c03\u7528 mutations \u91cc\u9762\u7684\u51fd\u6570",(0,r.jsx)(e.br,{}),"\n","\u8fd9\u91cc\u5141\u8bb8\u4f7f\u7528\u5f02\u6b65\uff08Backend API \u540e\u7aef\u63a5\u53e3\u662f\u548c actions \u7ed1\u5b9a\u5728\u4e00\u8d77\u7684\uff09",(0,r.jsx)(e.br,{}),"\n","actions \u91cc\u9762\u7684\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a context \u53c2\u6570\uff08context \u662f\u4e00\u4e2a\u5bf9\u8c61\uff09\uff0ccontext \u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8868\u793a\u4e0a\u4e0b\u6587\uff0c\u53ef\u4ee5\u4ece context \u5bf9\u8c61\u4e2d\u7ed3\u6784\u51fa commit \u548c dispatch \u65b9\u6cd5\r\n\u8fd8\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a payload\uff08\u7ec4\u4ef6\u4e2d\u8c03\u7528\u8be5\u65b9\u6cd5\u65f6\u4f20\u8fc7\u6765\u7684\u6570\u636e\uff09",(0,r.jsx)(e.br,{}),"\n","\u5982\u679c\u53ea\u7528 context \u5bf9\u8c61\u91cc\u9762\u7684 commit \u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u89e3\u6784"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'actions: {\r\n     addAsync(context){\r\n       console.log(context);\r\n       setTimeout(()=>{\r\n         context.commit("add");\r\n       },2000);\r\n     },\r\n    addAsync({ commit }, payload) {\r\n      setTimeout(() => {\r\n        commit("add", payload);\r\n      }, 2000);\r\n    },\r\n  },\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570methods-dispatch",children:"\u4e0d\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(methods dispatch)"}),"\n",(0,r.jsxs)(e.p,{children:["\u4f7f\u7528 dispatch()\u65b9\u6cd5,\u7b2c\u4e00\u4e2a\u53c2\u6570\u5c31\u662f actions \u91cc\u9762\u7684\u51fd\u6570\u540d",(0,r.jsx)(e.br,{}),"\n","\u6d41\u7a0b\uff1a\u7ec4\u4ef6\u91cc\u9762\u4f7f\u7528 dispatch \u65b9\u6cd5\u53bb\u8c03 actions \u91cc\u9762\u7684\u51fd\u6570,\u7136\u540e\u4ed3\u5e93\u4e2d\u7684 actions \u53bb\u8c03\u7528 mutations \u91cc\u9762\u7684\u51fd\u6570\uff0cmutations \u53bb\u6539\u53d8 state \u91cc\u9762\u7684\u6570\u636e"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'methods: {\r\n    handleClick() {\r\n       actions\u4e5f\u53ef\u4ee5\u8fdb\u884c\u4f20\u53c2\r\n       this.$store.dispatch("addAsync", { a: 2 });         dispatch\u662f\u8c03\u5ea6\u7684\u610f\u601d\r\n    },\r\n  },\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570mapactions",children:"\u4f7f\u7528\u8f85\u52a9\u51fd\u6570(mapActions)"}),"\n",(0,r.jsxs)(e.p,{children:["\u5728\u7ec4\u4ef6\u4e2d\u5206\u53d1 actions",(0,r.jsx)(e.br,{}),"\n","\u5c31\u662f\u4ece vuex \u5b9e\u4f8b\u5bf9\u8c61\u4e2d\u89e3\u6784 mapActions \u8fd9\u4e2a\u8f85\u52a9\u51fd\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61",(0,r.jsx)(e.br,{}),"\n","\u5c06 actions \u91cc\u9762\u7684 addAsync \u51fd\u6570\u6620\u5c04\u5230\u7ec4\u4ef6\u7684 this.addAsync \u91cc\u9762"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'import { mapActions } from "vuex";\r\nmethods: {\r\n    ...mapActions(["addAsync"]),\r\n    handleClick() {\r\n         this.addAsync({ a: 2 });\r\n    },\r\n},\n'})}),"\n",(0,r.jsx)(e.h2,{id:"5modules",children:"5.modules"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'modules: {\r\n      city:cityModule,\r\n      detail:detailModule,\r\n      rated:ratedModule,\r\n},\r\n\r\n\u8fd8\u53ef\u4ee5\u4f7fES6\u7684\u6a21\u5757\u5316\uff08\u5c06\u6a21\u5757\u5199\u5728\u5916\u9762\uff09\r\n\u7531\u4e8e\u4f7f\u7528\u5355\u4e00\u72b6\u6001\u6811(\u5355\u4e00\u72b6\u6001\u6570\uff1a\u5c31\u662f\u4e00\u4e2avuex\u6587\u4ef6\u53ea\u80fd\u4f7f\u7528\u4e00\u4e2astate)\uff0c\u5e94\u7528\u7684\u6240\u6709\u72b6\u6001\u4f1a\u96c6\u4e2d\u5230\u4e00\u4e2a\u6bd4\u8f83\u5927\u7684\u5bf9\u8c61\u3002\u5f53\u5e94\u7528\u53d8\u5f97\u975e\u5e38\u590d\u6742\u65f6\uff0cstore \u5bf9\u8c61\u5c31\u6709\u53ef\u80fd\u53d8\u5f97\u76f8\u5f53\u81c3\u80bf\u3002\r\n\r\n\u547d\u540d\u7a7a\u95f4\r\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6a21\u5757\u5185\u90e8\u7684 action\u3001mutation \u548c getter \u662f\u6ce8\u518c\u5728\u5168\u5c40\u547d\u540d\u7a7a\u95f4\u7684\u2014\u2014\u8fd9\u6837\u4f7f\u5f97\u591a\u4e2a\u6a21\u5757\u80fd\u591f\u5bf9\u540c\u4e00 mutation \u6216 action \u4f5c\u51fa\u54cd\u5e94\u3002\r\n\u7ec4\u4ef6\u4f7f\u7528\u7684\u65f6\u5019\u53ea\u6709state\u662f\u9700\u8981\u52a0\u6a21\u5757\u540d\u7684\uff0c\u5176\u4ed6\u7684\u90fd\u662f\u5728\u5168\u5c40\u547d\u540d\u7a7a\u95f4\uff08\u4e0d\u9700\u8981\u52a0\u6a21\u5757\u540d\uff09\r\ncomputed: {\r\n\xa0 \xa0 detailInfo(){\r\n\xa0 \xa0 \xa0 // detail\u8868\u793a\u7684\u662f\u6a21\u5757\u540d\r\n\xa0 \xa0 \xa0 return this.$store.state.detail.detailInfo;\r\n\xa0 \xa0 }\r\n},\r\n\r\n\u5982\u679c\u5e0c\u671b\u4f60\u7684\u6a21\u5757\u5177\u6709\u66f4\u9ad8\u7684\u5c01\u88c5\u5ea6\u548c\u590d\u7528\u6027\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\xa0\r\nnamespaced: true\xa0\u7684\u65b9\u5f0f\u4f7f\u5176\u6210\u4e3a\u5e26\u547d\u540d\u7a7a\u95f4\u7684\u6a21\u5757\u3002\u5f53\u6a21\u5757\u88ab\u6ce8\u518c\u540e\uff0c\u5b83\u7684\u6240\u6709 getter\u3001action \u53ca mutation \u90fd\u4f1a\u81ea\u52a8\u6839\u636e\u6a21\u5757\u6ce8\u518c\u7684\u8def\u5f84\u8c03\u6574\u547d\u540d\u3002\r\n\u6240\u6709\u6a21\u5757\u90fd\u7528\u6a21\u5757\u540d\u9700\u8981\u5728store\u91cc\u9762\u6dfb\u52a0 \uff0cnamespaced: true,(\u548cstate\u540c\u7ea7)\uff0c\u8868\u793a\u547d\u540d\u7a7a\u95f4\r\n    namespaced: true,\r\n    state: {\r\n        // \u8be6\u60c5\u9875\u9762\u7684\u6570\u636e\r\n      detailInfo: {},\r\n    },\r\n\u4f7f\u7528\u7684\u65f6\u5019\u4e0d\u53ea\u6709state\u9700\u8981\u52a0\u6a21\u5757\u540d\u79f0\uff0cgetters/mutations/actions\u4e5f\u90fd\u9700\u8981\u53bb\u6dfb\u52a0\u6a21\u5757\u540d\u79f0\u4e86\r\n\u5982\u679c\u6dfb\u52a0\u4e86\u547d\u540d\u7a7a\u95f4\uff0c\u9700\u8981\u989d\u5916\u52a0\u4e00\u4e2a\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u6a21\u5757\u540d\u79f0\uff08state\u8fd8\u662f\u4e0a\u9762\u7684\u5199\u6cd5\uff09\r\n...mapActions("detail",["getDetailInfoAsync"]),\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'\u4ed3\u5e93;\r\nimport Vue from "vue";\r\n// \u5f15\u5165vuex\u7ec4\u4ef6\r\nimport Vuex from "vuex";\r\n\r\n// .use\u8fdb\u884c\u4f7f\u7528\uff0cvuex\u662f\u4e00\u4e2avue\u7684\u63d2\u4ef6\r\nVue.use(Vuex);\r\n\r\n// \u521b\u5efa\u4e86\u4e00\u4e2a\u4ed3\u5e93\u5b9e\u4f8b\r\nconst store = new Vuex.Store({\r\n  // store\u5c31\u662f\u5199\u4ed3\u5e93\u7684\u6570\u636e\uff0c\u4ed3\u5e93\u7684\u6570\u636e\u5c31\u662f\u6574\u4e2a\u9879\u76ee\u5168\u5c40\u7684\u6570\u636e\r\n  state: {\r\n    count: 10,\r\n    name: "pengpeng",\r\n    age: 25,\r\n    address: "\u4e5d\u5821",\r\n    msg: "hello vuex!",\r\n  },\r\n  // getters\u5c31\u662fvuex\u91cc\u9762\u7684\u8ba1\u7b97\u5c5e\u6027\r\n  // \u5177\u6709\u7f13\u5b58\uff0c\u7528\u6765\u6539\u53d8\u7684\u65f6\u5019\u624d\u4f1a\u91cd\u65b0\u89e6\u53d1\uff0c\uff0c\u4e0d\u4f1a\u53bb\u6539\u53d8state\u7684\u539f\u6570\u636e\r\n  // \u53ef\u4ee5\u63a5\u6536\u7b2c\u4e00\u4e2a\u53c2\u6570\u662fstate\r\n  getters: {\r\n    reverseMsg(state) {\r\n      return state.msg.split("").reverse().join("");\r\n    },\r\n    // \u8fd8\u53ef\u4ee5\u63a5\u6536\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662fgetters,\u8bf4\u660e\u4ed6\u8fd8\u53ef\u4ee5\u4f9d\u8d56\u5176\u4ed6\u7684getters\r\n    reverseMsg2(state, getters) {\r\n      return getters.reverseMsg + "--\u4f60\u597d\uff0c\u4e16\u754c\uff01";\r\n    },\r\n  },\r\n  // mutations\u91cc\u9762\u662f\u5199\u51fd\u6570\u7684\uff0cmutations\u662f\u552f\u4e00\u53ef\u4ee5\u53bb\u6539\u53d8state\u91cc\u9762\u6570\u636e\u7684\u5730\u65b9\r\n  // mutations\u662f\u548cDevtools\u5f00\u53d1\u5de5\u5177\u7ed1\u5b9a\u5728\u4e00\u8d77\u7684\uff0c\u5f00\u53d1\u5de5\u5177\u4e0a\u7684\u5feb\u7167\uff0c\u5c31\u662fmutations\u91cc\u9762\u514d\u5f97\u51fd\u6570\u6267\u884c\u7684\u65f6\u5019\u53bb\u62cd\u7684\uff0c\u53ea\u8981\u4e00\u89e6\u53d1mutations\u91cc\u9762\u7684\u51fd\u6570\uff0c\u5c31\u4f1a\u5728\u5f00\u53d1\u5de5\u5177\u4e2d\u4ea7\u751f\u4e00\u4e2a\u5feb\u7167\r\n  mutations: {\r\n    // \u91cc\u9762\u7684\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2astate\u53c2\u6570\r\n    // mutations\u5fc5\u987b\u662f\u540c\u6b65\u51fd\u6570\uff08\u5f00\u53d1\u8005\u5de5\u5177\u91cc\u9762\u7684\u5feb\u7167\u5b9e\u5728mutations\u51fd\u6570\u6267\u884c\u7684\u65f6\u5019\u4ea7\u751f\u7684\uff0c\u800c\u4e0d\u662f\u5728\u6570\u636e\u6539\u53d8\u7684\u65f6\u5019\u4ea7\u751f\u7684\uff09\r\n    add(state, payload) {\r\n      // setTimeout(()=>{\r\n      state.count += payload.a;\r\n      // },200);\r\n    },\r\n    // \u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u5c31\u662f\u7ec4\u4ef6\u4f20\u6765\u7684\u503c\uff08payload\uff09\r\n    minus(state, payload) {\r\n      state.count -= payload.num;\r\n    },\r\n  },\r\n  // \u8fd9\u91cc\u4e5f\u662f\u5199\u51fd\u6570\u7684\uff0c\u4f46\u662f\u4e0d\u80fd\u53bb\u6539\u53d8state,\u8fd9\u91cc\u80fd\u505a\u7684\u662f\u53bb\u8c03\u7528mutations\u91cc\u9762\u7684\u51fd\u6570\r\n  // \u8fd9\u91cc\u5141\u8bb8\u4f7f\u7528\u5f02\u6b65\r\n  // Backend API\u540e\u7aef\u63a5\u53e3\u662f\u548cactions\u7ed1\u5b9a\u5728\u4e00\u8d77\u7684\r\n  actions: {\r\n    // addAsync(context){\r\n    //   console.log(context);// context\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8868\u793a\u4e0a\u4e0b\u6587,\u91cc\u9762\u6709commit\u548cdispatch\u51fd\u6570\r\n    //   setTimeout(()=>{\r\n    //     context.commit("add");\r\n    //   },2000);\r\n    // },\r\n    // \u5982\u679c\u53ea\u7528context\u5bf9\u8c61\u91cc\u9762\u7684commit\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u89e3\u6784\r\n    addAsync({ commit }, payload) {\r\n      setTimeout(() => {\r\n        commit("add", payload);\r\n      }, 2000);\r\n    },\r\n  },\r\n  modules: {},\r\n});\r\nexport default store;\n'})})]})}function m(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(u,{...n})}):u(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>i});var r=t(96540);const s={},a=r.createContext(s);function o(n){const e=r.useContext(a);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),r.createElement(a.Provider,{value:e},n.children)}}}]);