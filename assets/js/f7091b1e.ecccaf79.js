"use strict";(self.webpackChunkfn_wang_10_github_io=self.webpackChunkfn_wang_10_github_io||[]).push([[48916],{7702:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>t,default:()=>b,frontMatter:()=>d,metadata:()=>a,toc:()=>l});var s=n(74848),r=n(28453);const d={},t=void 0,a={id:"\u5176\u5b83/webview,jsbridge",title:"webview,jsbridge",description:"webview",source:"@site/docs/\u5176\u5b83/webview,jsbridge.md",sourceDirName:"\u5176\u5b83",slug:"/\u5176\u5b83/webview,jsbridge",permalink:"/docs/\u5176\u5b83/webview,jsbridge",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"otherSidebar",previous:{title:"spm",permalink:"/docs/\u5176\u5b83/spm"},next:{title:"web\u5e38\u89c1\u653b\u51fb\u65b9\u5f0f",permalink:"/docs/\u5176\u5b83/web\u5e38\u89c1\u653b\u51fb\u65b9\u5f0f"}},c={},l=[{value:"webview",id:"webview",level:2},{value:"webview \u7b80\u4ecb",id:"webview-\u7b80\u4ecb",level:3},{value:"api \u7ed3\u6784",id:"api-\u7ed3\u6784",level:3},{value:"Webview \u6bd4\u8f83\u5e38\u89c1\u7684\u65b9\u6cd5",id:"webview-\u6bd4\u8f83\u5e38\u89c1\u7684\u65b9\u6cd5",level:3},{value:"Webview \u5b50\u7c7b\u53ca\u5176\u6bd4\u8f83\u5e38\u89c1\u7684\u65b9\u6cd5",id:"webview-\u5b50\u7c7b\u53ca\u5176\u6bd4\u8f83\u5e38\u89c1\u7684\u65b9\u6cd5",level:3},{value:"jsbridge",id:"jsbridge",level:2},{value:"Hybrid \u5f00\u53d1",id:"hybrid-\u5f00\u53d1",level:2}];function w(e){const i={br:"br",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h2,{id:"webview",children:"webview"}),"\n",(0,s.jsx)(i.h3,{id:"webview-\u7b80\u4ecb",children:"webview \u7b80\u4ecb"}),"\n",(0,s.jsx)(i.p,{children:"Webview \u662f\u539f\u751f\u5e94\u7528\u7684\u4e00\u4e2a\u666e\u901a\u7ec4\u4ef6\uff0candroid \u6709 webview\uff0cios \u6709 UIWebView/WKWebView\uff0c\u53ef\u7528\u4e8e\u663e\u793a\u548c\u6e32\u67d3 Web \u9875\u9762\uff0c\u53ef\u548c JavaScript \u4ea4\u4e92\u8c03\u7528"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"WebView \u662f\u4e00\u4e2a\u6d4f\u89c8\u5668\u7ec4\u4ef6\uff0c\u5728 Android 4.3 \u7cfb\u7edf\u53ca\u5176\u4ee5\u4e0b\uff0c\u5185\u90e8\u91c7\u7528 Webkit \u6e32\u67d3\u5f15\u64ce\uff0c\u5728 Android 4.4 \u5f00\u59cb\uff0c\u91c7\u7528 chromium \u6e32\u67d3\u5f15\u64ce\u6765\u6e32\u67d3 View \u7684\u5185\u5bb9\u3002"}),"\n",(0,s.jsx)(i.li,{children:"Google \u5bf9 WebKit \u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684 Java \u63a5\u53e3\uff0c\u5176\u4e2d\u6700\u91cd\u8981\u7684\u4fbf\u662f android.webkit.WebView \u63a7\u4ef6\u3002"}),"\n",(0,s.jsx)(i.li,{children:"WebKit \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u6d4f\u89c8\u5668\u5f15\u64ce"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"api-\u7ed3\u6784",children:"api \u7ed3\u6784"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:n(10839).A+"",width:"914",height:"601"})}),"\n",(0,s.jsx)(i.h3,{id:"webview-\u6bd4\u8f83\u5e38\u89c1\u7684\u65b9\u6cd5",children:"Webview \u6bd4\u8f83\u5e38\u89c1\u7684\u65b9\u6cd5"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"webView.addJavascriptInterface(); \u5411 webView \u4e2d\u6ce8\u518c android \u65b9\u6cd5"}),"\n",(0,s.jsx)(i.li,{children:"webView.evaluateJavascript(); \u6267\u884c javascript \u65b9\u6cd5"}),"\n",(0,s.jsx)(i.li,{children:"webView.loadUrl()\uff1b\u52a0\u8f7d\u7f51\u9875"}),"\n",(0,s.jsx)(i.li,{children:"webView.getSettings(); \u83b7\u53d6 webView \u914d\u7f6e\u5bf9\u8c61"}),"\n",(0,s.jsx)(i.li,{children:"webView.onResume() \uff1b\u6fc0\u6d3b WebView \u4e3a\u6d3b\u8dc3\u72b6\u6001\uff0c\u80fd\u6b63\u5e38\u6267\u884c\u7f51\u9875\u7684\u54cd\u5e94"}),"\n",(0,s.jsx)(i.li,{children:"webView.onPause() ; \u5f53\u9875\u9762\u88ab\u5931\u53bb\u7126\u70b9\u88ab\u5207\u6362\u5230\u540e\u53f0\u4e0d\u53ef\u89c1\u72b6\u6001\uff0c\u9700\u8981\u6267\u884c onPause \uff0c\u901a\u77e5\u5185\u6838\u5c1d\u8bd5\u505c\u6b62\u6240\u6709\u5904\u7406\uff0c\u5982\u52a8\u753b\u548c\u5730\u7406\u4f4d\u7f6e\uff0c\u4f46\u662f\u4e0d\u80fd\u505c\u6b62 javascript"}),"\n",(0,s.jsx)(i.li,{children:"webView.pauseTimers() ;\u5f53\u5e94\u7528\u7a0b\u5e8f(\u5b58\u5728 webview)\u88ab\u5207\u6362\u5230\u540e\u53f0\u65f6\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u4ec5\u4ec5\u9488\u5bf9\u5f53\u524d\u7684 webview \u800c\u662f\u5168\u5c40\u7684 webview \uff0c\u4f1a\u6682\u505c\u6240\u6709 webview \u7684 layout\uff0cparsing\uff0cjavascripttimer\u3002\u964d\u4f4e CPU \u529f\u8017\u3002"}),"\n",(0,s.jsx)(i.li,{children:"webView.resumeTimers()\uff1b\u6062\u590d pauseTimers \u72b6\u6001"}),"\n",(0,s.jsx)(i.li,{children:"webView.destroy();\u9500\u6bc1 Webview"}),"\n",(0,s.jsx)(i.li,{children:"webView.goBack(); \u8fd4\u56de"}),"\n",(0,s.jsx)(i.li,{children:"webview.clearCache(true); \u6e05\u9664\u7f51\u9875\u8bbf\u95ee\u7559\u4e0b\u7684\u7f13\u5b58\uff0c\u7531\u4e8e\u5185\u6838\u7f13\u5b58\u662f\u5168\u5c40\u7684\u56e0\u6b64\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u4ec5\u4ec5\u9488\u5bf9 webview \u800c\u662f\u9488\u5bf9\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f."}),"\n",(0,s.jsx)(i.li,{children:"webview.clearHistory();\u6e05\u9664\u5f53\u524d webview \u8bbf\u95ee\u7684\u5386\u53f2\u8bb0\u5f55"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"webview-\u5b50\u7c7b\u53ca\u5176\u6bd4\u8f83\u5e38\u89c1\u7684\u65b9\u6cd5",children:"Webview \u5b50\u7c7b\u53ca\u5176\u6bd4\u8f83\u5e38\u89c1\u7684\u65b9\u6cd5"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:n(33081).A+"",width:"799",height:"547"})}),"\n",(0,s.jsx)(i.h2,{id:"jsbridge",children:"jsbridge"}),"\n",(0,s.jsx)(i.p,{children:"jsbridge \u662f native \u4e0e web \u4e4b\u95f4\u4ea4\u4e92\u7684\u7edf\u79f0\uff0c\u5e02\u9762\u4e0a\u6709\u5f88\u591a jsbridge \u5e93\uff0c\u6211\u4eec\u76ee\u524d\u5728\u7528\u7684\u662f WebViewJavascriptBridge"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"javascript \u8c03\u7528\u539f\u751f\u4ee3\u7801"}),"\n",(0,s.jsx)(i.li,{children:"\u539f\u751f\u4ee3\u7801\u8c03\u7528 javascript"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"android \u8c03\u7528 javascript \u65b9\u6cd5\u6709 2 \u79cd"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"webView.loadUrl();"}),"\n",(0,s.jsx)(i.li,{children:"webView.evaluateJavascript();"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"JavaScript \u8c03\u7528 android \u65b9\u6cd5\u6709 3 \u79cd"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"WebView. addJavascriptInterface()\u6ce8\u518c\uff0cjavascript \u76f4\u63a5\u8c03\u7528"}),"\n",(0,s.jsx)(i.li,{children:"webViewClient.shouldOverrideUrlLoading()\u62e6\u622a\u81ea\u5b9a\u4e49\u534f\u8bae url"}),"\n",(0,s.jsx)(i.li,{children:"webChromeClient \u62e6\u622a\u9875\u9762\u5bf9\u8bdd\u6846"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"hybrid-\u5f00\u53d1",children:"Hybrid \u5f00\u53d1"}),"\n",(0,s.jsxs)(i.p,{children:["\u5f00\u53d1\u5206\u5de5",(0,s.jsx)(i.br,{}),"\n","\u5f00\u53d1\u4e4b\u524d\u8981\u5c06\u804c\u8d23\u5206\u6e05\u695a\uff1a\u54ea\u4e9b\u9700\u8981\u524d\u7aef\u5f00\u53d1\u3001\u54ea\u4e9b\u9700\u8981 native \u5f00\u53d1\r\n",(0,s.jsx)(i.img,{src:n(7953).A+"",width:"1558",height:"819"}),"\r\nnative \u539f\u5219\u4e0a\u53ea\u63d0\u4f9b\u5bb9\u5668\uff0c\u4e0d\u6d89\u53ca\u5177\u4f53\u4e1a\u52a1\uff1b\u5bb9\u5668\u53ef\u4ee5\u4f9b\u5176\u4ed6\u4e1a\u52a1\u7684 H5 \u4f7f\u7528\uff0c\u505a\u5230\u53ef\u79fb\u690d\uff0c\u4e00\u4e2a\u516c\u53f8\u53ef\u80fd\u6709\u591a\u4e2a hybrid \u5e94\u7528\r\n",(0,s.jsx)(i.img,{src:n(86842).A+"",width:"1537",height:"877"}),"\r\n\u6280\u672f\u65b9\u6848",(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.img,{src:n(50947).A+"",width:"1721",height:"921"}),"\r\n",(0,s.jsx)(i.img,{src:n(74700).A+"",width:"1614",height:"879"}),"\r\n",(0,s.jsx)(i.img,{src:n(26965).A+"",width:"1676",height:"877"})]})]})}function b(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(w,{...e})}):w(e)}},7953:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/1-dff6e6715c83724a9b7e8fd693c45471.png"},86842:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/2-86468a879bf9b2929363534a9a95bc74.png"},33081:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/224EF865-B158-40cc-9C01-21FBAD23AAFC-9fcbdc8776a46e60da9fe9436cf2c7aa.png"},50947:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/3-da015a20023278e8f138b33d296c1434.png"},74700:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/4-a5f06fb5f74055420e41445ea4cf4f1b.png"},26965:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/5-9050acfdc9cae2e59e4bf24ae4070fe9.png"},10839:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/DE79C192-BF2D-4045-996A-134ECAFD50E6-ede7d49f4bc099e3c2aeba10cb30e3e4.png"},28453:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>a});var s=n(96540);const r={},d=s.createContext(r);function t(e){const i=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(d.Provider,{value:i},e.children)}}}]);