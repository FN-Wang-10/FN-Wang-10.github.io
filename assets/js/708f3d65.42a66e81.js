"use strict";(self.webpackChunkfn_wang_10_github_io=self.webpackChunkfn_wang_10_github_io||[]).push([[574],{31218:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>f,default:()=>a,frontMatter:()=>r,metadata:()=>l,toc:()=>o});var d=i(74848),t=i(28453);const r={},f=void 0,l={id:"React/diff\u7b97\u6cd5",title:"diff\u7b97\u6cd5",description:"diff \u7b97\u6cd5\u7684\u57fa\u672c\u6d41\u7a0b",source:"@site/docs/React/diff\u7b97\u6cd5.md",sourceDirName:"React",slug:"/React/diff\u7b97\u6cd5",permalink:"/docs/React/diff\u7b97\u6cd5",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"reactSidebar",previous:{title:"diff\u7684\u539f\u7406",permalink:"/docs/React/diff\u7684\u539f\u7406"},next:{title:"dva\u4e0ecra\u76f8\u6bd4\u7684\u4f18\u70b9",permalink:"/docs/React/dva\u4e0ecra\u76f8\u6bd4\u7684\u4f18\u70b9"}},c={},o=[{value:"diff \u7b97\u6cd5\u7684\u57fa\u672c\u6d41\u7a0b",id:"diff-\u7b97\u6cd5\u7684\u57fa\u672c\u6d41\u7a0b",level:2},{value:"diff \u7b97\u6cd5\u7684\u4f5c\u7528\uff08\u63d0\u9ad8\u6027\u80fd\uff09",id:"diff-\u7b97\u6cd5\u7684\u4f5c\u7528\u63d0\u9ad8\u6027\u80fd",level:2},{value:"\u666e\u901a\u7684 diff \u7b97\u6cd5",id:"\u666e\u901a\u7684-diff-\u7b97\u6cd5",level:2},{value:"React \u4e2d\u7684 diff \u7b97\u6cd5",id:"react-\u4e2d\u7684-diff-\u7b97\u6cd5",level:2},{value:"tree \u5c42\u7ea7",id:"tree-\u5c42\u7ea7",level:3},{value:"component \u5c42\u7ea7",id:"component-\u5c42\u7ea7",level:3},{value:"element \u5c42\u7ea7",id:"element-\u5c42\u7ea7",level:3}];function s(e){const n={br:"br",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h2,{id:"diff-\u7b97\u6cd5\u7684\u57fa\u672c\u6d41\u7a0b",children:"diff \u7b97\u6cd5\u7684\u57fa\u672c\u6d41\u7a0b"}),"\n",(0,d.jsx)(n.p,{children:"\u7b2c\u4e00\u6b21 render \u5728\u6267\u884c\u7684\u65f6\u5019\u4f1a\u5c06\u7b2c\u4e00\u6b21\u7684\u865a\u62df dom \u505a\u4e00\u6b21\u7f13\u5b58\uff0c\u7b2c\u4e8c\u6b21\u6e32\u67d3\u7684\u65f6\u5019\u4f1a\u5c06\u65b0\u7684\u865a\u62df dom \u548c\u8001\u7684\u865a\u62df dom \u8fdb\u884c\u5bf9\u6bd4\u3002\u8fd9\u4e2a\u5bf9\u6bd4\u7684\u8fc7\u7a0b\u5176\u5b9e\u5c31\u662f diff \u7b97\u6cd5\u3002"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"\u5c42\u7ea7\u6bd4\u8f83\u2014\u2014\u5bf9\u5e94 vue \u7684\u540c\u7ea7\u6bd4\u8f83\uff0c\u6ca1\u6709\u8de8\u5c42\u7ea7\u79fb\u52a8\uff0c\u6240\u4ee5\u53ef\u4ee5\u540c\u7ea7\u6bd4\u8f83"}),"\n",(0,d.jsx)(n.li,{children:"\u7ec4\u4ef6\u5bf9\u6bd4\u2014\u2014\u7ec4\u4ef6\u80fd\u590d\u7528\u5c31\u76f4\u63a5\u590d\u7528\uff08\u5c06\u65f6\u95f4\u590d\u6742\u5ea6\u4ece on \u7684\u4e09\u6b21\u65b9\uff0c\u964d\u5230 on \u7684\u4e00\u6b21\u65b9\uff09"}),"\n",(0,d.jsxs)(n.li,{children:["\u8282\u70b9\u5bf9\u6bd4\u2014\u2014\u5bf9\u5e94 vue \u7684 key \u7684\u6bd4\u8f83",(0,d.jsx)(n.br,{}),"\n","\u865a\u62df dom\uff0cdiff \u7b97\u6cd5\uff0c\u8981\u80fd\u7528\u81ea\u5df1\u7684\u8bdd\u8bf4\u51fa\u6765"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"diff-\u7b97\u6cd5\u7684\u4f5c\u7528\u63d0\u9ad8\u6027\u80fd",children:"diff \u7b97\u6cd5\u7684\u4f5c\u7528\uff08\u63d0\u9ad8\u6027\u80fd\uff09"}),"\n",(0,d.jsx)(n.p,{children:"\u5728 DOM \u9700\u8981\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u901a\u8fc7 diff \u7b97\u6cd5\u53ef\u4ee5 \u8ba1\u7b97\u51fa \u865a\u62df DOM \u4e2d\u771f\u6b63\u53d8\u5316\u7684\u90e8\u5206\uff0c\u4ece\u800c\u53ea\u9488\u5bf9\u53d8\u5316\u7684\u90e8\u5206\u8fdb\u884c\u66f4\u65b0\u6e32\u67d3\uff0c\u907f\u514d\u9020\u6210\u6027\u80fd\u6d6a\u8d39\u3002"}),"\n",(0,d.jsx)(n.h2,{id:"\u666e\u901a\u7684-diff-\u7b97\u6cd5",children:"\u666e\u901a\u7684 diff \u7b97\u6cd5"}),"\n",(0,d.jsx)(n.p,{children:"\u867d\u7136\u5b8c\u7f8e\u5730\u5b9e\u73b0\u4e86\u627e\u4e0d\u540c\u7684\u529f\u80fd\uff0c\u4f46\u662f\u50bb\u74dc\u5f0f\u7684\u5faa\u73af\u9012\u5f52\u5bf9\u8282\u70b9\u8fdb\u884c\u4f9d\u6b21\u7684\u5bf9\u6bd4\uff0c\u4f7f\u5176\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n^3)\uff0c\u5176\u4e2d n \u662f dom \u6811\u7684\u8282\u70b9\u6570\u3002\u5982\u679c dom \u6570\u8db3\u591f\u5927\u7684\u8bdd\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u5c06\u5bf9 cpu \u5f62\u6210\u7edd\u6740\u3002"}),"\n",(0,d.jsx)(n.h2,{id:"react-\u4e2d\u7684-diff-\u7b97\u6cd5",children:"React \u4e2d\u7684 diff \u7b97\u6cd5"}),"\n",(0,d.jsxs)(n.p,{children:["\u4e3a\u4e86\u4f18\u5316 diff \u7b97\u6cd5\uff0creact \u4e2d\u5bf9\u666e\u901a\u7684 diff \u7b97\u6cd5\u5b9e\u884c\u4e86\u4e09\u5927\u7b56\u7565\uff0c\u6210\u529f\u5c06\u65f6\u95f4\u590d\u6742\u5ea6\u964d\u4e3a O(n )",(0,d.jsx)(n.br,{}),"\n","\u7b56\u7565\u4e00\uff1atree diff \u2014\u2014 \u5c42\u7ea7\u5bf9\u6bd4 \uff08\u5bf9\u5e94 vue \u7684\u540c\u7ea7\u6bd4\u8f83\uff0c\u6ca1\u6709\u8de8\u5c42\u7ea7\u79fb\u52a8\uff0c\u6240\u4ee5\u53ef\u4ee5\u540c\u7ea7\u6bd4\u8f83\uff09",(0,d.jsx)(n.br,{}),"\n","\u7531\u4e8e\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u6781\u5c11\u51fa\u73b0 DOM \u7684\u8de8\u5c42\u7ea7\u79fb\u52a8\uff0c\u6240\u4ee5 tree diff \u5ffd\u7565\u4e86 DOM \u8282\u70b9\u7684\u8de8\u5c42\u7ea7\u79fb\u52a8\u3002\uff08react \u4e0d\u5efa\u8bae\u5f00\u53d1\u4eba\u5458\u8de8\u5c42\u7ea7\u79fb\u52a8 DOM\uff09",(0,d.jsx)(n.br,{}),"\n","\u7b56\u7565\u4e8c\uff1acomponent diff \u2014\u2014 \u7ec4\u4ef6\u5bf9\u6bd4 \uff08\u7ec4\u4ef6\u80fd\u590d\u7528\u5c31\u76f4\u63a5\u590d\u7528\uff08\u5c06\u65f6\u95f4\u590d\u6742\u5ea6\u4ece on \u7684\u4e09\u6b21\u65b9\uff0c\u964d\u5230 on \u7684\u4e00\u6b21\u65b9\uff09",(0,d.jsx)(n.br,{}),"\n","\u540c\u7c7b\u578b\u7684\u4e24\u4e2a\u7ec4\u4ef6\uff0c\u76f4\u63a5\u6bd4\u8f83 Virtual DOM \u6811\uff0c\u4e0d\u540c\u7c7b\u578b\u7684\u7ec4\u4ef6\u5c06\u4f1a\u88ab\u5224\u5b9a\u4f5c\u4e3a\u810f\u7ec4\u4ef6(dirty component)\u5904\u7406\uff0c\u76f4\u63a5\u5220\u9664\u6216\u521b\u5efa\u65b0\u7ec4\u4ef6",(0,d.jsx)(n.br,{}),"\n","\u7b56\u7565\u4e09\uff1aelement diff \u2014\u2014 \u8282\u70b9\u5bf9\u6bd4 \uff08\u5bf9\u5e94 vue \u7684 key \u7684\u6bd4\u8f83\uff09",(0,d.jsx)(n.br,{}),"\n","\u5bf9\u4e8e\u540c\u4e00\u5c42\u7ea7\u7684\u4e00\u7ec4\u5b50\u8282\u70b9\uff0c\u901a\u8fc7\u5206\u914d\u552f\u4e00\u552f\u4e00 key \u503c\u8fdb\u884c\u533a\u5206"]}),"\n",(0,d.jsx)(n.h3,{id:"tree-\u5c42\u7ea7",children:"tree \u5c42\u7ea7"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"\u5bf9\u8de8\u5c42\u7ea7\u7684 dom \u8282\u70b9\u64cd\u4f5c\u4e0d\u505a\u4f18\u5316\uff0c\u53ea\u4f1a\u5bf9\u76f8\u540c\u5c42\u7ea7\u7684\u8282\u70b9\u8fdb\u884c\u6bd4\u8f83"}),"\n",(0,d.jsx)(n.li,{children:"\u53ea\u6709\u5220\u9664\u548c\u521b\u5efa\u64cd\u4f5c\uff0c\u6ca1\u6709\u79fb\u52a8\u64cd\u4f5c"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"component-\u5c42\u7ea7",children:"component \u5c42\u7ea7"}),"\n",(0,d.jsx)(n.p,{children:"\u5982\u679c\u662f\u540c\u4e00\u4e2a\u7c7b\u7684\u7ec4\u4ef6\uff0c\u5219\u4f1a\u7ee7\u7eed\u5f80\u4e0b diff \u8fd0\u7b97\uff0c\u5982\u679c\u4e0d\u662f\u4e00\u4e2a\u7c7b\u7684\u7ec4\u4ef6\uff0c\u90a3\u4e48\u76f4\u63a5\u5220\u9664\u8fd9\u4e2a\u7ec4\u4ef6\u4e0b\u7684\u6240\u6709\u5b50\u8282\u70b9\uff0c\u521b\u5efa\u65b0\u7684"}),"\n",(0,d.jsx)(n.h3,{id:"element-\u5c42\u7ea7",children:"element \u5c42\u7ea7"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"\u5bf9\u4e8e\u6bd4\u8f83\u540c\u4e00\u5c42\u7ea7\u7684\u8282\u70b9\u4eec\uff0c\u6bcf\u4e2a\u8282\u70b9\u5728\u5bf9\u5e94\u7684\u5c42\u7ea7\u7528\u552f\u4e00\u7684 key \u4f5c\u4e3a\u6807\u8bc6"}),"\n",(0,d.jsx)(n.li,{children:"\u63d0\u4f9b\u4e86 3 \u79cd\u8282\u70b9\u64cd\u4f5c\uff0c\u5206\u522b\u4e3a INSERT_MARKUP(\u63d2\u5165)\u3001MOVE_EXISTING (\u79fb\u52a8)\u548c REMOVE_NODE (\u5220\u9664)"}),"\n",(0,d.jsx)(n.li,{children:"\u901a\u8fc7 key \u53ef\u4ee5\u51c6\u786e\u5730\u53d1\u73b0\u65b0\u65e7\u96c6\u5408\u4e2d\u7684\u8282\u70b9\u90fd\u662f\u76f8\u540c\u7684\u8282\u70b9\uff0c\u56e0\u6b64\u65e0\u9700\u8fdb\u884c\u8282\u70b9\u5220\u9664\u548c\u521b\u5efa\uff0c\u53ea\u9700\u8981\u5c06\u65e7\u96c6\u5408\u4e2d\u8282\u70b9\u7684\u4f4d\u7f6e\u8fdb\u884c\u79fb\u52a8\uff0c\u66f4\u65b0\u4e3a\u65b0\u96c6\u5408\u4e2d\u8282\u70b9\u7684\u4f4d\u7f6e"}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(s,{...e})}):s(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>f,x:()=>l});var d=i(96540);const t={},r=d.createContext(t);function f(e){const n=d.useContext(r);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:f(e.components),d.createElement(r.Provider,{value:n},e.children)}}}]);