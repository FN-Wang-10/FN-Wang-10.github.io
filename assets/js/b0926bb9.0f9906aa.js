"use strict";(self.webpackChunkfn_wang_10_github_io=self.webpackChunkfn_wang_10_github_io||[]).push([[16247],{78907:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var t=n(74848),a=n(28453);const s={},o=void 0,i={id:"\u5176\u5b83/\u5982\u4f55\u89e3\u51b3\u524d\u7aef\u66f4\u65b0\u90e8\u7f72\u540e\u901a\u77e5\u7528\u6237\u5237\u65b0",title:"\u5982\u4f55\u89e3\u51b3\u524d\u7aef\u66f4\u65b0\u90e8\u7f72\u540e\u901a\u77e5\u7528\u6237\u5237\u65b0",description:"\u89e3\u51b3\u573a\u666f\uff1a\u5f53\u524d\u7aef\u90e8\u7f72\u66f4\u65b0\u540e\uff0c\u7528\u6237\u4e00\u76f4\u505c\u7559\u5728\u9875\u9762\u4e0a\uff0c\u62ff\u4e0d\u5230\u6700\u65b0\u8d44\u6e90\uff0c\u4f1a\u9020\u6210\u65e0\u54cd\u5e94\u7684\u60c5\u51b5\u3002",source:"@site/docs/\u5176\u5b83/\u5982\u4f55\u89e3\u51b3\u524d\u7aef\u66f4\u65b0\u90e8\u7f72\u540e\u901a\u77e5\u7528\u6237\u5237\u65b0.md",sourceDirName:"\u5176\u5b83",slug:"/\u5176\u5b83/\u5982\u4f55\u89e3\u51b3\u524d\u7aef\u66f4\u65b0\u90e8\u7f72\u540e\u901a\u77e5\u7528\u6237\u5237\u65b0",permalink:"/docs/\u5176\u5b83/\u5982\u4f55\u89e3\u51b3\u524d\u7aef\u66f4\u65b0\u90e8\u7f72\u540e\u901a\u77e5\u7528\u6237\u5237\u65b0",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"otherSidebar",previous:{title:"\u57cb\u70b9\u4e09\u79cd\u65b9\u5f0f",permalink:"/docs/\u5176\u5b83/\u57cb\u70b9\u4e09\u79cd\u65b9\u5f0f"},next:{title:"\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u957f\u8fde\u63a5\u7684\u51e0\u79cd\u65b9\u5f0f",permalink:"/docs/\u5176\u5b83/\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u957f\u8fde\u63a5\u7684\u51e0\u79cd\u65b9\u5f0f"}},c={},l=[{value:"1.Public \u4e0b\u7684\u52a0\u5165 manifest.json \u6587\u4ef6",id:"1public-\u4e0b\u7684\u52a0\u5165-manifestjson-\u6587\u4ef6",level:3},{value:"2. webpack \u5411 manifest.json \u5199\u5165\u5f53\u524d\u65f6\u95f4\u6233\u4fe1\u606f",id:"2-webpack-\u5411-manifestjson-\u5199\u5165\u5f53\u524d\u65f6\u95f4\u6233\u4fe1\u606f",level:3},{value:"3. \u68c0\u67e5\u66f4\u65b0\u7684\u903b\u8f91",id:"3-\u68c0\u67e5\u66f4\u65b0\u7684\u903b\u8f91",level:3},{value:"4. Worker \u5f15\u5165",id:"4-worker-\u5f15\u5165",level:3},{value:"5. Worker \u901a\u4fe1",id:"5-worker-\u901a\u4fe1",level:3},{value:"\u53c2\u8003\u6587\u732e",id:"\u53c2\u8003\u6587\u732e",level:3}];function d(e){const r={a:"a",br:"br",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.p,{children:"\u89e3\u51b3\u573a\u666f\uff1a\u5f53\u524d\u7aef\u90e8\u7f72\u66f4\u65b0\u540e\uff0c\u7528\u6237\u4e00\u76f4\u505c\u7559\u5728\u9875\u9762\u4e0a\uff0c\u62ff\u4e0d\u5230\u6700\u65b0\u8d44\u6e90\uff0c\u4f1a\u9020\u6210\u65e0\u54cd\u5e94\u7684\u60c5\u51b5\u3002"}),"\n",(0,t.jsx)(r.p,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"\u5728 public \u6587\u4ef6\u5939\u4e2d\u52a0\u5165 manifest.json \u6587\u4ef6\uff0c\u8bb0\u5f55\u7248\u672c\u4fe1\u606f\u3002"}),"\n",(0,t.jsx)(r.li,{children:"\u5728\u524d\u7aef\u6253\u5305\u7684\u65f6\u5019\u5411\u914d\u7f6e\u6587\u4ef6 manifest.json \u6587\u4ef6\u5199\u5165\u5f53\u524d\u65f6\u95f4\u6233\u3002"}),"\n",(0,t.jsxs)(r.li,{children:["\u5728\u5165\u53e3 JS \u5f15\u5165\u68c0\u67e5\u66f4\u65b0\u7684\u903b\u8f91\uff0c\u6709\u66f4\u65b0\u5219\u63d0\u793a\u66f4\u65b0\uff1a",(0,t.jsx)(r.br,{}),"\n","\u8def\u7531\u5b88\u536b router.beforeResolve,\u68c0\u67e5\u66f4\u65b0\uff0c\u5bf9\u6bd4 manifest.json \u6587\u4ef6\u7684\u54cd\u5e94\u5934 Etag \u5224\u65ad\u662f\u5426\u6709\u66f4\u65b0\u3002"]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"\u901a\u8fc7 Worker \u8f6e\u8be2\uff0c\u68c0\u67e5\u66f4\u65b0\u3002\u5bf9\u6bd4 manifest.json \u6587\u4ef6\u7684\u54cd\u5e94\u5934 Etag \u662f\u5426\u6709\u66f4\u65b0\u3002"}),"\n",(0,t.jsx)(r.h3,{id:"1public-\u4e0b\u7684\u52a0\u5165-manifestjson-\u6587\u4ef6",children:"1.Public \u4e0b\u7684\u52a0\u5165 manifest.json \u6587\u4ef6"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:'{\r\n    "timestamp":1706518420707,\r\n    "msg":"\u66f4\u65b0\u5185\u5bb9\u5982\u4e0b\uff1a\\n--1.\u6dfb\u52a0\u7cfb\u7edf\u66f4\u65b0\u63d0\u793a"\r\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:"\u5982\u679c\u662f\u4e0d\u5411\u7528\u6237\u63d0\u793a\u66f4\u65b0\u5185\u5bb9\uff0c\u53ef\u4e0d\u586b\uff0c\u524d\u6bb5\u5f00\u53d1\u8005\u4e5f\u65e0\u9700\u7ef4\u62a4 manifest.json \u7684 msg \u5185\u5bb9\uff0c\u8fd9\u91cc\u4e3b\u8981\u8003\u8651\u5230\u5982\u679c\u7528\u6237\u5728\u586b\u957f\u8868\u5355\u7684\u65f6\u5019\uff0c\u586b\u4e86\u4e00\u5927\u534a\uff0c\u4f60\u8fd9\u65f6\u5019\u7ed9\u7528\u6237\u5f39\u4e2a\u66f4\u65b0\u63d0\u793a\uff0c\u7528\u6237\u65e0\u6cd5\u5224\u65ad\u662f\u5426\u5f71\u54cd\u5f53\u524d\u8868\u5355\u586b\u5199\u63d0\u4ea4\uff0c\u5982\u679c\u5c06\u66f4\u65b0\u4fe1\u606f\u5c55\u793a\u51fa\u6765\uff0c\u7528\u6237\u611f\u77e5\u66f4\u65b0\u5185\u5bb9\uff0c\u53ef\u5224\u65ad\u662f\u5426\u9700\u8981\u7acb\u5373\u5237\u65b0\uff0c\u8fd8\u662f\u63d0\u4ea4\u5b8c\u8868\u5355\u518d\u5237\u65b0\u3002"}),"\n",(0,t.jsx)(r.h3,{id:"2-webpack-\u5411-manifestjson-\u5199\u5165\u5f53\u524d\u65f6\u95f4\u6233\u4fe1\u606f",children:"2. webpack \u5411 manifest.json \u5199\u5165\u5f53\u524d\u65f6\u95f4\u6233\u4fe1\u606f"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:"const filePath = path.resolve(`./public`, 'manifest.json');\r\n// \u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\r\nreadFile(filePath, 'utf8', (err, data) => {\r\n  if (err) {\r\n    console.error('\u8bfb\u53d6\u6587\u4ef6\u65f6\u51fa\u9519:', err);\r\n    return;\r\n  }\r\n  // \u5c06\u6587\u4ef6\u5185\u5bb9\u8f6c\u6362JSON\r\n  const dataObj = JSON.parse(data);\r\n  dataObj.timestamp = new Date().getTime();\r\n  // \u5c06\u4fee\u6539\u540e\u7684\u5185\u5bb9\u5199\u56de\u6587\u4ef6\r\n  writeFile(filePath, JSON.stringify(dataObj), 'utf8', (err) => {\r\n    if (err) {\r\n      console.error('\u5199\u5165\u6587\u4ef6\u65f6\u51fa\u9519:', err);\r\n      return;\r\n    }\r\n  });\r\n});\r\n\r\n//\u5982\u679c\u4f60\u65e0\u9700\u7ef4\u62a4\u66f4\u65b0\u5185\u5bb9\u7684\u8bdd\uff0c\u53ef\u76f4\u63a5\u5199\u5165timestamp\r\nconst filePath = path.resolve(`./public`, 'manifest.json');\r\nwriteFileSync(\r\n  filePath,\r\n  `${JSON.stringify({ timestamp: new Date().getTime() })}`\r\n);\n"})}),"\n",(0,t.jsx)(r.h3,{id:"3-\u68c0\u67e5\u66f4\u65b0\u7684\u903b\u8f91",children:"3. \u68c0\u67e5\u66f4\u65b0\u7684\u903b\u8f91"}),"\n",(0,t.jsxs)(r.p,{children:["\u5165\u53e3\u6587\u4ef6 main.js \u5904\u5f15\u5165",(0,t.jsx)(r.br,{}),"\n","\u6211\u8fd9\u91cc\u68c0\u67e5\u66f4\u65b0\u7684\u6587\u4ef6\u662f\u653e\u5728 utils/checkUpdate",(0,t.jsx)(r.br,{}),"\n","// \u68c0\u67e5\u7248\u672c\u66f4\u65b0",(0,t.jsx)(r.br,{}),"\n",(0,t.jsx)(r.code,{children:"import \u2018@/utils/checkUpdate\u2019"})]}),"\n",(0,t.jsx)(r.p,{children:"checkUpdate.js\uff1a"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:"import router from '@/router';\r\nimport { Modal } from 'ant-design-vue';\r\nif (process.env.NODE_ENV === 'production') {\r\n  let lastEtag = '';\r\n  let hasUpdate = false;\r\n  let worker = null;\r\n\r\n  async function checkUpdate() {\r\n    try {\r\n      // \u68c0\u6d4b\u524d\u7aef\u8d44\u6e90\u662f\u5426\u6709\u66f4\u65b0\r\n      let response = await fetch(`/manifest.json?v=${Date.now()}`, {\r\n        method: 'head'\r\n      });\r\n      // \u83b7\u53d6\u6700\u65b0\u7684etag\r\n      let etag = response.headers.get('etag');\r\n      hasUpdate = lastEtag && etag !== lastEtag;\r\n      lastEtag = etag;\r\n    } catch (e) {\r\n      return Promise.reject(e);\r\n    }\r\n  }\r\n\r\n  async function confirmReload(msg = '', lastEtag) {\r\n    worker &&\r\n      worker.postMessage({\r\n        type: 'pause'\r\n      });\r\n    try {\r\n      Modal.confirm({\r\n        title: '\u6e29\u99a8\u63d0\u793a',\r\n        content: '\u7cfb\u7edf\u540e\u53f0\u6709\u66f4\u65b0\uff0c\u8bf7\u70b9\u51fb\u201c\u7acb\u5373\u5237\u65b0\u201d\u5237\u65b0\u9875\u9762\\n' + msg,\r\n        okText: '\u7acb\u5373\u5237\u65b0',\r\n        cancelText: '5\u5206\u949f\u540e\u63d0\u793a\u6211',\r\n        onOk() {\r\n          worker.postMessage({\r\n            type: 'destroy'\r\n          });\r\n          location.reload();\r\n        },\r\n        onCancel() {\r\n          worker &&\r\n            worker.postMessage({\r\n              type: 'recheck',\r\n              lastEtag: lastEtag\r\n            });\r\n        }\r\n      });\r\n    } catch (e) {}\r\n  }\r\n\r\n  // \u8def\u7531\u62e6\u622a\r\n  router.beforeEach(async (to, from, next) => {\r\n    next();\r\n    try {\r\n      await checkUpdate();\r\n      if (hasUpdate) {\r\n        worker.postMessage({\r\n          type: 'destroy'\r\n        });\r\n        location.reload();\r\n      }\r\n    } catch (e) {}\r\n  });\r\n\r\n  // \u5229\u7528worker\u8f6e\u8be2\r\n  worker = new Worker(\r\n    /* webpackChunkName: \"checkUpdate.worker\" */ new URL(\r\n      '../worker/checkUpdate.worker.js',\r\n      import.meta.url\r\n    )\r\n  );\r\n\r\n  worker.postMessage({\r\n    type: 'check'\r\n  });\r\n  worker.onmessage = ({ data }) => {\r\n    if (data.type === 'hasUpdate') {\r\n      hasUpdate = true;\r\n      confirmReload(data.msg, data.lastEtag);\r\n    }\r\n  };\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:"\u8fd9\u91cc\u56e0\u4e3a\u7f3a\u6362\u8def\u7531\u672c\u6765\u5c31\u8981\u5237\u65b0\u9875\u9762\uff0c\u7528\u6237\u53ef\u65e0\u9700\u611f\u77e5\u7cfb\u7edf\u66f4\u65b0\u4fe1\u606f\uff0c\u76f4\u63a5\u901a\u8fc7\u8bf7\u6c42\u5934\u7684 Etag \u5373\u53ef\uff0c\u8fd9\u91cc\u7684 Fetch \u65b9\u6cd5\u5c31\u7528 head \u83b7\u53d6\u76f8\u5e94\u5934\u5c31\u597d\u4e86\u3002"}),"\n",(0,t.jsx)(r.p,{children:"checkUpdate.worker.js\uff1a"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:"let hasUpdate = false;\r\nlet intervalId = '';\r\nasync function checkUpdate() {\r\n  try {\r\n    // \u68c0\u6d4b\u524d\u7aef\u8d44\u6e90\u662f\u5426\u6709\u66f4\u65b0\r\n    let response = await fetch(`/manifest.json?v=${Date.now()}`, {\r\n      method: 'get'\r\n    });\r\n    // \u83b7\u53d6\u6700\u65b0\u7684etag\u548cdata\r\n    let etag = response.headers.get('etag');\r\n    let data = await response.json();\r\n    hasUpdate = lastEtag !== undefined && etag !== lastEtag;\r\n    if (hasUpdate) {\r\n      postMessage({\r\n        type: 'hasUpdate',\r\n        msg: data.msg,\r\n        lastEtag: lastEtag,\r\n        etag: etag\r\n      });\r\n    }\r\n    lastEtag = etag;\r\n  } catch (e) {\r\n    return Promise.reject(e);\r\n  }\r\n}\r\n\r\n// \u76d1\u542c\u4e3b\u7ebf\u7a0b\u53d1\u9001\u8fc7\u6765\u7684\u6570\u636e\r\naddEventListener('message', ({ data }) => {\r\n  if (data.type === 'check') {\r\n    // \u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21\r\n    // \u7acb\u5373\u6267\u884c\u4e00\u6b21\uff0c\u83b7\u53d6\u6700\u65b0\u7684etag\uff0c\u907f\u514d\u5728setInterval\u7b49\u5f85\u4e2d\u7cfb\u7edf\u66f4\u65b0\uff0c\u7b2c\u4e00\u6b21\u83b7\u53d6\u7684etag\u662f\u65b0\u7684\uff0c\u4f46\u662flastEtag\u8fd8\u662fundefined\uff0c\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u9519\u5931\u5237\u65b0\u65f6\u673a\r\n    checkUpdate();\r\n    intervalId = setInterval(checkUpdate, 5 * 60 * 1000);\r\n  }\r\n  if (data.type === 'recheck') {\r\n    // \u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21\r\n    hasUpdate = false;\r\n    lastEtag = data.lastEtag;\r\n    intervalId = setInterval(checkUpdate, 5 * 60 * 1000);\r\n  }\r\n  if (data.type === 'pause') {\r\n    clearInterval(intervalId);\r\n  }\r\n  if (data.type === 'destroy') {\r\n    clearInterval(intervalId);\r\n    close();\r\n  }\r\n});\n"})}),"\n",(0,t.jsx)(r.p,{children:"\u5982\u679c\u4e0d\u4f7f\u7528 worker \u76f4\u63a5\u8bb2\u8f6e\u8be2\u903b\u8f91\u653e\u5728 checkUpdate \u5373\u53ef"}),"\n",(0,t.jsx)(r.h3,{id:"4-worker-\u5f15\u5165",children:"4. Worker \u5f15\u5165"}),"\n",(0,t.jsx)(r.p,{children:"\u4ece webpack 5 \u5f00\u59cb\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 Web Workers \u4ee3\u66ff worker-loader\u3002"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:"new Worker(new URL('./worker.js', import.meta.url));\n"})}),"\n",(0,t.jsx)(r.p,{children:"\u4e5f\u53ef\u4ee5\u903b\u8f91\u5199\u6210\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u901a\u8fc7 ToURL \u7ed9 new Worker\uff0c\u5982\u4e0b\uff1a"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:"function createWorker(f) {\r\n  const blob = new Blob(['(' + f.toString() + ')()'], {\r\n    type: 'application/javascript'\r\n  });\r\n  const blobUrl = window.URL.createObjectURL(blob);\r\n  const worker = new Worker(blobUrl);\r\n  return worker;\r\n}\r\n\r\ncreateWorker(function () {\r\n  self.addEventListener(\r\n    'message',\r\n    function (event) {\r\n      // \u6d88\u8d39\u4fe1\u606f\r\n      self.postMessage('send message');\r\n    },\r\n    false\r\n  );\r\n});\n"})}),"\n",(0,t.jsx)(r.h3,{id:"5-worker-\u901a\u4fe1",children:"5. Worker \u901a\u4fe1"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:"// \u4e3b\u7ebf\u7a0b\r\nvar uInt8Array = new Uint8Array(new ArrayBuffer(10));\r\nfor (var i = 0; i < uInt8Array.length; ++i) {\r\n  uInt8Array[i] = i * 2; // [0, 2, 4, 6, 8,...]\r\n}\r\nworker.postMessage(uInt8Array);\r\n// Worker \u7ebf\u7a0b\r\nself.onmessage = function (e) {\r\n  var uInt8Array = e.data;\r\n  postMessage(\r\n    'Inside worker.js: uInt8Array.toString() = ' + uInt8Array.toString()\r\n  );\r\n  postMessage(\r\n    'Inside worker.js: uInt8Array.byteLength = ' + uInt8Array.byteLength\r\n  );\r\n};\n"})}),"\n",(0,t.jsx)(r.p,{children:"\u4f46\u662f\uff0c\u62f7\u8d1d\u65b9\u5f0f\u53d1\u9001\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u4f1a\u9020\u6210\u6027\u80fd\u95ee\u9898\u3002\u6bd4\u5982\uff0c\u4e3b\u7ebf\u7a0b\u5411 Worker \u53d1\u9001\u4e00\u4e2a 500MB \u6587\u4ef6\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6d4f\u89c8\u5668\u4f1a\u751f\u6210\u4e00\u4e2a\u539f\u6587\u4ef6\u7684\u62f7\u8d1d\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cJavaScript \u5141\u8bb8\u4e3b\u7ebf\u7a0b\u628a\u4e8c\u8fdb\u5236\u6570\u636e\u76f4\u63a5\u8f6c\u79fb\u7ed9\u5b50\u7ebf\u7a0b\uff0c\u4f46\u662f\u4e00\u65e6\u8f6c\u79fb\uff0c\u4e3b\u7ebf\u7a0b\u5c31\u65e0\u6cd5\u518d\u4f7f\u7528\u8fd9\u4e9b\u4e8c\u8fdb\u5236\u6570\u636e\u4e86\uff0c\u8fd9\u662f\u4e3a\u4e86\u9632\u6b62\u51fa\u73b0\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u4fee\u6539\u6570\u636e\u7684\u9ebb\u70e6\u5c40\u9762\u3002\u8fd9\u79cd\u8f6c\u79fb\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53eb\u505a Transferable Objects\u3002\u8fd9\u4f7f\u5f97\u4e3b\u7ebf\u7a0b\u53ef\u4ee5\u5feb\u901f\u628a\u6570\u636e\u4ea4\u7ed9 Worker\uff0c\u5bf9\u4e8e\u5f71\u50cf\u5904\u7406\u3001\u58f0\u97f3\u5904\u7406\u30013D \u8fd0\u7b97\u7b49\u5c31\u975e\u5e38\u65b9\u4fbf\u4e86\uff0c\u4e0d\u4f1a\u4ea7\u751f\u6027\u80fd\u8d1f\u62c5\u3002"}),"\n",(0,t.jsx)(r.p,{children:"\u5982\u679c\u8981\u76f4\u63a5\u8f6c\u79fb\u6570\u636e\u7684\u63a7\u5236\u6743\uff0c\u5c31\u8981\u4f7f\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002"}),"\n",(0,t.jsx)(r.p,{children:"\u7136\u800c\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u7684\u5bf9\u8c61\u90fd\u53ef\u4ee5\u88ab\u8f6c\u79fb\u3002\u53ea\u6709\u90a3\u4e9b\u88ab\u8bbe\u8ba1\u4e3a\u53ef\u8f6c\u79fb\u7684\u5bf9\u8c61\uff08\u7528[ Transferable ] IDL \u6269\u5c55\u5c5e\u6027\u4fee\u9970\uff09\uff0c\u6bd4\u5982 ArrayBuffer\u3001MessagePort\uff0cImageBitmap\uff0cOffscreenCanvas\uff0c\u624d\u80fd\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6765\u4f20\u9012\u3002\u8f6c\u79fb\u64cd\u4f5c\u662f\u4e0d\u53ef\u9006\u7684\uff0c\u4e00\u65e6\u5bf9\u8c61\u88ab\u8f6c\u79fb\uff0c\u539f\u59cb\u4e0a\u4e0b\u6587\u4e2d\u7684\u5f15\u7528\u5c06\u4e0d\u518d\u6709\u6548\u3002\u8f6c\u79fb\u5bf9\u8c61\u53ef\u4ee5\u663e\u8457\u51cf\u5c11\u590d\u5236\u6570\u636e\u6240\u9700\u7684\u65f6\u95f4\u548c\u5185\u5b58\u3002"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:"// Transferable Objects \u683c\u5f0f\r\nworker.postMessage(arrayBuffer, [arrayBuffer]);\r\n\r\n// \u4f8b\u5b50\r\nvar ab = new ArrayBuffer(1);\r\nworker.postMessage(ab, [ab]);\n"})}),"\n",(0,t.jsx)(r.h3,{id:"\u53c2\u8003\u6587\u732e",children:"\u53c2\u8003\u6587\u732e"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.a,{href:"https://blog.csdn.net/lichaoqun678/article/details/136644171",children:"https://blog.csdn.net/lichaoqun678/article/details/136644171"})})]})}function p(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>i});var t=n(96540);const a={},s=t.createContext(a);function o(e){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);