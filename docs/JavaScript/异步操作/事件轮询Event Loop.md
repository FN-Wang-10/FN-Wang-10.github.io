事件循环是 JS 的执行机制  
是指浏览器或者 Node 的一种解决 JavaScript 单线程运行时不阻塞的一种机制

JS 是一门单线程的语言，这意味着同一时间只能做一件事，但是并不意味着单线程就是阻塞，而实现单线程非阻塞的方法就是事件循环  
先进先出（FIFO）

事件轮训的过程

1. 首先，整体的 script(作为第一个宏任务)开始执行的时候，会把所有代码分为同步任务、异步任务两部分
2. 同步任务会直接进入主线程依次执行，形成一个"执行栈"
3. 异步任务会再分为宏任务和微任务,进入“任务队列”
4. 宏任务进入到 Event Table 中，并在里面注册回调函数，每当指定的事件完成时，Event Table 会将这个函数移到 Event Queue 中
5. 微任务也会进入到另一个 Event Table 中，并在里面注册回调函数，每当指定的事件完成时，Event Table 会将这个函数移到 Event Queue 中
6. 当主线程内的任务执行完毕，主线程为空时，会检查微任务的 Event Queue，如果有任务，就全部执行，如果没有就执行下一个宏任务  
   上述过程会不断重复，这就是 Event Loop，比较完整的事件循环

宏任务和微任务的执行顺序
一次事件循环中，先执行宏任务队列里的一个任务，再把微任务队列里的所有任务执行完毕，再去宏任务队列取下一个宏任务执行。

![img](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/18/16fb7ae3b678f1ea~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp)
