<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-其它/前端性能优化" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">前端性能优化 | fn-wang-10.github.io</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://fn-wang-10.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://fn-wang-10.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://fn-wang-10.github.io/docs/其它/前端性能优化"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="前端性能优化 | fn-wang-10.github.io"><meta data-rh="true" name="description" content="我们先来看一下页面渲染流程图，每个阶段的用时可以在 performance.timing 里查询。"><meta data-rh="true" property="og:description" content="我们先来看一下页面渲染流程图，每个阶段的用时可以在 performance.timing 里查询。"><link data-rh="true" rel="icon" href="/img/logo.ico"><link data-rh="true" rel="canonical" href="https://fn-wang-10.github.io/docs/其它/前端性能优化"><link data-rh="true" rel="alternate" href="https://fn-wang-10.github.io/docs/其它/前端性能优化" hreflang="en"><link data-rh="true" rel="alternate" href="https://fn-wang-10.github.io/docs/其它/前端性能优化" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="fn-wang-10.github.io RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="fn-wang-10.github.io Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ce383e8f.css">
<script src="/assets/js/runtime~main.7e8c5210.js" defer="defer"></script>
<script src="/assets/js/main.415a3e90.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.ico" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.ico" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">fn-wang-10</b></a><a class="navbar__item navbar__link" href="/blog">博客</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/Commitlint 使用总结">Commitlint 使用总结</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/MVC和MVVM区别">MVC和MVVM区别</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/SPA和MPA">SPA和MPA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/hash和history区别">hash和history区别</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/npm">npm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/spm">spm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/webview,jsbridge">webview,jsbridge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/web常见攻击方式">web常见攻击方式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/web服务器">web服务器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/">其它</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/前端代码提交规范">前端代码提交规范</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/其它/前端性能优化">前端性能优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/前端注释规范">前端注释规范</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/前端登录，这一篇就够了">前端登录，这一篇就够了</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/前端路由hash和history的区别">前端路由hash和history的区别</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/动态路由">动态路由</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/客户端与服务端长连接的几种方式">客户端与服务端长连接的几种方式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/总结">总结</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/路由">路由</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/其它/首屏加载速度">首屏加载速度</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">前端性能优化</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>前端性能优化</h1>
<p>我们先来看一下页面渲染流程图，每个阶段的用时可以在 <code>performance.timing</code> 里查询。</p>
<p><img decoding="async" loading="lazy" alt="页面渲染流程图" src="/assets/images/devops-performance-page_render-4aff46e836e11390222c9489c773160d.png" width="912" height="555" class="img_ev3q"></p>
<p>从图中我们可以看出，浏览器在得到用户请求之后，经历了下面这些阶段：重定向 → 拉取缓存 → dns 查询 → 建立 tcp 连接 → 发起请求 → 接收响应 → 处理 html 元素 → 元素加载完成。</p>
<ul>
<li>网络传输性能优化<!-- -->
<ul>
<li>浏览器缓存</li>
<li>使用 http2</li>
<li>资源打包压缩<!-- -->
<ul>
<li>js 压缩</li>
<li>html 压缩</li>
<li>css 压缩</li>
</ul>
</li>
<li>图片资源优化<!-- -->
<ul>
<li>不要在 html 里缩放图像</li>
<li>使用雪碧图（css sprite）</li>
<li>使用字体图标（iconfont）</li>
<li>使用 webp</li>
</ul>
</li>
<li>使用 cdn</li>
<li>使用预加载</li>
</ul>
</li>
<li>页面渲染性能优化<!-- -->
<ul>
<li>浏览器渲染过程（webkit）</li>
<li>dom 渲染层与 gpu 硬件加速</li>
<li>重排与重绘</li>
</ul>
</li>
<li>其他优化<!-- -->
<ul>
<li>pc 端</li>
<li>移动端</li>
<li>前后端同构</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="网络传输性能优化">网络传输性能优化<a class="hash-link" aria-label="Direct link to 网络传输性能优化" title="Direct link to 网络传输性能优化" href="/docs/其它/前端性能优化#网络传输性能优化">​</a></h2>
<p>我们常将网络性能优化措施归结为三大方面：<strong>减少请求数</strong>、<strong>减小请求资源大小</strong>、<strong>提升网络传输速率</strong>。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="浏览器缓存">浏览器缓存<a class="hash-link" aria-label="Direct link to 浏览器缓存" title="Direct link to 浏览器缓存" href="/docs/其它/前端性能优化#浏览器缓存">​</a></h3>
<p>浏览器在向服务器发起请求前，会先查询本地是否有相同的文件，如果有，就会直接拉取本地缓存，我  们先看看浏览器处理缓存的策略。</p>
<p><img decoding="async" loading="lazy" alt="浏览器缓存图" src="/assets/images/devops-performance-cache (1)-c990f794e9253785a49b52516e981381.png" width="754" height="670" class="img_ev3q"></p>
<p>浏览器默认的缓存是放在内存中的，但内存里的缓存会因为进程的结束或者说浏览器的关闭而被清除，如果存在硬盘里就能够被长期保留下去。很多时候，我们在 network 面板中各请求的 size 项里，会看到两种不同的状态：<em>from memory cache</em> 和 <em>from disk cache</em>，前者指缓存来自内存，后者指缓存来自硬盘。而控制缓存存放位置的是我们在服务器上设置的 etag 字段。在浏览器接收到服务器响应后，会检测响应头部，如果有 etag 字段，那么浏览器就会将本次缓存写入硬盘中。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用-http2">使用 HTTP2<a class="hash-link" aria-label="Direct link to 使用 HTTP2" title="Direct link to 使用 HTTP2" href="/docs/其它/前端性能优化#使用-http2">​</a></h3>
<p>我们都知道，在一次 http 请求中，底层会通过 tcp 建立连接。而 tcp 协议存在 3 次握手，4 次挥手阶段，这些机制保证了 tcp 的可靠性，但降低了传输效率，为了解决这个问题，我们可以使用 http2 来增加传输时候效率。</p>
<p>http2 相比 http1 主要有以下几点优化：</p>
<ul>
<li>多路复用<!-- -->
<ul>
<li>多个 http 复用一个 tcp 连接，减少 tcp 握手时间。</li>
</ul>
</li>
<li>压缩头部<!-- -->
<ul>
<li>常用的头部字段保存在表里，传输时只需要传递索引值即可。</li>
</ul>
</li>
<li>服务器端推送<!-- -->
<ul>
<li>服务器根据页面内容，主动把页面需要的资源传给客户端，减少请求数。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="资源打包压缩">资源打包压缩<a class="hash-link" aria-label="Direct link to 资源打包压缩" title="Direct link to 资源打包压缩" href="/docs/其它/前端性能优化#资源打包压缩">​</a></h3>
<p>我们之前所作的浏览器缓存工作，只有在用户第二次访问我们的页面才能起到效果，如果要在用户首次打开页面就实现优良的性能，必须对资源进行优化。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="压缩-js-代码">压缩 JS 代码<a class="hash-link" aria-label="Direct link to 压缩 JS 代码" title="Direct link to 压缩 JS 代码" href="/docs/其它/前端性能优化#压缩-js-代码">​</a></h4>
<p>在 webpack 的 production 模式中，会自动压缩 js 代码。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">optimization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">minimizer</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">UglifyJsPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">cache</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">parallel</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">sourceMap</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// set to true if you want JS source maps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">...</span><span class="token plain">Plugins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="压缩-html-代码">压缩 HTML 代码<a class="hash-link" aria-label="Direct link to 压缩 HTML 代码" title="Direct link to 压缩 HTML 代码" href="/docs/其它/前端性能优化#压缩-html-代码">​</a></h4>
<p>使用 html-webpack-plugin 中的 minify 进行压缩。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">minify</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">removeComments</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">collapseWhitespace</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">removeRedundantAttributes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">useShortDoctype</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">removeEmptyAttributes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">removeStyleLinkTypeAttributes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">keepClosingSlash</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">minifyJS</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">minifyCSS</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">minifyURLs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">chunksSortMode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dependency&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="压缩-css-代码">压缩 CSS 代码<a class="hash-link" aria-label="Direct link to 压缩 CSS 代码" title="Direct link to 压缩 CSS 代码" href="/docs/其它/前端性能优化#压缩-css-代码">​</a></h4>
<p>使用 cssnano 压缩 css。在 postcss.config.js 中进行配置。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> cssnano </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;cssnano&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cssnano</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="图片资源优化">图片资源优化<a class="hash-link" aria-label="Direct link to 图片资源优化" title="Direct link to 图片资源优化" href="/docs/其它/前端性能优化#图片资源优化">​</a></h3>
<p>刚刚我们介绍了资源打包压缩，只是停留在了代码层面，而在我们实际开发中，真正占用了大量网络传输资源的，并不是这些文件，而是图片，如果你对图片进行了优化工作，你就能立刻看见明显的效果。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="不要在-html-里缩放图像">不要在 HTML 里缩放图像<a class="hash-link" aria-label="Direct link to 不要在 HTML 里缩放图像" title="Direct link to 不要在 HTML 里缩放图像" href="/docs/其它/前端性能优化#不要在-html-里缩放图像">​</a></h4>
<p>很多开发者可能会有这样的错觉，为了能让用户觉得图片更加清晰，本来为了显示 200x200 的图片，却使用 400x400 的图片，其实不然，在普通的显示器上，用户并不会感到缩放后的大图更加清晰，但这样做会导致网页加载时间变长，同时照成带宽浪费。所以，当你需要用多大的图片时，就在服务器上准备好多大的图片，尽量固定图片尺寸。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>你可能不知道，一张 200KB 的图片和 2M 的图片的传输时间会是 200m 和 12s 的差距。</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用雪碧图css-sprite">使用雪碧图（CSS Sprite）<a class="hash-link" aria-label="Direct link to 使用雪碧图（CSS Sprite）" title="Direct link to 使用雪碧图（CSS Sprite）" href="/docs/其它/前端性能优化#使用雪碧图css-sprite">​</a></h4>
<p>雪碧图的概念大家一定在生活中经常听见，其实雪碧图是减小请求数的显著运用。而且很奇妙的是，多张图片聘在一块后，总体积会比之前所有图片的体积之和小。</p>
<p>推荐一个生成雪碧图的网站：<a href="https://www.toptal.com/developers/css/sprite-generator" target="_blank" rel="noopener noreferrer">www.toptal.com/developers/</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用字体图标iconfont">使用字体图标（iconfont）<a class="hash-link" aria-label="Direct link to 使用字体图标（iconfont）" title="Direct link to 使用字体图标（iconfont）" href="/docs/其它/前端性能优化#使用字体图标iconfont">​</a></h4>
<p>不论是压缩后的图片，还是雪碧图，终归还是图片，只要是图片，就还是会占用大量网络传输资源。但是字体图标的出现，却让前端开发者看到了另外一个神奇的世界。</p>
<p>图片能做的很多事情，字体都能作，而且它只是往 html 里插入字符和 css 样式而已，资源占用和图片请求比起来小太多了。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用-webp">使用 WebP<a class="hash-link" aria-label="Direct link to 使用 WebP" title="Direct link to 使用 WebP" href="/docs/其它/前端性能优化#使用-webp">​</a></h4>
<p>WebP 格式，是谷歌公司开发的一种旨在加快图片加载速度的图片格式。图片压缩体积大约只有 jpeg 的 2/3，并能节省大量的服务器带宽资源和数据空间。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用-cdn">使用 CDN<a class="hash-link" aria-label="Direct link to 使用 CDN" title="Direct link to 使用 CDN" href="/docs/其它/前端性能优化#使用-cdn">​</a></h3>
<p>再好的性能优化实例，也必须在 CDN 的支撑下才能到达极致。CDN 原理如下：</p>
<ul>
<li>根据 DNS 找到离你最近的服务器。</li>
<li>数据同步策略：热门资源立即同步，不热门数据谁用谁同步。</li>
</ul>
<p>执行以下命令查看用户与服务器之间经过的所有路由器：</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">traceroute baidu.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># windows</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tracert baidu.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>不言而喻，用户和服务器之间距离越远，经过的路由器越多，延迟也就越高。使用 CDN 的目的之一便是解决这一问题，当然不仅仅如此，CDN 还可以分担 IDC（互联网数据中心） 压力。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用预加载">使用预加载<a class="hash-link" aria-label="Direct link to 使用预加载" title="Direct link to 使用预加载" href="/docs/其它/前端性能优化#使用预加载">​</a></h3>
<p>在 html 加载时，会加载很多第三方资源，这些资源的优先级是不同的，一些重要资源需要提前进行获取，而一些资源可以延迟进行加载。我们可以使用 <strong>DNS 预解析</strong>，<strong>预加载</strong>，<strong>预渲染</strong>来管理页面资源的加载。</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- DNS 预解析 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">dns-prefetch</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">//cdfangyuan.cn</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 预加载，指明哪些资源是在页面加载完成后即刻需要的，并提前获取--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">preload</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://example.com</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 预渲染，提前加载下一页的数据 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">prerender</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://example.com</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="页面渲染性能优化">页面渲染性能优化<a class="hash-link" aria-label="Direct link to 页面渲染性能优化" title="Direct link to 页面渲染性能优化" href="/docs/其它/前端性能优化#页面渲染性能优化">​</a></h2>
<p>网络层面的优化介绍完了，接下来我们来介绍一下页面渲染时的优化。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="浏览器渲染过程webkit">浏览器渲染过程（Webkit）<a class="hash-link" aria-label="Direct link to 浏览器渲染过程（Webkit）" title="Direct link to 浏览器渲染过程（Webkit）" href="/docs/其它/前端性能优化#浏览器渲染过程webkit">​</a></h3>
<p><img decoding="async" loading="lazy" alt="浏览器渲染过程" src="data:image/png;base64,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" width="624" height="289" class="img_ev3q"></p>
<ul>
<li>parseHTML。解析 html，并构建 dom 树。</li>
<li>在解析过程中遇到 link 标记，引用外部的 css 文件。<!-- -->
<ul>
<li>Recalculate Style。将 css 文件解析成 css 对象模型(cssom)。</li>
</ul>
</li>
<li>Composite Layers。将 dom 和 cssom 合并成一个渲染树。<!-- -->
<ul>
<li>将 <code>display：none</code> 的元素从渲染树中删除掉。</li>
<li>获取 dom 树，并根据样式将其<strong>分割成多个独立的渲染层</strong>。</li>
</ul>
</li>
<li>Layout。根据渲染树进行重排。<!-- -->
<ul>
<li>精确地捕获每个元素在视口内的确切位置和尺寸，所有相对像素都会转换为屏幕上的绝对像素。</li>
<li>cpu 将每个渲染层绘制进位图中。</li>
<li>将位图作为纹理上传至 gpu 绘制。</li>
</ul>
</li>
<li>Paint。将各个节点绘制到屏幕上。<!-- -->
<ul>
<li>这一步通常称为“绘制”或“栅格化”。</li>
<li>将 csssom 中的每个节点转换成屏幕上的实际像素。</li>
<li>gpu 缓存渲染层，并复合多个渲染层，最终形成我们的图像。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dom-渲染层与-gpu-硬件加速">DOM 渲染层与 GPU 硬件加速<a class="hash-link" aria-label="Direct link to DOM 渲染层与 GPU 硬件加速" title="Direct link to DOM 渲染层与 GPU 硬件加速" href="/docs/其它/前端性能优化#dom-渲染层与-gpu-硬件加速">​</a></h3>
<p>一个页面在构建完 render tree 之后，是经历了这样的流程才最终呈现在我们面前的：</p>
<ul>
<li>浏览器会先获取 dom 树并依据样式将其分割成多个独立的渲染层。</li>
<li>cpu 将每个层绘制进位图中。</li>
<li>将位图作为纹理上传至 gpu（显卡）绘制。</li>
<li>gpu 将所有的渲染层缓存（如果下次上传的渲染层没有发生变化，gpu 就不需要对其进行重绘）并复合多个渲染层最终形成我们的图像。</li>
</ul>
<p>从上面的步骤我们可以知道，布局是由 cpu 处理的，而绘制则是由 gpu 完成的。</p>
<p>我们可以利用 <strong>gpu 缓存来减少页面重绘</strong>，例如：把那些一直发生大量重排重绘的元素提取出来，单独触发一个渲染层，那样这个元素就<strong>不会影响其他层</strong>一块重绘了。</p>
<p>什么情况下会触发渲染层呢？</p>
<p>video 元素、canvas、css3d、css 滤镜、z-index 大于某个相邻节点的元素都会触发新的渲染层，最常用的方法，就是给某个元素加上下面的样式：</p>
<div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">transform</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">translateZ</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">backface-visibility</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hidden</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我们把容易触发重排重绘的元素单独触发渲染层，让它与那些“静态”元素隔离，让 <strong>gpu 分担更多的渲染工作</strong>，我们通常把这样的措施称为硬件加速，或者是 gpu 加速。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="重排与重绘">重排与重绘<a class="hash-link" aria-label="Direct link to 重排与重绘" title="Direct link to 重排与重绘" href="/docs/其它/前端性能优化#重排与重绘">​</a></h3>
<ul>
<li>重排（reflow）：渲染层内的元素布局发生修改，都会导致页面重新排列，比如窗口的尺寸发生变化、删除或添加 DOM 元素，修改了影响元素盒子大小的 css 属性（诸如：width、height、padding）。</li>
<li>重绘（repaint）：绘制，即渲染上色，所有对元素的视觉表现属性的修改，都会引发重绘。</li>
</ul>
<p>不论是重排还是重绘，都会阻塞浏览器。要提高网页性能，就要降低重排和重绘的频率和成本，近可能少地触发重新渲染。重排是由 cpu 处理的，而重绘是由 gpu 处理的，cpu 的处理效率远不及 gpu，并且重排一定会引发重绘，而重绘不一定会引发重排。所以在性能优化工作中，我们更应当着重减少重排的发生。</p>
<p>这里给大家推荐一个网站，里面详细列出了哪些 css 属性在不同的渲染引擎中是否会触发重排或重绘：<a href="https://csstriggers.com" target="_blank" rel="noopener noreferrer">csstriggers.com</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="优化策略">优化策略<a class="hash-link" aria-label="Direct link to 优化策略" title="Direct link to 优化策略" href="/docs/其它/前端性能优化#优化策略">​</a></h3>
<p>谈了那么多理论，最实际不过的，就是解决方案，大家一定都等着急了吧，做好准备，一大波干货来袭：</p>
<ul>
<li><strong>css 属性读写分离</strong>，浏览器每次对元素样式进行读操作时，都必须进行一次重新渲染（重排 + 重绘），所以我们在使用 js 对元素样式进行读写操作时，最好将两者分离开，先读后写，避免出现两者交叉使用的情况。最客观的解决方案，就是不用 js 去操作元素样式。</li>
<li><strong>批量修改样式</strong>，通过切换 class 或者 style.csstext 属性去批量操作元素样式。</li>
<li><strong>dom 元素离线更新</strong>，当对 dom 进行相关操作时，例如 innerHTML、appendChild 等都可以使用 documentFragment 对象进行离线操作，带元素“组装”完成后再一次插入页面，或者使用 display<!-- -->:none<!-- --> 对元素隐藏，在元素“消失”后进行相关操作。</li>
<li><strong>将没用的元素设为不可见</strong>，visibility: hidden，这样可以减小重绘的压力，必要的时候再将元素显示。</li>
<li><strong>减少 dom 的深度</strong>，一个渲染层内不要有过深的子元素，少用 dom 完成页面样式，多使用伪元素或者 box-shadow 取代。</li>
<li><strong>在渲染前指定图片大小</strong>，因为 img 元素是内联元素，所以在加载图片后会改变宽高，严重的情况会导致整个页面重排，所以最好在渲染前就指定其大小，或者让其脱离文档流。</li>
<li><strong>合理使用硬件加速</strong>，对页面中可能发生大量重排重绘的元素单独触发渲染层，使用 gpu 分担 cpu 压力。（这项策略需要慎用，得着重考量以牺牲 gpu 占用率能否换来可期的性能优化，毕竟页面中存在太多的渲染层对与 gpu 而言也是一种不必要的压力，通常情况下，  我们会对动画元素采取硬件加速。）</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="其他优化">其他优化<a class="hash-link" aria-label="Direct link to 其他优化" title="Direct link to 其他优化" href="/docs/其它/前端性能优化#其他优化">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pc-端">PC 端<a class="hash-link" aria-label="Direct link to PC 端" title="Direct link to PC 端" href="/docs/其它/前端性能优化#pc-端">​</a></h3>
<ul>
<li>同一个域名下 3 个 js。</li>
<li>整个网页首屏加载的 js 5 个。</li>
<li>gzip 之后每个文件大小不超过 31.2KB~ 最大 100。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="移动端">移动端<a class="hash-link" aria-label="Direct link to 移动端" title="Direct link to 移动端" href="/docs/其它/前端性能优化#移动端">​</a></h3>
<ul>
<li>使用 manifest 配置离线应用。</li>
<li>利用 localstrage 缓存数据，容量最大 5M ，不能超过 2.5M。<!-- -->
<ul>
<li>同步，容量小，读取快。</li>
<li>localstrage 扩容计划。 iframe + postmessage。</li>
</ul>
</li>
<li>基于 indexdDB 等异步缓存方案。<!-- -->
<ul>
<li>容量大，读取慢。</li>
</ul>
</li>
<li>区分机型 ua，如果机型性能不好，就加载简版页面。</li>
<li>网速检测，页面中默认使用 1x 图，如果网速好则用 2x 图。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="传统页面和单页">传统页面和单页<a class="hash-link" aria-label="Direct link to 传统页面和单页" title="Direct link to 传统页面和单页" href="/docs/其它/前端性能优化#传统页面和单页">​</a></h3>
<ul>
<li>传统页面。<!-- -->
<ul>
<li>先加载页面骨架，然后 ajax 请求数据，容易白屏。</li>
</ul>
</li>
<li>传统单页。<!-- -->
<ul>
<li>利用 ajax 拉去数据，通过 hash 或者 history 管理路由，速度快，seo 不友好。</li>
</ul>
</li>
<li>前后端同构。<!-- -->
<ul>
<li>pushstate + ajax，首页进行服务器端渲染，页面内部的跳转由 ajax 获取数据渲染。</li>
<li>页面刷新，则直接请求后端，进行服务器端渲染。</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="参考链接">参考链接<a class="hash-link" aria-label="Direct link to 参考链接" title="Direct link to 参考链接" href="/docs/其它/前端性能优化#参考链接">​</a></h2>
<p><a href="https://juejin.im/post/5b6fa8c86fb9a0099910ac91" target="_blank" rel="noopener noreferrer">网站性能优化实战——从 12.67s 到 1.06s 的故事</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/其它/前端代码提交规范"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">前端代码提交规范</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/其它/前端注释规范"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">前端注释规范</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#网络传输性能优化">网络传输性能优化</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#浏览器缓存">浏览器缓存</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#使用-http2">使用 HTTP2</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#资源打包压缩">资源打包压缩</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#图片资源优化">图片资源优化</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#使用-cdn">使用 CDN</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#使用预加载">使用预加载</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#页面渲染性能优化">页面渲染性能优化</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#浏览器渲染过程webkit">浏览器渲染过程（Webkit）</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#dom-渲染层与-gpu-硬件加速">DOM 渲染层与 GPU 硬件加速</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#重排与重绘">重排与重绘</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#优化策略">优化策略</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#其他优化">其他优化</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#pc-端">PC 端</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#移动端">移动端</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#传统页面和单页">传统页面和单页</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/其它/前端性能优化#参考链接">参考链接</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>