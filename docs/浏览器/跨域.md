## 1.为什么出现了跨域

> 浏览器的安全级别限制
>
> > 同源策略是浏览器最核心也最基本的安全功能，主要阻止一个域名去访问另外一个域名上面的数据。
> > 所谓的同源是指，域名、协议、端口均为相同。
> > 所谓的跨域，不同的域名、协议、端口皆为不同域 、

## 2.哪些情况下产生跨域

1.  协议不同产生跨域(http/https)
2.  域名不同产生跨域
3.  端口不同产生跨域
4.  域名和域名对应的 ip 地址产生跨域(比如：localhost 和 127.0.0.1 产生跨域)
5.  一级域名和二级域名产生跨域

## 3.跨域解决方式有哪些？

## 1.反向代理

```javascript
proxy  webpack配置
"proxy": {
    "/index.php": {
      "target": "http://qinqin.net",
      "changeOrigin": true
    }
 }
```

## 2.后端代理

后端不存在跨域（后端代码脱离浏览器，后端是服务器端）  
利用后端(自己公司的后端)去获取接口数据，将数据传给前端

## 3：CORS 跨域资源共享(xhr2)

    CORS是一个W3C标准，全称是"跨域资源共享"（Cross-origin resource sharing）
    它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制
    整个CORS通信过程，都是浏览器自动完成，不需要用户参与
    对于开发者来说，CORS通信与同源的AJAX通信没有差别，代码完全一样
    实现CORS通信的关键是服务器，只要服务器实现了CORS接口，就可以跨源通信

需要服务器(提供接口的源码里面)添加下面两句代码。

```
header('Access-Control-Allow-Origin:*');//允许跨域的域名，*号表示所有域名。
header('Access-Control-Allow-Method:POST,GET');//允许跨域的请求方式。
不安全
```

### 4.jsonp

原理:
利用浏览器的"漏洞" src 不受同源策略的影响，可以请求任何链接 。动态创建 script 标签，将事先写好的函数名传给服务器，供服务器使用
（1）script 标签 src 属性不存在跨域
（2）get 方式--传递函数名 --弊端
（3）callback 回调函数(传递函数名)
jsonp 是一种非正式传输协议，用于解决跨域问题流程：
1、创建一个全局函数
2、创建一个 script 标签
3、给 script 添加 src
4、给 src 添加回调函数 test(callback=test) callback 是传给后端的一个参数
5、将 script 放到⻚面上
6、script 请求完成，将自己从⻚面上删除

### 5.nginx 代理跨域

    通过nginx服务器转发跨域请求，达到跨域的目的

```

```
